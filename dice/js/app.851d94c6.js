(function(e){function t(t){for(var i,o,s=t[0],c=t[1],u=t[2],d=0,f=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={app:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("85ec"),r=n.n(i);r.a},"452c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"top-bar"},[n("i",{staticClass:"icon side-icon",on:{click:function(t){e.showRemoveButton=!e.showRemoveButton}}},[e._v("-")]),n("span",{staticClass:"title"},[e._v("黄黄的法苏荼尔菌")]),n("i",{staticClass:"icon side-icon",on:{click:e.newDiceItem}},[e._v("+")])]),n("transition-group",{staticClass:"dice-list",attrs:{tag:"div","enter-active-class":"animate__animated animate__fadeInLeft animate__fast","leave-active-class":"animate__animated animate__fadeOutRight animate__fast","move-class":"v-move"}},e._l(e.diceList,(function(t){return n("Dice",{key:t.time,staticClass:"dice-item",attrs:{"dice-item":t,"show-remove-button":e.showRemoveButton},on:{remove:e.removeDice,save:e.save}})})),1)],1)},a=[],o=(n("c740"),n("a434"),n("77ed"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dice"},[n("div",{staticClass:"input-bar"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.expr,expression:"expr"}],attrs:{type:"text",warning:!e.dice,placeholder:"骰子表达式，如：1d100"},domProps:{value:e.expr},on:{input:function(t){t.target.composing||(e.expr=t.target.value)}}}),n("button",{attrs:{disabled:!e.dice},on:{click:e.roll}},[e._v("Roll")]),n("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeIn animate__fast","leave-active-class":"animate__animated animate__fadeOut animate__faster"}},[n("i",{directives:[{name:"show",rawName:"v-show",value:e.showRemoveButton,expression:"showRemoveButton"}],staticClass:"round-icon warning side-icon",on:{click:e.removeThis}},[e._v("×")])])],1),n("div",{staticClass:"output-bar"},[n("transition-group",{staticClass:"history",attrs:{tag:"div",mode:"out-in","enter-active-class":"animate__animated animate__fadeInLeft animate__fast","leave-active-class":"animate__animated animate__fadeOut animate__fast history-leave-active","move-class":"v-move"}},e._l(e.history,(function(t){return n("div",{key:t.time,staticClass:"item"},[e._v(e._s(t.result))])})),0),e.history.length?e._e():n("div",{key:null,staticClass:"item",staticStyle:{visibility:"hidden"}},[e._v("holder")])],1)])}),s=[],c=(n("13d5"),n("a9e3"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("2ca0"),new RegExp("(\\d+)?\\.?\\d+","iy"));function u(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,a=n;r<a.length;r++){var o=a[r];if(e.str.startsWith(o,e.index))return e.index+=o.length,o}return null}function l(e,t){return!!e.str.startsWith(t,e.index)&&(e.index+=t.length,!0)}function d(e){return f(e)||m(e)||h(e)||v(e)}function f(e){var t=e.index,n=null;return l(e,"(")&&(n=_(e))&&l(e,")")?n:(e.index=t,null)}function v(e){if(l(e,"半"))return function(){return.5};c.lastIndex=e.index;var t=c.exec(e.str);if(t){e.index+=t[0].length;var n=Number(t[0]);return function(){return n}}return null}function h(e){var t=e.index,n=null,i=v(e)||f(e);return l(e,"d")&&(n=d(e))?function(){return x(i(),n())}:(e.index=t,null)}function m(e){var t=e.index,n=!0;if(l(e,"+"))n=!0;else{if(!l(e,"-"))return null;n=!1}var i=d(e);return i?n?i:function(){return-i()}:(e.index=t,!1)}function p(e){var t=e.index,n=[],i=d(e);if(i){n.push(i);var r=null;t=e.index;while(u(e,"*","x")){if(!(r=d(e))){e.index=t;break}n.push(r),t=e.index}}return n.length>0?1===n.length?n[0]:function(){return n.reduce((function(e,t){return e*t()}),1)}:(e.index=t,null)}function _(e){var t=e.index,n=[],i=p(e);return i&&function(){n.push(i);var r=null,a=null;while(a=u(e,"+","-")){if(!(r=p(e))){e.index=t;break}n.push("-"===a?function(){return-r()}:r),t=e.index}}(),n.length>0?1===n.length?n[0]:function(){return n.reduce((function(e,t){return e+t()}),0)}:(e.index=t,null)}function x(e,t){for(var n=0,i=0;i<e;i++)n+=g(t);return n}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.floor(Math.random()*e)+t}function y(e){if(!e)return null;var t=e.replace(/\s+/g,"").toLowerCase(),n={str:t,index:0},i=_(n);return n.index===n.str.length?i:null}var b=20,w=0,O={name:"Dice",props:{diceItem:{type:Object,required:!0},showRemoveButton:{type:Boolean,default:!1}},data:function(){return{dice:null,pressStartTime:null}},computed:{expr:{get:function(){return this.diceItem.expr},set:function(e){this.diceItem.expr=e,this.dice=y(e),this.dice&&this.$emit("save")}},history:function(){return this.diceItem.history}},methods:{roll:function(){if(this.dice){var e=Date.now();e<=w&&(e=++w),this.history.unshift({expr:this.expr,result:this.dice(),time:e}),this.history.length>b&&this.history.splice(b,this.history.length-b),this.$emit("save")}},removeThis:function(){this.$emit("remove",this.diceItem.time)}},mounted:function(){this.dice=y(this.diceItem.expr)}},I=O,C=(n("cef7"),n("2877")),j=Object(C["a"])(I,o,s,!1,null,"2688aae6",null),k=j.exports,D="dice-list";function L(){var e=JSON.parse(localStorage.getItem(D));return e&&e.length>0?e:[{time:Date.now(),expr:"1d100",history:[]}]}function S(e){localStorage.setItem(D,JSON.stringify(e))}var R={name:"App",components:{Dice:k},data:function(){return{diceList:[],showRemoveButton:!1}},methods:{newDiceItem:function(){this.diceList.unshift({expr:"1d100",history:[],time:Date.now()}),this.save()},removeDice:function(e){var t=this.diceList.findIndex((function(t){return t.time===e}));t>=0&&(this.diceList.splice(t,1),this.save())},save:function(){S(this.diceList)}},created:function(){this.diceList=L()},beforeDestroy:function(){S(this.diceList)}},B=R,P=(n("034f"),n("b0a0"),n("e2ac"),Object(C["a"])(B,r,a,!1,null,"5b2f0886",null)),M=P.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(M)}}).$mount("#app")},"5f3f":function(e,t,n){},"79cd":function(e,t,n){},"85ec":function(e,t,n){},b0a0:function(e,t,n){"use strict";var i=n("452c"),r=n.n(i);r.a},cef7:function(e,t,n){"use strict";var i=n("5f3f"),r=n.n(i);r.a},e2ac:function(e,t,n){"use strict";var i=n("79cd"),r=n.n(i);r.a}});
//# sourceMappingURL=app.851d94c6.js.map