(function(t){function e(e){for(var a,c,i=e[0],s=e[1],l=e[2],f=0,m=[];f<i.length;f++)c=i[f],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&m.push(o[c][0]),o[c]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,i=1;i<n.length;i++){var s=n[i];0!==o[s]&&(a=!1)}a&&(r.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},o={app:0},r=[];function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/n-farm/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=s;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),o=n.n(a);o.a},"134f":function(t,e,n){},"1e1b":function(t,e,n){"use strict";var a=n("c390"),o=n.n(a);o.a},"3e55":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("380f");var a=n("f64c"),o=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",{attrs:{id:"app"}},[n("Menu",{staticClass:"menu",attrs:{theme:"dark",mode:"horizontal","default-selected-keys":t.menuKeys},on:{click:t.changePage},model:{value:t.menuKeys,callback:function(e){t.menuKeys=e},expression:"menuKeys"}},[n("MenuItem",{key:"page-home"},[t._v("主页")]),n("MenuItem",{key:"page-farm"},[t._v("农场")]),n("MenuItem",{key:"page-storage"},[t._v("仓库")])],1),n("Content",{staticClass:"page-content"},[n(t.component,{tag:"component"})],1)],1)},c=[],i=(n("2ca0"),n("5530")),s=(n("d2a2"),n("98c5")),l=(n("b6e5"),n("55f1")),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"slots"},[n("Modal",{staticClass:"item-picker-wrapper",attrs:{title:"选择物品"},on:{ok:t.confirmSelectItem,cancel:t.cancelSelectItem},model:{value:t.selectingItem,callback:function(e){t.selectingItem=e},expression:"selectingItem"}},[n("div",{staticClass:"item-picker"},t._l(t.storage,(function(e,a){return n("MiniCard",{key:a,class:t.selectedStorageIndex===a?"selected":"",on:{click:function(e){return t.pickItem(a)}}},[n("p",{staticClass:"item-content"},[t._v(t._s(e.amount)+" * "+t._s(e.item.name))])])})),1)]),t._l(t.slots,(function(e){return n("FarmSlot",{key:e.index,staticClass:"slot",attrs:{index:e.index,plant:e.plant},on:{use:t.selectItem}})}))],2)},f=[],m=(n("04f3"),n("ed3b")),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("MiniCard",{staticClass:"farm-slot",on:{click:function(e){t.focus=!0},mouseleave:function(e){t.focus=!1}}},[n("div",{staticClass:"plant-display"},[t.plant?n("div",[n("p",[t._v(t._s(t.text))]),n("Progress",{attrs:{strokeLinecap:"square",color:"#66ccff",percent:t.plant.status/255*100,format:function(t){return t.toFixed(2)+"%"}}})],1):n("p",[t._v("空")])]),t.focus?n("ButtonGroup",[n("Button",{on:{click:function(e){return t.harvest(t.index)}}},[t._v("收获")]),n("Button",{on:{click:function(e){return t.collect(t.index)}}},[t._v("回收")]),n("Button",{on:{click:t.use}},[t._v("使用")])],1):t._e()],1)},p=[],v=(n("99af"),n("b0c0"),n("a9e3"),n("3ea8"),n("f2ca")),g=(n("e1f5"),n("5efb")),h=n("2f62"),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mini-card",on:{click:function(e){return t.transferEvent("click",e)},mouseenter:function(e){return t.transferEvent("mouseenter",e)},mouseleave:function(e){return t.transferEvent("mouseleave",e)}}},[t._t("default")],2)},k=[],y={name:"MiniCard",methods:{transferEvent:function(t,e){this.$emit(t,e)}}},S=y,_=(n("9974"),n("2877")),I=Object(_["a"])(S,b,k,!1,null,"da728eca",null),O=I.exports,x={name:"FarmSlot",components:{MiniCard:O,Button:g["a"],Progress:v["a"],ButtonGroup:g["a"].Group},props:{index:{type:Number,required:!0},plant:{type:Object,default:function(){return null}}},data:function(){return{focus:!1}},computed:{text:function(){var t=this.plant;return"".concat(t.name,"-").concat(t.alive?"A":"D","-T").concat(t.status,"-S").concat(t.seed,"-V").concat(t.value)}},methods:Object(i["a"])({use:function(){this.$emit("use",this.index)}},Object(h["c"])(["harvest","collect"]))},j=x,C=(n("1e1b"),Object(_["a"])(j,d,p,!1,null,"97d6acb0",null)),w=C.exports,M={name:"Farm",components:{MiniCard:O,FarmSlot:w,Modal:m["a"]},data:function(){return{selectingItem:!1,selectedStorageIndex:-1,selectedSlotIndex:-1}},computed:Object(i["a"])({},Object(h["d"])(["slots","storage"])),methods:Object(i["a"])({selectItem:function(t){this.selectedSlotIndex=t,this.selectingItem=!0},pickItem:function(t){this.selectedStorageIndex=t},confirmSelectItem:function(){this.selectedSlotIndex>=0&&this.selectedStorageIndex>=0&&this.$store.commit("useAt",{slotIndex:this.selectedSlotIndex,storageIndex:this.selectedStorageIndex}),this.selectedSlotIndex=-1,this.selectedStorageIndex=-1,this.selectingItem=!1},cancelSelectItem:function(){this.selectedSlotIndex=-1,this.selectedStorageIndex=-1,this.selectingItem=!1}},Object(h["c"])(["createNewPlant"]))},B=M,P=(n("7c43"),Object(_["a"])(B,u,f,!1,null,"685077f4",null)),E=P.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",{staticClass:"storage"},[n("Content",{staticClass:"items"},t._l(t.storage,(function(e,a){return n("StorageItemStack",{key:a,staticClass:"item",attrs:{index:a,item:e.item,amount:e.amount,"does-sell-all":t.doesSellAll}})})),1),n("Footer",[t.doesSellAll?n("Button",{on:{click:function(e){t.doesSellAll=!1}}},[t._v("单个出售")]):n("Button",{on:{click:function(e){t.doesSellAll=!0}}},[t._v("全部出售")])],1)],1)},$=[],N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("MiniCard",{staticClass:"storage-item",on:{click:t.click}},[n("div",{staticClass:"storage-item-display"},[n("p",{staticClass:"storage-item-name"},[t._v(t._s(t.amount)+" * "+t._s(t.name))]),t.buttons?n("ButtonGroup",[n("Button",{on:{click:t.sell}},[t._v("出售")])],1):t._e()],1)])},L=[],F=(n("7db0"),n("a434"),n("3835")),D=n("ade3"),T=(n("a15b"),n("d81d"),n("fb6a"),"\n布普德特格克弗夫兹斯什吉奇思赫姆尔伍伊茨巴芭帕达塔加卡瓦娃法扎萨沙贾查撒哈马玛纳娜拉夸亚察阿艾拜派代戴泰盖凯赛蔡海迈奈莱赖怀厄伯珀泽瑟舍哲彻默勒沃耶策埃贝佩维费塞谢杰切黑梅内雷韦惠奎比皮迪蒂基菲齐西锡希米尼利莉里丽威乌杜图古库武富朱苏舒丘胡穆努卢鲁尤楚奥博波多托戈科福佐索肖乔霍莫诺洛罗约鲍保道陶高考豪毛瑙劳姚允久休纽柳留班潘丹坦甘坎范赞桑香詹钱汉曼南檑兰万扬因恩敦査本彭登根肯文芬增森中琴亨门伦温昆延岑宾平丁廷金津辛欣钦明林英青昂邦庞唐汤冈康冯方藏琼杭芒农朗旺匡仓翁蓬东栋通贡孔丰宗松雄洪蒙隆龙荣聪邓滕");function q(t){var e=0;return t.map((function(t){return T[(e+=t)%T.length]})).slice(0,5).join("")}n("cb29");function G(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(Math.random()*(t-e)+e)}function K(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Array(t-e).fill(0).map((function(){return G(n,a)}))}var J;n("a623");function U(t,e){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return t===e||a.every((function(n){return t[n]===e[n]}))}function H(t,e){return t===e||t.length===e.length&&t.every((function(t,n){return t===e[n]}))}var z={PLANT:"plant",SEED:"seed",COIN:"coin"},V=(J={},Object(D["a"])(J,z.PLANT,{name:"植物",onUse:function(t,e){return e.plant?0:(e.plant=t,1)},canPile:function(t,e){return t.gene===e.gene&&t.status===e.status&&t.value===e.value&&t.age===e.age&&t.seed===e.seed&&t.alive===e.alive},onEstimate:function(t){return t.value}}),Object(D["a"])(J,z.SEED,{name:"种子",onUse:function(t,e){return e.plant?0:(e.plant=R(t.gene),1)},canPile:function(t,e){return H(t.gene,e.gene)&&U(t,e,"status","value","age","seed","alive")},onEstimate:function(t){return t.value}}),Object(D["a"])(J,z.COIN,{name:"钱币",canPile:function(){return!0},onEstimate:function(){return 1}}),J);function W(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{item:t,amount:e}}function Q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{type:z.SEED,name:"Seed of "+X(t),gene:t,value:e}}function R(t){return{type:z.PLANT,name:X(t),gene:t,status:0,value:0,age:0,seed:0,alive:!0}}function X(t){return q(t)}function Y(t){if(t.alive){for(var e=t.gene,n=0;n<e.length;)switch(e[n]){case 1:while(++n<e.length&&G(15)<=e[n])t.status++;break;case 2:while(++n<e.length&&G(15)<=e[n])t.value++;break;case 3:t.status>=255&&(t.status--,t.seed++),++n;break;case 4:var a=0;while(++n<e.length){if(a+=e[n],e[n]<3.75)break;if(G(t.age)>a){t.dead=!0;break}}break;default:n++}t.age++}}function Z(t){var e=[W(Q(t.gene,Math.ceil(t.value/t.age*.5)),t.seed)];return e.coins=t.value,e}function tt(t){var e=V[t.type];return e&&e.onEstimate?e.onEstimate(t):null}function et(t,e){return null!==t&&t===e&&t.type===e.type&&V[t.type].canPile(t,e)}function nt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];for(var o=function(){var e=c[r];if(e.amount){var n=t.find((function(t){return et(t,e)}));n?n.amount+=e.amount:t.push(e)}},r=0,c=n;r<c.length;r++)o()}function at(t,e,n){if(e>=0&&e<t.length){var a=t[e];if(!n){var o=t.splice(e,1),r=Object(F["a"])(o,1),c=r[0];return c}if(a.amount>=n){if(a.amount-=n,!a.amount){var i=t.splice(e,1),s=Object(F["a"])(i,1),l=s[0];return l}return W(Object.assign({},a.item),n)}}return null}var ot={name:"StorageItemStack",components:{MiniCard:O,Button:g["a"],ButtonGroup:g["a"].Group},props:{index:{type:Number,required:!0},item:{type:Object},amount:{type:Number,required:!0},buttons:{type:Boolean,required:!1,default:function(){return!0}},doesSellAll:{type:Boolean,required:!1,default:function(){return!1}}},computed:{name:function(){return this.item.name||V[this.item.type].name}},methods:{click:function(){this.$emit("click")},sell:function(){this.$store.commit(this.doesSellAll?"sellAll":"sell",this.index)}}},rt=ot,ct=(n("aca7"),Object(_["a"])(rt,N,L,!1,null,"0ef69422",null)),it=ct.exports,st={name:"Storage",components:{StorageItemStack:it,Layout:s["a"],Button:g["a"],Footer:s["a"].Footer,Content:s["a"].Content},data:function(){return{doesSellAll:!1}},computed:Object(i["a"])({},Object(h["d"])(["storage"]))},lt=st,ut=(n("7d01"),Object(_["a"])(lt,A,$,!1,null,"8ec5f3e8",null)),ft=ut.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",{staticClass:"home-page"},[n("p",[t._v("硬币："+t._s(t.coins))]),n("Button",{attrs:{block:""},on:{click:function(e){return t.buySeed("normal")}}},[t._v("购买普通品质种子")]),n("Button",{attrs:{block:""},on:{click:function(e){return t.buySeed("long-gene")}}},[t._v("购买长基因种子")]),n("Button",{attrs:{block:""},on:{click:function(e){return t.buySeed("high-value")}}},[t._v("购买高值种子")]),n("Button",{attrs:{block:""},on:{click:t.buySlot}},[t._v("购买一块土地")]),n("Button",{attrs:{block:""},on:{click:t.load}},[t._v("手动载入")]),n("Button",{attrs:{block:""},on:{click:t.save}},[t._v("手动保存")]),n("Button",{attrs:{block:""},on:{click:t.clear}},[t._v("清空存档")]),null===t.pid?n("Button",{attrs:{block:""},on:{click:t.start}},[t._v("开始Tick")]):n("Button",{attrs:{block:""},on:{click:t.stop}},[t._v("停止tick")])],1)},dt=[],pt={name:"HomePage",components:{Layout:s["a"],Button:g["a"]},computed:Object(i["a"])({},Object(h["d"])(["coins","pid"])),methods:Object(i["a"])({},Object(h["c"])(["buySeed","buySlot"]),{},Object(h["b"])(["start","stop","load","save","clear"]))},vt=pt,gt=(n("fe8f"),Object(_["a"])(vt,mt,dt,!1,null,"262c588c",null)),ht=gt.exports,bt={name:"App",components:{Farm:E,Menu:l["a"],Layout:s["a"],Storage:ft,MenuItem:l["a"].Item,Content:s["a"].Content,Header:s["a"].Header},data:function(){return{page:"page-home",menuKeys:["page-home"]}},computed:Object(i["a"])({component:function(){switch(this.page){case"page-farm":return E;case"page-storage":return ft;case"page-home":return ht;default:return E}}},Object(h["d"])(["coins"])),watch:{page:function(t){this.menuKeys[0]=t},coins:function(t,e){var n=t-e;this.$message.info("硬币 "+(n>=0?"+"+n:n))}},methods:{changePage:function(t){var e=t.key;e.startsWith("page-")&&(this.page=e)}},mounted:function(){this.$store.dispatch("start")},beforeDestroy:function(){this.$store.dispatch("stop")}},kt=bt,yt=(n("034f"),Object(_["a"])(kt,r,c,!1,null,null,null)),St=yt.exports,_t=(n("4160"),n("159b"),n("2909")),It={state:{coins:5e3,slots:[],storage:[],timestamp:Date.now(),pid:null},mutations:{harvest:function(t,e){var n=t.slots[e].plant;if(n){t.slots[e].plant=null;var a=Z(n);nt.apply(void 0,[t.storage].concat(Object(_t["a"])(a))),t.coins+=a.coins||0}},collect:function(t,e){var n=t.slots,a=t.storage,o=n[e].plant;o&&(n[e].plant=null,nt(a,W(o)))},sell:function(t,e){var n=at(t.storage,e,1);if(n){var a=tt(n.item);null!==a?t.coins+=a:nt(t.storage,n)}},sellAll:function(t,e){var n=at(t.storage,e);if(n){var a=tt(n.item);null!==a?t.coins+=a*n.amount:nt(t.storage,n)}},buySeed:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";switch(n){case"normal":if(t.coins<100)return;t.coins-=100;break;case"long-gene":if(t.coins<400)return;t.coins-=400;break;case"high-value":if(t.coins<200)return;t.coins-=200;break}switch(n){case"normal":e=Q(K(10,5,15,0),25);break;case"long-gene":e=Q(K(20,15,15,0),100);break;case"high-value":e=Q(K(10,5,47,0),50);break}nt(t.storage,W(e))},buySlot:function(t){if(t.coins>=1e3)return t.coins-=1e3,t.slots.push({index:t.slots.length,plant:null}),!0},useAt:function(t,e){var n=t.slots,a=t.storage,o=e.slotIndex,r=e.storageIndex,c=n[o],i=a[r],s=V[i.item.type];if(s&&s.onUse){var l=s.onUse(i.item,c);l&&at(a,r,l)}},createNewPlant:function(t){var e,n=t.storage,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";switch(a){case"normal":e=R(Array(10).fill(0).map((function(){return Math.floor(15*Math.random())})));break;case"long-gene":e=R(Array(20).fill(0).map((function(){return Math.floor(15*Math.random())})));break;case"high-value":e=R(Array(10).fill(0).map((function(){return Math.floor(31*Math.random())})));break}nt(n,W(e))},tick:function(t,e){for(var n=t.slots,a=0;a<e;a++)n.forEach((function(t){t.plant&&Y(t.plant)}));t.timestamp=Date.now()},setPid:function(t,e){t.pid=e},fillState:function(t,e){Object.assign(t,e)}},actions:{start:function(t){var e=t.dispatch,n=t.commit,a=t.state;e("load"),null!==a.pid&&clearInterval(a.pid);var o=setInterval((function(){n("tick",1),e("save")}),6e4);n("setPid",o)},stop:function(t){var e=t.dispatch,n=t.commit,a=t.state;null!==a.pid&&(clearInterval(a.pid),n("setPid",null)),e("save")},load:function(t){var e=t.commit,n=JSON.parse(localStorage.getItem("n-farm-data"))||{};if(e("fillState",n),n.timestamp){var a=Math.floor((Date.now()-n.timestamp)/6e4);e("tick",a)}},save:function(t){var e=t.state,n=JSON.stringify({coins:e.coins,slots:e.slots,storage:e.storage,timestamp:e.timestamp});localStorage.setItem("n-farm-data",n)},clear:function(t){var e=t.commit,n=JSON.stringify({coins:0,slots:[],storage:[]});e("fillState",n),localStorage.removeItem("n-farm-data")}}};o["a"].prototype.$message=a["a"],a["a"].config({duration:1}),o["a"].use(h["a"]),o["a"].config.productionTip=!1;var Ot=new h["a"].Store(It);new o["a"]({render:function(t){return t(St)},store:Ot}).$mount("#app")},"7c43":function(t,e,n){"use strict";var a=n("da71"),o=n.n(a);o.a},"7d01":function(t,e,n){"use strict";var a=n("9ceb"),o=n.n(a);o.a},"85ec":function(t,e,n){},9974:function(t,e,n){"use strict";var a=n("134f"),o=n.n(a);o.a},"9ceb":function(t,e,n){},aca7:function(t,e,n){"use strict";var a=n("3e55"),o=n.n(a);o.a},b93d:function(t,e,n){},c390:function(t,e,n){},da71:function(t,e,n){},fe8f:function(t,e,n){"use strict";var a=n("b93d"),o=n.n(a);o.a}});
//# sourceMappingURL=app.c453ddd7.js.map