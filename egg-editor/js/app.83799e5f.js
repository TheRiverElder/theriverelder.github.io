(function(t){function e(e){for(var r,s,i=e[0],c=e[1],u=e[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},a={app:0},o=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/egg-editor/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},2379:function(t,e,n){},"2d6f":function(t,e,n){"use strict";var r=n("4593"),a=n.n(r);a.a},"36db":function(t,e,n){"use strict";var r=n("94f7"),a=n.n(r);a.a},"3d1c":function(t,e,n){"use strict";var r=n("7b8d"),a=n.n(r);a.a},4180:function(t,e,n){},4361:function(t,e,n){"use strict";var r=n("2379"),a=n.n(r);a.a},"452c":function(t,e,n){},4593:function(t,e,n){},4766:function(t,e,n){"use strict";var r=n("a9c7"),a=n.n(r);a.a},5018:function(t,e,n){"use strict";var r=n("d331"),a=n.n(r);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",{attrs:{id:"app"}},[n("Header",{staticClass:"app-header"},[t.mobile?t._e():n("img",{staticClass:"logo",attrs:{src:"favicon.png",alt:"logo"}}),n("h1",{staticClass:"app-name"},[t._v(t._s(t.name))]),n("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":t.activeMenuItem},on:{"on-select":t.handleClickMenuItem}},[t.mobile?n("Submenu",{attrs:{name:"pages"}},[n("Icon",{attrs:{slot:"title",type:"ios-browsers-outline",size:24},slot:"title"}),n("MenuItem",{attrs:{name:"page-home"}},[t._v("主页")]),n("MenuItem",{attrs:{name:"page-res"}},[t._v("资源管理器")]),n("MenuItem",{attrs:{name:"page-role"}},[t._v("角色管理器")]),n("MenuItem",{attrs:{name:"page-node"}},[t._v("节点管理器")])],1):n("templete",[n("MenuItem",{attrs:{name:"page-home"}},[t._v("主页")]),n("MenuItem",{attrs:{name:"page-res"}},[t._v("资源管理器")]),n("MenuItem",{attrs:{name:"page-role"}},[t._v("角色管理器")]),n("MenuItem",{attrs:{name:"page-node"}},[t._v("节点管理器")])],1),n("Submenu",{attrs:{name:"file"}},[t.mobile?n("Icon",{attrs:{slot:"title",size:24,type:"ios-document-outline"},slot:"title"}):n("span",{attrs:{slot:"title"},slot:"title"},[t._v("文件")]),n("MenuItem",{attrs:{name:"file-save"}},[t._v("保存")]),n("MenuItem",{attrs:{name:"file-load"}},[n("Upload",{attrs:{action:"",format:["json"],"before-upload":t.importData}},[t._v("载入")])],1)],1)],1)],1),n("Content",{staticClass:"content"},[n(t.component,{tag:"component"})],1)],1)},o=[],s=(n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("2ca0"),n("159b"),n("fc11")),i=n("5250"),c=n("6906"),u=n("25e7"),l=n("5c16"),d=n("78a0"),p=n("beb5"),f=n("9259"),m=n("af63"),v=n("df4a"),h=n("8679"),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",{staticClass:"node-manager"},[t.mobile?t._e():n("Sider",{staticClass:"sider",attrs:{width:250}},[n("NodeOverview",{attrs:{nodes:t.nodes}})],1),n("Layout",[n("Header",{staticClass:"header"},[n("p",{staticClass:"title"},[t._v("节点编辑器")]),n("Button",{staticClass:"button",attrs:{shape:"circle",icon:"ios-flag-outline"},on:{click:function(e){return t.addNode("label")}}},[t.mobile?t._e():n("span",[t._v("标签")])]),n("Button",{staticClass:"button",attrs:{shape:"circle",icon:"ios-git-commit"},on:{click:function(e){return t.addNode("line")}}},[t.mobile?t._e():n("span",[t._v("台词")])]),n("Button",{staticClass:"button",attrs:{shape:"circle",icon:"ios-git-branch"},on:{click:function(e){return t.addNode("option")}}},[t.mobile?t._e():n("span",[t._v("选项")])])],1),n("Content",{staticClass:"nodes"},[t.nodes.length?n("transition-group",{ref:"nodeList",staticClass:"node-list",attrs:{tag:"div","enter-active-class":"animated fadeInUp fast","leave-active-class":"animated fadeOutRight fast"}},t._l(t.nodes,(function(t,e){return n("Node",{key:t.uid,staticClass:"node-wrapper",attrs:{node:t,index:e}})})),1):n("p",{staticClass:"empty-node-list-hint"},[t._v("节点空空如也，点击右上方的按钮添加节点哦")])],1)],1)],1)},g=[],O=n("e3f5"),y=n("2a43"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",{attrs:{padding:8}},[n("div",{staticClass:"node",on:{mouseenter:function(e){t.hover=!0},mouseleave:function(e){t.hover=!1}}},[n(t.component,{tag:"component",staticClass:"node-content",attrs:{node:t.node}}),n("div",{staticClass:"action-wrapper"},[n("transition",{attrs:{"enter-active-class":"animated fadeInRight faster","leave-active-class":"animated fadeOutRight faster"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.hover,expression:"hover"}],staticClass:"action"},[n("Button",{attrs:{type:"warning",icon:"ios-trash-outline",shape:"circle"},on:{click:t.deleteNode}}),n("div",{staticClass:"mover"},[n("Icon",{attrs:{type:"ios-arrow-up",size:20},on:{click:function(e){return t.move(-1)}}}),n("Icon",{attrs:{type:"ios-arrow-down",size:20},on:{click:function(e){return t.move(1)}}})],1)],1)])],1)],1)])},j=[],w=(n("a9e3"),n("8b1e")),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node"},[n("Dropdown",{staticClass:"role-select",attrs:{trigger:"click"},on:{"on-click":t.selectSpeaker}},[n("Avatar",{attrs:{size:"large",src:t.speakerSrc,icon:"ios-contact"}}),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},t._l(t.roles,(function(e){return n("DropdownItem",{key:e.uid,attrs:{name:e.uid}},[t._v(t._s(e.name))])})),1)],1),n("div",{staticClass:"info"},[n("span",{staticClass:"speaker"},[t._v(t._s(t.speakerName))]),n("BetterInput",{staticClass:"content-edit",attrs:{"init-value":t.node.text},on:{confirm:t.handleConfirm}})],1)],1)},k=[],x=(n("7db0"),n("b0c0"),n("674c")),I=n("e79d"),D=n("90b2"),P=n("c5c1"),S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"better-input"},[t.editing?n("div",{staticClass:"panel"},[n("Input",{ref:"ipt",staticClass:"value",attrs:{size:t.size,type:"text",placeholder:"在此输入单行台词",clearable:""},on:{"on-enter":t.confirmInput,"on-blur":t.handleInputBlur},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t.buttons?n("Button",{staticClass:"button",attrs:{shape:"circle",type:"primary",icon:"ios-checkmark"},on:{click:t.confirmInput}}):t._e(),t.buttons?n("Button",{staticClass:"button",attrs:{shape:"circle",type:"warning",icon:"ios-close"},on:{click:t.cancelInput}}):t._e()],1):n("div",{staticClass:"panel"},[n("span",{staticClass:"value",on:{click:function(e){t.editing=!0}}},[t._v(t._s(t.value))])])])},N=[],$={name:"BetterInput",components:{Input:p["a"],Button:O["a"]},props:{size:{type:String,required:!1,default:function(){return"default"}},initValue:{type:String,required:!1,default:function(){return""}},buttons:{type:Boolean,required:!1,default:function(){return!0}}},data:function(){return{prev:this.initValue||"非空内容",value:this.initValue||"非空内容",editing:!1}},watch:{initValue:function(t){this.value=t||"非空内容",this.prev=t},editing:function(t){var e=this;t&&this.$nextTick((function(){return e.$refs.ipt.focus()}))}},methods:{confirmInput:function(){this.editing=!1,this.prev=this.value,this.$emit("confirm",this.value)},cancelInput:function(){this.editing=!1,this.value=this.prev,this.$emit("cancel",this.value)},handleInputBlur:function(){this.buttons||this.cancelInput()}}},R=$,B=(n("4361"),n("2877")),M=Object(B["a"])(R,S,N,!1,null,"36cf19cf",null),E=M.exports,T=n("2f62");function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var z={name:"LineNode",components:{BetterInput:E,Dropdown:P["a"],DropdownMenu:D["a"],DropdownItem:I["a"],Avatar:x["a"]},props:{node:{type:Object,required:!0}},data:function(){return{speakerSrc:"",speakerName:""}},computed:U({},Object(T["e"])(["roles","resources"])),watch:{speakerText:function(t){this.node.speaker=t}},methods:{refreshSpeaker:function(){var t=this,e=this.roles.find((function(e){return e.uid===t.node.role}));if(e)if(this.speakerName=e.name,e.avatar){var n=this.resources.find((function(t){return t.uid===e.avatar}));n&&(this.speakerSrc=n.src)}else this.speakerSrc=""},selectSpeaker:function(t){this.$store.commit("updateNode",{uid:this.node.uid,role:t,speaker:this.speakerText}),this.refreshSpeaker()},handleConfirm:function(t){this.$store.commit("updateNode",{uid:this.node.uid,text:t})}},mounted:function(){this.refreshSpeaker()}},q=z,H=(n("e104"),Object(B["a"])(q,C,k,!1,null,"5353a374",null)),A=H.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"label"},[n("BetterInput",{staticClass:"text",attrs:{size:"large","init-value":t.node.text},on:{confirm:t.handleConfirm}}),n("Icon",{attrs:{size:24,type:"ios-image-outline"}}),n("Dropdown",{attrs:{trigger:"click"},on:{"on-click":t.selectBackground}},[n("Button",{staticClass:"bg-select"},[n("span",[t._v(t._s(t.bgText))]),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{attrs:{name:""}},[t._v("同上节点")]),t._l(t.resources,(function(e,r){return n("DropdownItem",{key:e.uid,attrs:{name:e.uid,divided:!r}},[t._v(t._s(e.name))])}))],2)],1)],1)},J=[],V={name:"LabelNode",components:{BetterInput:E,Dropdown:P["a"],DropdownMenu:D["a"],DropdownItem:I["a"],Button:O["a"],Icon:i["a"]},props:{node:{type:Object,required:!0}},data:function(){return{bgText:"----"}},computed:Object(T["e"])(["resources"]),methods:{selectBackground:function(t){this.$store.commit("updateNode",{uid:this.node.uid,background:t}),this.bgText=t?this.resources.find((function(e){return e.uid===t})).name:"----"},handleConfirm:function(t){this.$store.commit("updateNode",{uid:this.node.uid,text:t})}},mounted:function(){var t=this;this.bgText=this.node.background?this.resources.find((function(e){return e.uid===t.node.background})).name:"----"}},W=V,G=(n("8930"),Object(B["a"])(W,F,J,!1,null,"8216f416",null)),K=G.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"option-node"},[n("Icon",{staticClass:"icon",attrs:{type:"ios-send-outline",size:24}}),n("BetterInput",{staticClass:"text",attrs:{"init-value":t.node.text},on:{confirm:t.handleConfirm}}),n("Icon",{staticClass:"icon",attrs:{type:"ios-arrow-forward"}}),n("Dropdown",{staticClass:"target",attrs:{trigger:"click"},on:{"on-click":t.selectTarget}},[n("Button",{staticClass:"target-button"},[t._v(" "+t._s(t.targetText)+" "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{attrs:{name:""}},[t._v("----")]),t._l(t.labels,(function(e){return n("DropdownItem",{key:e.uid,attrs:{name:e.uid}},[t._v(t._s(e.text))])}))],2)],1)],1)},X=[],Y={name:"OptionNode",components:{BetterInput:E,Icon:i["a"],Dropdown:P["a"],DropdownMenu:D["a"],DropdownItem:I["a"],Button:O["a"]},props:{node:{type:Object,required:!0}},data:function(){return{targetText:"----"}},computed:Object(T["c"])(["labels"]),methods:{selectTarget:function(t){this.targetText=t?this.labels.find((function(e){return e.uid===t})).text:"----",this.$store.commit("updateNode",{uid:this.node.uid,target:t})},handleConfirm:function(t){this.$store.commit("updateNode",{uid:this.node.uid,text:t})}},mounted:function(){var t=this;this.targetText=this.node.target?this.labels.find((function(e){return e.uid===t.node.target})).text:"----"}},Z=Y,tt=(n("3d1c"),Object(B["a"])(Z,Q,X,!1,null,"61922596",null)),et=tt.exports,nt=(n("77ed"),{name:"Node",components:{LineNode:A,LabelNode:K,OptionNode:et,Button:O["a"],Icon:i["a"],Card:w["a"]},props:{node:{type:Object,required:!0},index:{type:Number,required:!0},labels:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{hover:!1}},computed:{component:function(){switch(this.node.type){case"line":return A;case"label":return K;case"option":return et;default:return A}}},methods:{move:function(t){this.$store.commit("moveNode",{index:this.index,offset:t})},deleteNode:function(){this.$store.commit("deleteNode",{index:this.index})}}}),rt=nt,at=(n("36db"),Object(B["a"])(rt,_,j,!1,null,"4ac11423",null)),ot=at.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node-overview"},[n("p",{staticClass:"title"},[t._v("大纲")]),n("div",{staticClass:"nodes"},t._l(t.nodes,(function(e){return n("p",{key:e.uid,class:"node-preview "+e.type},[t._v(t._s(t.getShortcut(e)))])})),0)])},it=[],ct=(n("99af"),{name:"NodeOverview",props:{nodes:{type:Array,required:!0}},computed:Object(T["c"])(["labels"]),methods:{getShortcut:function(t){switch(t.type){case"line":return t.speaker?"".concat(t.speaker,": ").concat(t.text):t.text;case"label":return t.text;case"option":return t.text+(t.target?" > "+this.labels.find((function(e){return e.uid===t.target})).text:"")}}}}),ut=ct,lt=(n("cf9f"),Object(B["a"])(ut,st,it,!1,null,"685b68e7",null)),dt=lt.exports,pt={name:"NodeManager",components:{NodeOverview:dt,Node:ot,Layout:h["a"],Content:m["a"],Sider:y["a"],Header:v["a"],Button:O["a"]},computed:Object(T["e"])(["nodes","mobile"]),methods:{scrollToBottom:function(){var t=this.$refs.nodeList.$el;t.scrollTop=t.scrollHeight},addNode:function(t){var e=this;this.$store.commit("createNode",{type:t}),this.$nextTick((function(){return e.scrollToBottom()}))}}},ft=pt,mt=(n("5018"),Object(B["a"])(ft,b,g,!1,null,"2e08a8f7",null)),vt=mt.exports,ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",[n("Header",{staticClass:"header"},[n("span",{staticClass:"title"},[t._v("资源编辑器")]),n("Button",{staticClass:"button",attrs:{shape:"circle",icon:"ios-add"},on:{click:t.createRes}},[t._v("添加空资源")]),n("Upload",{attrs:{action:"","before-upload":t.createNewRes,multiple:""}},[n("Button",{staticClass:"button",attrs:{shape:"circle",icon:"ios-add-circle-outline"}},[t._v("添加文件资源")])],1)],1),n("Content",{staticClass:"resources"},[n("transition-group",{ref:"resList",staticClass:"resource-list",attrs:{tag:"div","enter-active-class":"animated fadeInRight fast","leave-active-class":"animated zoomOut fast"}},t._l(t.resources,(function(t,e){return n("div",{key:t.uid,staticClass:"resource-wrapper"},[n("Resource",{staticClass:"resource",attrs:{resource:t,index:e}})],1)})),0)],1)],1)},bt=[],gt=(n("ac1f"),n("1276"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",{staticClass:"resource",attrs:{bordered:!1}},[n("div",{staticClass:"card-header",attrs:{slot:"title"},slot:"title"},[n("BetterInput",{staticClass:"name",attrs:{"init-value":t.resource.name,buttons:!1},on:{confirm:t.confirmName}}),n("Upload",{staticClass:"icon",attrs:{action:"","before-upload":t.uploadFile}},[n("Icon",{attrs:{size:20,type:"ios-open-outline"}})],1),n("Icon",{staticClass:"icon",attrs:{size:20,type:"ios-remove-circle-outline"},on:{click:t.deleteRes}})],1),t.resource.src?n("div",{staticClass:"res-shortcut"},[n("div",{staticClass:"shortcut-wrapper"},[n("div",{staticClass:"img-wrapper"},[n("img",{attrs:{src:t.resource.src,alt:t.resource.name}})])]),n("p",{staticClass:"text-src"},[t._v(t._s(t.resource.src))])]):n("Upload",{staticClass:"no-res",attrs:{action:"",type:"drag","before-upload":t.uploadFile}},[n("Icon",{attrs:{size:"52",type:"ios-open-outline"}}),n("p",[t._v("点击 或 拖动 以上传资源")])],1)],1)}),Ot=[],yt={name:"Resource",components:{BetterInput:E,Icon:i["a"],Card:w["a"],Upload:c["a"]},props:{resource:{type:Object,require:!0},index:{type:Number,require:!0}},methods:{confirmName:function(t){this.$store.commit("updateRes",{uid:this.resource.uid,name:t})},deleteRes:function(){this.$store.commit("deleteRes",{index:this.index})},uploadFile:function(t){return this.$store.dispatch("upload",{uid:this.resource.uid,file:t}),!1}}},_t=yt,jt=(n("2d6f"),Object(B["a"])(_t,gt,Ot,!1,null,"07ee9615",null)),wt=jt.exports;function Ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xt={name:"ResourceManager",components:{Resource:wt,Layout:h["a"],Header:v["a"],Content:m["a"],Button:O["a"],Upload:c["a"]},computed:Object(T["e"])(["resources"]),methods:kt({createNewRes:function(t){var e=this;return this.$store.dispatch("createNewRes",{name:t.name.split(".")[0],file:t}),this.$nextTick((function(){return e.scrollToBottom()})),!1},scrollToBottom:function(){var t=this.$refs.resList.$el;t.scrollTop=t.scrollHeight}},Object(T["d"])(["createRes"]))},It=xt,Dt=(n("4766"),Object(B["a"])(It,ht,bt,!1,null,"4f3eddf0",null)),Pt=Dt.exports,St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",[n("Header",{staticClass:"header"},[n("span",{staticClass:"title"},[t._v("角色编辑器")]),n("Button",{staticClass:"button",attrs:{icon:"ios-add",shape:"circle"},on:{click:t.createRole}},[t._v("添加新角色")])],1),n("Content",{staticClass:"roles"},[n("transition-group",{ref:"resList",staticClass:"role-list",attrs:{tag:"div","enter-active-class":"animated fadeInRight fast","leave-active-class":"animated zoomOut fast"}},t._l(t.roles,(function(t,e){return n("div",{key:t.uid,staticClass:"role-wrapper"},[n("Role",{staticClass:"role",attrs:{role:t,index:e}})],1)})),0)],1)],1)},Nt=[],$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",{staticClass:"role"},[n("div",{staticClass:"card-header",attrs:{slot:"title"},slot:"title"},[n("Avatar",{attrs:{src:t.avatarSrc}}),n("BetterInput",{staticClass:"name",attrs:{buttons:!1,"init-value":t.role.name},on:{confirm:t.confirmName}}),n("Icon",{attrs:{size:20,type:"ios-remove-circle-outline"},on:{click:t.deleteRole}})],1),n("div",{ref:"body",staticClass:"body"},[n("div",{staticClass:"form-item"},[n("span",{staticClass:"key"},[t._v("头像：")]),n("Select",{staticClass:"value",model:{value:t.avatarUid,callback:function(e){t.avatarUid=e},expression:"avatarUid"}},t._l(t.resources,(function(e){return n("Option",{key:e.uid,attrs:{value:e.uid}},[t._v(t._s(e.name))])})),1)],1),n("div",{staticClass:"form-item"},[n("span",{staticClass:"key"},[t._v("立绘：")]),n("Select",{staticClass:"value",model:{value:t.picUid,callback:function(e){t.picUid=e},expression:"picUid"}},t._l(t.resources,(function(e){return n("Option",{key:e.uid,attrs:{value:e.uid}},[t._v(t._s(e.name))])})),1)],1),n("div",{staticClass:"pic-wrapper"},[t.role.pic?n("img",{staticClass:"pic",attrs:{src:t.picSrc,alt:t.role.name}}):t._e()])])])},Rt=[],Bt=n("4dc6"),Mt=n("5f81");function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Lt={name:"Role",components:{BetterInput:E,Card:w["a"],Select:Mt["a"],Option:Bt["a"],Avatar:x["a"],Icon:i["a"]},props:{role:{type:Object,require:!0},index:{type:Number,required:!0}},data:function(){return{avatarUid:this.role.avatar,picUid:this.role.pic,avatarSrc:"",picSrc:""}},watch:{avatarUid:function(t){this.updateData({avatar:t}),this.avatarSrc=t?this.resources.find((function(e){return e.uid===t})).src:""},picUid:function(t){this.updateData({pic:t}),this.picSrc=t?this.resources.find((function(e){return e.uid===t})).src:""}},computed:Tt({},Object(T["e"])(["resources"])),methods:{updateData:function(t){this.$store.commit("updateRole",Tt({uid:this.role.uid},t))},confirmName:function(t){this.updateData({name:t})},deleteRole:function(){this.$store.commit("deleteRole",{index:this.index})}},mounted:function(){var t=this;this.$refs.body.parentElement.style.height="100%",this.avatarSrc=this.role.avatar?this.resources.find((function(e){return e.uid===t.role.avatar})).src:"",this.picSrc=this.role.pic?this.resources.find((function(e){return e.uid===t.role.pic})).src:""}},Ut=Lt,zt=(n("eac2"),Object(B["a"])(Ut,$t,Rt,!1,null,"075fdde5",null)),qt=zt.exports,Ht={name:"RoleManager",components:{Role:qt,Layout:h["a"],Header:v["a"],Content:m["a"],Button:O["a"]},computed:Object(T["e"])(["roles"]),methods:{createRole:function(){var t=this;return this.$store.commit("createRole"),this.$nextTick((function(){return t.scrollToEnd()})),!1},scrollToEnd:function(){var t=this.$refs.resList.$el;t.scrollLeft=t.scrollWidth}}},At=Ht,Ft=(n("f28e"),Object(B["a"])(At,St,Nt,!1,null,"6c259b3a",null)),Jt=Ft.exports,Vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"welcome-text"},[n("h1",[t._v("申明")]),n("p",[t._v("这是一个还未完成的作品，本喵不对任何特性负责哦~")]),n("h1",[t._v("食用方法")]),t._m(0),n("p",[t._v("节点有三种：")]),t._m(1),n("p",[t._v("如果还是不知道怎么用，就去问江奶奶本人吧喵~❤")]),n("h1",[t._v("Todo List")]),n("ul",t._l(t.todoList,(function(e){return n("li",{key:e.content},[n("Icon",{attrs:{type:e.completed?"ios-checkmark-circle-outline":"ios-radio-button-off"}}),t._v(" "+t._s(e.content)+" ")],1)})),0)])},Wt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ol",[n("li",[t._v("在资源管理器中，上传文件资源（但是资源无法持久保存，待解决），并给每个资源起一个易于识别的名字。")]),n("li",[t._v("在角色管理器里，创建好角色，最好包括你自己（尽管目前还不一定支持）。")]),n("li",[t._v("然后在管理器中按序添加你想要的剧情节点。")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("strong",[t._v("标签")]),t._v(" 这类节点，是一个在节点列表中的标记，标记一个位置，这个位置指向标签下一个节点。在编译后，这个节点会消失，指向它的指针会指向它的下一个台词节点。")]),n("li",[n("strong",[t._v("台词")]),t._v(" 该类节点有两个主要关键点：讲述人 以及 文本。其中讲述人就是之前定义的角色。再编译后他会保留，并且添加至少一个选项，除非它是最后一个节点。")]),n("li",[n("strong",[t._v("选项")]),t._v(" 它是上一个台词节点所包含的选项，它包含一个指向标签的指针。在编译后，呀会被添加到上一个台词节点所表示的台词内。")])])}],Gt={name:"Home",components:{Icon:i["a"]},data:function(){return{todoList:[{content:"修复资源链接在更新之后不能使用的问题。",completed:!0},{content:"增加编译功能。",completed:!1},{content:"增加多选。",completed:!1},{content:"增加多选状态下的操作（移动、删除等）。",completed:!1},{content:"制作播放器界面。",completed:!1}]}}},Kt=Gt,Qt=(n("e1d5"),Object(B["a"])(Kt,Vt,Wt,!1,null,"32654b39",null)),Xt=Qt.exports;function Yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var te={name:"app",components:{Home:Xt,RoleManager:Jt,ResourceManager:Pt,NodeManager:vt,Layout:h["a"],Header:v["a"],Content:m["a"],Modal:f["a"],Input:p["a"],MenuItem:d["a"],Menu:l["a"],Submenu:u["a"],Upload:c["a"],Icon:i["a"]},data:function(){return{page:"page-home",activeMenuItem:""}},computed:Zt({component:function(){switch(this.page){case"page-home":return Xt;case"page-res":return Pt;case"page-role":return Jt;case"page-node":return vt;default:return Xt}}},Object(T["e"])(["name","mobile"])),methods:Zt({handleClickMenuItem:function(t){t.startsWith("page-")?this.page=t:t.startsWith("file-")&&"save"===t.substring(5)&&this.save(),this.activeMenuItem=t},importData:function(t){this.load(t)}},Object(T["b"])(["save","load"]))},ee=te,ne=(n("034f"),n("b0a0"),Object(B["a"])(ee,a,o,!1,null,null,null)),re=ne.exports;n("f8ce"),n("a434"),n("cb29"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("d0ff");function ae(){return _e.commit("incUidg"),_e.state.uidg}function oe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oe(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ie(t){var e;switch(t){case"label":e={background:0};break;case"line":e={role:0};break;case"option":e={target:0};break;default:throw Error("cannot resolve type: "+t)}return se({type:t,uid:ae(),text:""},e)}var ce=ie;function ue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function de(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=ae();return le({uid:e,type:"",name:"未命名-"+e,src:""},t)}var pe=de;function fe(){var t=ae();return{uid:t,name:"合成人-"+t,avatar:0,pic:0}}var me=fe;function ve(t,e){var n=new FileReader;n.onload=function(){return e(n.result)},n.readAsDataURL(t)}function he(t,e){var n=new FileReader;n.onload=function(){return e(JSON.parse(String(n.result)))},n.readAsText(t)}var be=n("926c"),ge=n.n(be);r["a"].use(T["a"]);var Oe={name:"未命名剧本",nodes:[],roles:[],resources:[]},ye=new T["a"].Store({state:{name:"皇帝的新剧本",nodes:[],roles:[],resources:[],uidg:Date.now(),mobile:window.innerWidth<960},getters:{labels:function(t){return t.nodes.filter((function(t){return"label"===t.type}))},lines:function(t){return t.nodes.filter((function(t){return"line"===t.type}))}},mutations:{updateData:function(t,e){var n=e.arr,r=e.updatedData,a=r.uid,o=n.find((function(t){return t.uid===a}));o&&Object.assign(o,r)},updateNode:function(t,e){ye.commit("updateData",{arr:t.nodes,updatedData:e})},createNode:function(t,e){var n=e.type;t.nodes.push(ce(n))},deleteNode:function(t,e){var n=e.index;n>=0&&t.nodes.splice(n,1)},moveNode:function(t,e){var n=e.index,r=e.offset;if(-1===r&&n>0||1===r&&n<t.nodes.length-1){var a=t.nodes[n];t.nodes.splice(n,1),t.nodes.splice(n+r,0,a)}},updateRes:function(t,e){ye.commit("updateData",{arr:t.resources,updatedData:e})},createRes:function(t,e){t.resources.push(pe(e))},deleteRes:function(t,e){var n=e.index;n>=0&&t.resources.splice(n,1)},updateRole:function(t,e){ye.commit("updateData",{arr:t.roles,updatedData:e})},createRole:function(t){t.roles.push(me())},deleteRole:function(t,e){var n=e.index;n>=0&&t.roles.splice(n,1)},fillState:function(t,e){Object.assign(t,Oe,e)},incUidg:function(t){t.uidg++}},actions:{save:function(t){var e=t.state,n=JSON.stringify({name:e.name,nodes:e.nodes,roles:e.roles,resources:e.resources,uidg:e.uidg});ge()(n,(e.name?e.name:"未命名工程")+".json","application/json")},load:function(t,e){var n=t.commit;he(e,(function(t){return n("fillState",t||{})}))},upload:function(t,e){var n=t.commit,r=e.uid,a=e.file;ve(a,(function(t){return n("updateRes",{uid:r,src:t})}))},createNewRes:function(t,e){var n=t.commit,r=t.state,a=e.name,o=e.file,s=pe({name:a});r.resources.push(s),ve(o,(function(t){return n("updateRes",{uid:s.uid,src:t})}))}}}),_e=ye;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(re)},store:_e}).$mount("#app")},6947:function(t,e,n){},7062:function(t,e,n){},"7b8d":function(t,e,n){},"85ec":function(t,e,n){},8930:function(t,e,n){"use strict";var r=n("4180"),a=n.n(r);a.a},"94f7":function(t,e,n){},a9c7:function(t,e,n){},b0a0:function(t,e,n){"use strict";var r=n("452c"),a=n.n(r);a.a},cf9f:function(t,e,n){"use strict";var r=n("de0a"),a=n.n(r);a.a},d331:function(t,e,n){},de0a:function(t,e,n){},e104:function(t,e,n){"use strict";var r=n("6947"),a=n.n(r);a.a},e1d5:function(t,e,n){"use strict";var r=n("ecfb"),a=n.n(r);a.a},eac2:function(t,e,n){"use strict";var r=n("f3e6"),a=n.n(r);a.a},ecfb:function(t,e,n){},f28e:function(t,e,n){"use strict";var r=n("7062"),a=n.n(r);a.a},f3e6:function(t,e,n){}});
//# sourceMappingURL=app.83799e5f.js.map