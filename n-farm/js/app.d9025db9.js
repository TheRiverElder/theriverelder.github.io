(function(t){function e(e){for(var a,c,s=e[0],i=e[1],l=e[2],f=0,d=[];f<s.length;f++)c=s[f],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&d.push(o[c][0]),o[c]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,s=1;s<n.length;s++){var i=n[s];0!==o[i]&&(a=!1)}a&&(r.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},o={app:0},r=[];function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/n-farm/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=i;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),o=n.n(a);o.a},"0410":function(t,e,n){"use strict";var a=n("fbd9"),o=n.n(a);o.a},"1dcc":function(t,e,n){"use strict";var a=n("8219"),o=n.n(a);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",{attrs:{id:"app"}},[n("Menu",{staticClass:"menu",attrs:{theme:"dark",mode:"horizontal","default-selected-keys":t.menuKeys},on:{click:t.changePage},model:{value:t.menuKeys,callback:function(e){t.menuKeys=e},expression:"menuKeys"}},[n("MenuItem",{key:"page-home"},[t._v("主页")]),n("MenuItem",{key:"page-farm"},[t._v("农场")]),n("MenuItem",{key:"page-storage"},[t._v("仓库")])],1),n("Content",{staticClass:"page-content"},[n(t.component,{tag:"component"})],1)],1)},r=[],c=(n("2ca0"),n("d2a2"),n("98c5")),s=(n("b6e5"),n("55f1")),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"slots"},[n("Modal",{staticClass:"item-picker-wrapper",attrs:{title:"选择物品"},on:{ok:t.confirmSelectItem,cancel:t.cancelSelectItem},model:{value:t.selectingItem,callback:function(e){t.selectingItem=e},expression:"selectingItem"}},[n("div",{staticClass:"item-picker"},t._l(t.storage,(function(e,a){return n("StorageItemStack",{key:a,class:t.selectedStorageIndex===a?"selected":"",attrs:{index:a,item:e.item,amount:e.amount,buttons:!1},on:{click:function(e){return t.pickItem(a)}}})})),1)]),t._l(t.slots,(function(e){return n("FarmSlot",{key:e.index,staticClass:"slot",attrs:{index:e.index,plant:e.plant},on:{use:t.selectItem}})}))],2)},l=[],u=n("5530"),f=(n("04f3"),n("ed3b")),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",{staticClass:"farm-slot",attrs:{"body-style":{padding:0,margin:0}},on:{click:function(e){t.focus=!0},mouseleave:function(e){t.focus=!1}}},[n("div",{staticClass:"plant-display"},[t.plant?n("div",[n("p",[t._v(t._s(t.plant.name))]),n("Progress",{attrs:{strokeLinecap:"square",color:"#66ccff",percent:t.plant.status/255*100,format:function(t){return t.toFixed(2)+"%"}}})],1):n("p",[t._v("空")])]),t.focus?n("ButtonGroup",[n("Button",{on:{click:function(e){return t.harvest(t.index)}}},[t._v("收获")]),n("Button",{on:{click:function(e){return t.collect(t.index)}}},[t._v("回收")]),n("Button",{on:{click:t.use}},[t._v("使用")])],1):t._e()],1)},m=[],p=(n("a9e3"),n("3ea8"),n("f2ca")),v=(n("e1f5"),n("5efb")),g=(n("19ac"),n("cdeb")),h=n("2f62"),b={name:"FarmSlot",components:{Card:g["a"],Button:v["a"],Progress:p["a"],ButtonGroup:v["a"].Group},props:{index:{type:Number,required:!0},plant:{type:Object,default:function(){return null}}},data:function(){return{focus:!1}},methods:Object(u["a"])({use:function(){this.$emit("use",this.index)}},Object(h["c"])(["harvest","collect"]))},y=b,S=(n("1dcc"),n("2877")),k=Object(S["a"])(y,d,m,!1,null,"9a075f16",null),I=k.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",{staticClass:"storage-item",attrs:{"body-style":{padding:0,margin:0}},on:{click:t.click}},[n("div",{staticClass:"storage-item-display"},[n("p",{staticClass:"storage-item-name"},[t._v(t._s(t.amount)+" * "+t._s(t.name))]),t.buttons?n("ButtonGroup",[n("Button",{on:{click:t.sell}},[t._v("出售")])],1):t._e()],1)])},O=[],x=(n("b0c0"),n("7db0"),n("a434"),n("3835")),j=n("ade3"),w=(n("a15b"),n("d81d"),n("fb6a"),"\n布普德特格克弗夫兹斯什吉奇思赫姆尔伍伊茨巴芭帕达塔加卡瓦娃法扎萨沙贾查撒哈马玛纳娜拉夸亚察阿艾拜派代戴泰盖凯赛蔡海迈奈莱赖怀厄伯珀泽瑟舍哲彻默勒沃耶策埃贝佩维费塞谢杰切黑梅内雷韦惠奎比皮迪蒂基菲齐西锡希米尼利莉里丽威乌杜图古库武富朱苏舒丘胡穆努卢鲁尤楚奥博波多托戈科福佐索肖乔霍莫诺洛罗约鲍保道陶高考豪毛瑙劳姚允久休纽柳留班潘丹坦甘坎范赞桑香詹钱汉曼南檑兰万扬因恩敦査本彭登根肯文芬增森中琴亨门伦温昆延岑宾平丁廷金津辛欣钦明林英青昂邦庞唐汤冈康冯方藏琼杭芒农朗旺匡仓翁蓬东栋通贡孔丰宗松雄洪蒙隆龙荣聪邓滕");function C(t){var e=0;return t.map((function(t){return w[(e+=t)%w.length]})).slice(0,5).join("")}n("cb29");function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(Math.random()*(t-e)+e)}function B(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Array(t-e).fill(0).map((function(){return P(n,a)}))}var A;n("a623");function E(t,e){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return t===e||a.every((function(n){return t[n]===e[n]}))}function M(t,e){return t===e||t.length===e.length&&t.every((function(t,n){return t===e[n]}))}var N={PLANT:"plant",SEED:"seed",COIN:"coin"},$=(A={},Object(j["a"])(A,N.PLANT,{name:"植物",onUse:function(t,e){return e.plant?0:(e.plant=t,1)},canPile:function(t,e){return t.gene===e.gene&&t.status===e.status&&t.value===e.value&&t.age===e.age&&t.seed===e.seed&&t.alive===e.alive},onEstimate:function(t){return t.value}}),Object(j["a"])(A,N.SEED,{name:"种子",onUse:function(t,e){return e.plant?0:(e.plant=D(t.gene),1)},canPile:function(t,e){return M(t.gene,e.gene)&&E(t,e,"status","value","age","seed","alive")},onEstimate:function(t){return t.value}}),Object(j["a"])(A,N.COIN,{name:"钱币",canPile:function(){return!0},onEstimate:function(){return 1}}),A);function L(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{item:t,amount:e}}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{type:N.SEED,name:"Seed of "+T(t),gene:t,value:e}}function D(t){return{type:N.PLANT,name:T(t),gene:t,status:0,value:0,age:0,seed:0,alive:!0}}function T(t){return C(t)}function q(t){if(t.alive){for(var e=t.gene,n=0;n<e.length;)switch(e[n]){case 1:while(++n<e.length&&P(15)<=e[n])t.status++;break;case 2:while(++n<e.length&&P(15)<=e[n])t.value++;break;case 3:t.status>=255&&(t.status--,t.seed++),++n;break;case 4:var a=0;while(++n<e.length){if(a+=e[n],e[n]<3.75)break;if(P(t.age)>a){t.dead=!0;break}}break;default:n++}t.age++}}function G(t){var e=[L(F(t.gene,Math.ceil(t.value/t.age*.5)),t.seed)];return e.coins=t.value,e}function K(t){var e=$[t.type];return e&&e.onEstimate?e.onEstimate(t):null}function J(t,e){return null!==t&&t===e&&t.type===e.type&&$[t.type].canPile(t,e)}function U(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];for(var o=function(){var e=c[r];if(e.amount){var n=t.find((function(t){return J(t,e)}));n?n.amount+=e.amount:t.push(e)}},r=0,c=n;r<c.length;r++)o()}function H(t,e,n){if(e>=0&&e<t.length){var a=t[e];if(!n){var o=t.splice(e,1),r=Object(x["a"])(o,1),c=r[0];return c}if(a.amount>=n){if(a.amount-=n,!a.amount){var s=t.splice(e,1),i=Object(x["a"])(s,1),l=i[0];return l}return L(Object.assign({},a.item),n)}}return null}var z={name:"StorageItemStack",components:{Card:g["a"],Button:v["a"],ButtonGroup:v["a"].Group},props:{index:{type:Number,required:!0},item:{type:Object},amount:{type:Number,required:!0},buttons:{type:Boolean,required:!1,default:function(){return!0}},doesSellAll:{type:Boolean,required:!1,default:function(){return!1}}},computed:{name:function(){return this.item.name||$[this.item.type].name}},methods:{click:function(){this.$emit("click")},sell:function(){this.$store.commit(this.doesSellAll?"sellAll":"sell",this.index)}}},W=z,Q=(n("ef75"),Object(S["a"])(W,_,O,!1,null,"f81858e8",null)),R=Q.exports,V={name:"Farm",components:{StorageItemStack:R,FarmSlot:I,Modal:f["a"]},data:function(){return{selectingItem:!1,selectedStorageIndex:-1,selectedSlotIndex:-1}},computed:Object(u["a"])({},Object(h["d"])(["slots","storage"])),methods:Object(u["a"])({selectItem:function(t){this.selectedSlotIndex=t,this.selectingItem=!0},pickItem:function(t){this.selectedStorageIndex=t},confirmSelectItem:function(){this.selectedSlotIndex>=0&&this.selectedStorageIndex>=0&&this.$store.commit("useAt",{slotIndex:this.selectedSlotIndex,storageIndex:this.selectedStorageIndex}),this.selectedSlotIndex=-1,this.selectedStorageIndex=-1,this.selectingItem=!1},cancelSelectItem:function(){this.selectedSlotIndex=-1,this.selectedStorageIndex=-1,this.selectingItem=!1}},Object(h["c"])(["createNewPlant"]))},X=V,Y=(n("bacf"),Object(S["a"])(X,i,l,!1,null,"6bbb6f05",null)),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",{staticClass:"storage"},[n("Content",{staticClass:"items"},t._l(t.storage,(function(e,a){return n("StorageItemStack",{key:a,staticClass:"item",attrs:{index:a,item:e.item,amount:e.amount,"does-sell-all":t.doesSellAll}})})),1),n("Footer",[t.doesSellAll?n("Button",{on:{click:function(e){t.doesSellAll=!1}}},[t._v("单个出售")]):n("Button",{on:{click:function(e){t.doesSellAll=!0}}},[t._v("全部出售")])],1)],1)},et=[],nt={name:"Storage",components:{StorageItemStack:R,Layout:c["a"],Button:v["a"],Footer:c["a"].Footer,Content:c["a"].Content},data:function(){return{doesSellAll:!1}},computed:Object(u["a"])({},Object(h["d"])(["storage"]))},at=nt,ot=(n("7d01"),Object(S["a"])(at,tt,et,!1,null,"8ec5f3e8",null)),rt=ot.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",{staticClass:"home-page"},[n("p",[t._v("硬币："+t._s(t.coins))]),n("Button",{attrs:{block:""},on:{click:t.buySeed}},[t._v("购买普通品质种子")]),n("Button",{attrs:{block:""},on:{click:t.buySlot}},[t._v("购买一块土地")]),n("Button",{attrs:{block:""},on:{click:t.load}},[t._v("手动载入")]),n("Button",{attrs:{block:""},on:{click:t.save}},[t._v("手动保存")]),n("Button",{attrs:{block:""},on:{click:t.clear}},[t._v("清空存档")]),null===t.pid?n("Button",{attrs:{block:""},on:{click:t.start}},[t._v("开始Tick")]):n("Button",{attrs:{block:""},on:{click:t.stop}},[t._v("停止tick")])],1)},st=[],it={name:"HomePage",components:{Layout:c["a"],Button:v["a"]},computed:Object(u["a"])({},Object(h["d"])(["coins","pid"])),methods:Object(u["a"])({},Object(h["c"])(["buySeed","buySlot"]),{},Object(h["b"])(["start","stop","load","save","clear"]))},lt=it,ut=(n("0410"),Object(S["a"])(lt,ct,st,!1,null,"34427326",null)),ft=ut.exports,dt={name:"App",components:{Farm:Z,Menu:s["a"],Layout:c["a"],Storage:rt,MenuItem:s["a"].Item,Content:c["a"].Content,Header:c["a"].Header},data:function(){return{page:"page-home",menuKeys:["page-home"]}},computed:{component:function(){switch(this.page){case"page-farm":return Z;case"page-storage":return rt;case"page-home":return ft;default:return Z}}},watch:{page:function(t){this.menuKeys[0]=t}},methods:{changePage:function(t){var e=t.key;e.startsWith("page-")&&(this.page=e)}},mounted:function(){this.$store.dispatch("start")},beforeDestroy:function(){this.$store.dispatch("stop")}},mt=dt,pt=(n("034f"),Object(S["a"])(mt,o,r,!1,null,null,null)),vt=pt.exports,gt=(n("99af"),n("4160"),n("159b"),n("2909")),ht={state:{coins:5e3,slots:[],storage:[],timestamp:Date.now(),pid:null},mutations:{harvest:function(t,e){var n=t.slots[e].plant;if(n){t.slots[e].plant=null;var a=G(n);U.apply(void 0,[t.storage].concat(Object(gt["a"])(a))),t.coins+=a.coins||0}},collect:function(t,e){var n=t.slots,a=t.storage,o=n[e].plant;o&&(n[e].plant=null,U(a,L(o)))},sell:function(t,e){var n=H(t.storage,e,1);if(n){var a=K(n.item);null!==a?t.coins+=a:U(t.storage,n)}},sellAll:function(t,e){var n=H(t.storage,e);if(n){var a=K(n.item);null!==a?t.coins+=a*n.amount:U(t.storage,n)}},buySeed:function(t){if(t.coins>=100){t.coins-=100;var e=F(B(50,20,15),25);U(t.storage,L(e))}},buySlot:function(t){t.coins>=1e3&&(t.coins-=1e3,t.slots.push({index:t.slots.length,plant:null}))},useAt:function(t,e){var n=t.slots,a=t.storage,o=e.slotIndex,r=e.storageIndex,c=n[o],s=a[r],i=$[s.item.type];if(i&&i.onUse){var l=i.onUse(s.item,c);l&&H(a,r,l)}},createNewPlant:function(t){var e=t.storage,n=D(Array(10).fill(0).map((function(){return Math.floor(15*Math.random())})));U(e,L(n))},tick:function(t,e){for(var n=t.slots,a=0;a<e;a++)n.forEach((function(t){t.plant&&q(t.plant)}));t.timestamp=Date.now()},setPid:function(t,e){t.pid=e},fillState:function(t,e){Object.assign(t,e)}},actions:{start:function(t){var e=t.dispatch,n=t.commit,a=t.state;e("load"),null!==a.pid&&clearInterval(a.pid);var o=setInterval((function(){n("tick",1),e("save")}),6e4);n("setPid",o)},stop:function(t){var e=t.dispatch,n=t.commit,a=t.state;null!==a.pid&&(clearInterval(a.pid),n("setPid",null)),e("save")},load:function(t){var e=t.commit,n=JSON.parse(localStorage.getItem("n-farm-data"))||{};if(e("fillState",n),n.timestamp){var a=Math.floor((Date.now()-n.timestamp)/6e4);e("tick",a)}},save:function(t){var e=t.state,n=JSON.stringify({coins:e.coins,slots:e.slots,storage:e.storage,timestamp:e.timestamp});localStorage.setItem("n-farm-data",n)},clear:function(t){var e=t.commit,n=JSON.stringify({coins:0,slots:[],storage:[]});e("fillState",n),localStorage.removeItem("n-farm-data")}}};a["a"].use(h["a"]),a["a"].config.productionTip=!1;var bt=new h["a"].Store(ht);new a["a"]({render:function(t){return t(vt)},store:bt}).$mount("#app")},"659f":function(t,e,n){},"7d01":function(t,e,n){"use strict";var a=n("9ceb"),o=n.n(a);o.a},8219:function(t,e,n){},"85ec":function(t,e,n){},"9ceb":function(t,e,n){},bacf:function(t,e,n){"use strict";var a=n("f1bb"),o=n.n(a);o.a},ef75:function(t,e,n){"use strict";var a=n("659f"),o=n.n(a);o.a},f1bb:function(t,e,n){},fbd9:function(t,e,n){}});
//# sourceMappingURL=app.d9025db9.js.map