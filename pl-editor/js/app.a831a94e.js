(function(t){function e(e){for(var n,r,o=e[0],c=e[1],l=e[2],v=0,d=[];v<o.length;v++)r=o[v],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},s={app:0},i=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/pl-editor/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("85ec"),s=a.n(n);s.a},"1a16":function(t,e,a){"use strict";var n=a("eaae"),s=a.n(n);s.a},"1adf":function(t,e,a){"use strict";var n=a("9461"),s=a.n(n);s.a},"4ab4":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app"}},[a("v-app-bar",{attrs:{app:"",color:"primary",height:"32","clipped-left":""}},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{dark:"",text:"",height:"32",tile:""}},"v-btn",s,!1),n),[t._v("文件")])]}}])},[a("v-list",[a("v-list-item",{attrs:{dense:"",disabled:!t.tabs.length},on:{click:function(e){return t.saveTab(t.tabIndex)}}},[a("v-list-item-title",[t._v("保存当前项目")])],1),a("v-list-item",{attrs:{dense:"",disabled:!t.tabs.length},on:{click:t.saveAllTabs}},[a("v-list-item-title",[t._v("保存所有项目")])],1),a("v-divider"),a("v-list-item",{attrs:{dense:""},on:{click:t.downloadProject}},[a("v-list-item-title",[t._v("下载工程")])],1),a("v-list-item",{attrs:{dense:"",disabled:!t.script},on:{click:t.downloadScript}},[a("v-list-item-title",[t._v("下载脚本")])],1),a("v-list-item",{attrs:{dense:""},on:{click:t.cacheState}},[a("v-list-item-title",[t._v("缓存至浏览器")])],1),a("v-divider"),a("v-list-item",{attrs:{dense:""},on:{click:t.loadProjectFromCache}},[a("v-list-item-title",[t._v("从浏览器缓存载入工程")])],1),a("v-list-item",{attrs:{dense:""}},[a("v-list-item-title",{staticClass:"p-relative"},[t._v(" 从文件载入工程 "),a("input",{staticClass:"invisible-overlay",attrs:{type:"file"},on:{change:function(e){return t.loadProjectFromFile(e.target.files[0])}}})])],1)],1)],1),a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{dark:"",text:"",height:"32",tile:""}},"v-btn",s,!1),n),[t._v("工程")])]}}])},[a("v-list",[a("v-list-item",{attrs:{dense:""},on:{click:t.compile}},[a("v-list-item-title",[t._v("编译为测试版")])],1),a("v-list-item",{attrs:{dense:"",disabled:""},on:{click:t.compile}},[a("v-list-item-title",[t._v("编译为发行版")])],1)],1)],1),a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{dark:"",text:"",height:"32",tile:""}},"v-btn",s,!1),n),[t._v("脚本")])]}}])},[a("v-list",[a("v-list-item",{attrs:{dense:"",disabled:!t.script},on:{click:t.compile}},[a("v-list-item-title",[t._v("测试脚本（需要先编译）")])],1)],1)],1),a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{dark:"",text:"",height:"32",tile:""}},"v-btn",s,!1),n),[t._v("帮助")])]}}])},[a("v-list",[a("v-list-item",{attrs:{dense:""},on:{click:function(e){return t.open("doc")}}},[a("v-list-item-title",[t._v("帮助文档")])],1)],1)],1)],1),a("v-navigation-drawer",{attrs:{app:"",permanent:"",clipped:""}},[a("v-list",[a("v-list-item",{on:{click:function(e){return t.open("base-info")}}},[a("v-list-item-avatar",[a("v-icon",[t._v("mdi-information-outline")])],1),a("v-list-item-title",[t._v("基础信息")])],1),a("v-list-item",{on:{click:function(e){return t.open("resource")}}},[a("v-list-item-avatar",[a("v-icon",[t._v("mdi-folder-outline")])],1),a("v-list-item-title",[t._v("资源管理器")])],1),a("v-list-group",{scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-item-avatar",[a("v-icon",[t._v("mdi-account-outline")])],1),a("v-list-item-subtitle",[t._v("角色")])]},proxy:!0}])},[t._l(t.roles,(function(e){return a("v-list-item",{key:e,on:{click:function(a){return t.open("role",e)}}},[a("v-list-item-avatar",{attrs:{color:"grey lighten-2"}},[a("v-img",{attrs:{src:t.data[t.data[e].avatar]}})],1),a("v-list-item-title",[t._v(t._s(t.data[e].name))])],1)})),a("v-list-item",[a("v-btn",{staticClass:"mx-auto",attrs:{text:"",color:"primary"},on:{click:t.createNewRole}},[t._v("新建角色")])],1)],2),a("v-list-group",{scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-item-avatar",[a("v-icon",[t._v("mdi-text")])],1),a("v-list-item-subtitle",[t._v("台词段")])]},proxy:!0}])},[t._l(t.chunks,(function(e){return a("v-list-item",{key:e,on:{click:function(a){return t.open("chunk",e)}}},[a("v-list-item-title",[t._v(t._s(t.data[e].title))])],1)})),a("v-list-item",[a("v-btn",{staticClass:"mx-auto",attrs:{text:"",color:"primary"},on:{click:t.createNewChunk}},[t._v("新建文本段")])],1)],2)],1)],1),a("v-main",{staticClass:"fill-y"},[a("div",{staticClass:"fill-y flex-grow-1 d-flex flex-column"},[a("v-tabs",{staticClass:"flex-grow-0",attrs:{height:"2em"},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},t._l(t.tabs,(function(e,n){return a("v-tab",{key:e.id,attrs:{size:"small"}},[a("v-icon",{attrs:{small:""}},[t._v(t._s(t.getIcon(e.type)))]),a("span",{staticClass:"mx-1"},[t._v(t._s(e.title))]),a("v-btn",{attrs:{"x-small":"",icon:""},on:{click:function(e){return t.close(n)}}},[a("v-icon",{attrs:{"x-small":""}},[t._v(t._s(e.dirty?"mdi-circle":"mdi-close"))])],1)],1)})),1),a("v-divider"),a("v-tabs-items",{staticClass:"fill-y inner-fill-y overflow-hidden inner-overflow-auto grey lighten-4 flex-grow-1",attrs:{"active-class":""},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},t._l(t.tabs,(function(e,n){return a("v-tab-item",{key:e.id,staticClass:"fill-y grey lighten-4"},[a(t.getComponent(e.type),{ref:"tabs",refInFor:!0,tag:"component",staticClass:"edit-area",attrs:{content:e.content},on:{mutate:function(a){return t.markDirty(e)},delete:function(e){return t.close(n)}}})],1)})),1)],1)])],1)},i=[],r=(a("c740"),a("4160"),a("a434"),a("b0c0"),a("d3b7"),a("6062"),a("3ca3"),a("159b"),a("ddb0"),a("5530")),o=a("2f62"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"resource-manager d-flex flex-wrap",on:{dragover:function(e){t.overlay=!0},dragend:function(e){t.overlay=!1},drop:t.handleDrop}},[t._l(t.resources,(function(e){return a("Resouece",{key:e,staticClass:"resource ma-3",attrs:{uid:e,res:t.data[e]}})})),a("v-card",{staticClass:"resource ma-3 d-flex flex-column"},[a("div",{staticClass:"input-wrapper flex-grow-1 flex-shrink-1 d-flex justify-center align-center"},[a("v-icon",{attrs:{"x-large":""}},[t._v("mdi-file-multiple")]),a("input",{attrs:{type:"file",multiple:""},on:{change:t.inputFiles}})],1),a("v-card-subtitle",[t._v("拖拽或点击输入文件")])],1)],2)},l=[],u=(a("baa5"),a("fb6a"),a("b85c")),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"d-flex flex-column"},[a("v-img",{staticClass:"flex-shrink-1",attrs:{src:t.res.src,contain:""}}),a("v-card-title",{staticClass:"name"},[t.editName?a("v-text-field",{attrs:{"hide-details":"auto",dense:"","error-messages":t.errors},on:{blur:function(e){t.editName=!1},keydown:t.handleEnter},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}):a("span",{on:{click:function(e){t.editName=!0}}},[t._v(t._s(t.name))])],1),a("v-card-actions",[a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.removeResource(t.id)}}},[a("v-icon",[t._v("mdi-delete")])],1),a("v-btn",{attrs:{icon:""}},[a("v-icon",[t._v("mdi-share")]),a("input",{ref:"btnReplace",staticClass:"fill",attrs:{type:"file"},on:{input:t.replaceRes}})],1)],1)],1)},d=[],p={name:"Resource",props:{res:Object},data:function(){return{id:this.res.id,name:this.res.name,src:this.res.src,type:this.res.type,editName:!1,errors:null}},watch:{name:function(t,e){this.errors=0===t.length?"名字不可为空":null,t!==e&&this.$emit("mutate")},src:function(t,e){t!==e&&this.updateData({id:this.id,src:this.src,type:this.type})}},methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["removeResource","updateData"])),{},{replaceRes:function(t){var e,a=this,n=Object(u["a"])(t.target.files);try{var s=function(){var t=e.value,n=new FileReader;n.onload=function(){return Object.assign(a,{src:n.result,type:t.type})},n.readAsDataURL(t)};for(n.s();!(e=n.n()).done;)s()}catch(i){n.e(i)}finally{n.f()}},handleEnter:function(t){"Enter"===t.key&&(this.editName=!1,this.updateData({id:this.id,name:this.name}))}})},f=p,m=(a("1a16"),a("2877")),h=a("6544"),_=a.n(h),b=a("8336"),g=a("b0af"),x=a("99d9"),k=a("132d"),y=a("adda"),j=a("8654"),O=Object(m["a"])(f,v,d,!1,null,"8c0dd874",null),w=O.exports;_()(O,{VBtn:b["a"],VCard:g["a"],VCardActions:x["a"],VCardTitle:x["c"],VIcon:k["a"],VImg:y["a"],VTextField:j["a"]});var C={name:"ResourceManager",components:{Resouece:w},data:function(){return{overlay:!1}},computed:Object(r["a"])({},Object(o["c"])(["resources","data"])),methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["createResource"])),{},{inputFiles:function(t){var e,a=this,n=Object(u["a"])(t.target.files);try{var s=function(){var t=e.value,n=t.name.lastIndexOf("."),s=n>=0?t.name.slice(0,n):t.name,i=new FileReader;i.onload=function(){return a.createResource({name:s,src:i.result,type:t.type})},i.readAsDataURL(t)};for(n.s();!(e=n.n()).done;)s()}catch(i){n.e(i)}finally{n.f()}},handleDrop:function(){this.overlay=!1},save:function(){}})},S=C,I=(a("d2a1"),a("a523")),V=Object(m["a"])(S,c,l,!1,null,"3dab9a01",null),R=V.exports;_()(V,{VCard:g["a"],VCardSubtitle:x["b"],VContainer:I["a"],VIcon:k["a"]});var $=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fill-y pa-5 d-flex"},[a("div",{staticClass:"form d-flex flex-column align-center"},[a("v-avatar",{attrs:{size:"160",color:"grey"}},[t.avatar?a("img",{attrs:{src:t.avatarUrl}}):a("span",{staticClass:"white--text text-h3"},[t._v(t._s(t.name.slice(0,2)))])]),a("v-text-field",{staticClass:"input flex-grow-0",attrs:{label:"名字",messages:"必填，最好不要超过三个中文",placeholder:"角色的名字"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("ResSelector",{attrs:{label:"头像",messages:"无实际用途，仅方便编辑"},model:{value:t.avatar,callback:function(e){t.avatar=e},expression:"avatar"}}),a("ResSelector",{attrs:{label:"立绘"},model:{value:t.pic,callback:function(e){t.pic=e},expression:"pic"}}),a("v-btn",{attrs:{color:"warning"},on:{click:t.deleteSelf}},[a("v-icon",[t._v("mdi-delete")]),t._v(" 删除该角色 ")],1)],1),a("div",{staticClass:"img-wrapper flex-grow-1"},[a("img",{attrs:{src:t.picUrl}})])])},T=[],D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-select",{attrs:{label:t.label,messages:t.messages,placeholder:t.placeholder,"no-data-text":t.noDataText||"无可用资源",items:t.resList,"item-text":"name","item-value":"id"},on:{input:t.handleInput},model:{value:t.resId,callback:function(e){t.resId=e},expression:"resId"}})},B=[],E=(a("d81d"),{name:"ResSelector",props:{value:String,messages:[Array,String],label:String,placeholder:String,noDataText:String},data:function(){return{resId:this.value}},watch:{value:function(t){this.resId=t}},computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["data","resources"])),{},{resList:function(){var t=this;return this.resources.map((function(e){return t.data[e]}))}}),methods:{handleInput:function(){this.$emit("input",this.resId),this.changingRole=!1}}}),A=E,N=(a("1adf"),a("b974")),U=Object(m["a"])(A,D,B,!1,null,"6df42ebf",null),P=U.exports;_()(U,{VSelect:N["a"]});a("13d5");function L(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];return a.reduce((function(e,a){return e[a]=function(e,n){t&&(this[t][a]=e),e!==n&&this.$emit("mutate")},e}),{})}var F={name:"Role",components:{ResSelector:P},props:{content:Object},data:function(){return{name:this.content.name,avatar:this.content.avatar,pic:this.content.pic}},watch:Object(r["a"])({},L("content","name","avatar","pic")),computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["data"])),{},{id:function(){return this.content.id},picUrl:function(){var t=this.data[this.pic];return t?t.src:null},avatarUrl:function(){var t=this.data[this.avatar];return t?t.src:null}}),methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["updateData","removeRole"])),{},{deleteSelf:function(){this.removeRole(this.id),this.$emit("delete",this.id)},save:function(){this.updateData({id:this.id,name:this.name,avatar:this.avatar,pic:this.pic})}})},M=F,z=(a("73f3"),a("8212")),J=Object(m["a"])(M,$,T,!1,null,"1e277438",null),K=J.exports;_()(J,{VAvatar:z["a"],VBtn:b["a"],VIcon:k["a"],VTextField:j["a"]});var G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chunk px-5"},[a("v-container",{staticClass:"pa-0 d-flex flex-column"},[a("div",{staticClass:"chunk-info pa-5"},[a("img",{staticClass:"background",attrs:{cover:"",width:"100%",gradient:"#ffffffaf 0%, #ffffffaf 50%, #fff 100%",src:t.backgroundUrl}}),a("div",{staticClass:"text-right ma-1",on:{mouseleave:function(e){t.openMenu=!1}}},[a("v-slide-x-reverse-transition",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.openMenu,expression:"openMenu"}]},[a("v-btn",{attrs:{small:"",text:"",color:"warning"},on:{click:t.deleteSelf}},[a("v-icon",[t._v("mdi-delete")]),t._v("删除 ")],1)],1)]),a("v-app-bar-nav-icon",{on:{click:function(e){t.openMenu=!t.openMenu}}})],1),a("v-row",{attrs:{align:"baseline"}},[a("v-col",{attrs:{cols:"2"}},[t._v("标题")]),a("v-col",{attrs:{cols:"10"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"text-h4",attrs:{type:"text",placeholder:"此处输入标题"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])],1),a("v-row",{attrs:{align:"baseline"}},[a("v-col",{attrs:{cols:"2"}},[t._v("副标题")]),a("v-col",{attrs:{cols:"10"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.subtitle,expression:"subtitle"}],staticClass:"text-subtitle-1",attrs:{type:"text",placeholder:"此处输入副标题"},domProps:{value:t.subtitle},on:{input:function(e){e.target.composing||(t.subtitle=e.target.value)}}})])],1),a("v-row",{attrs:{align:"baseline"}},[a("v-col",{attrs:{cols:"2"}},[t._v("背景")]),a("v-col",{attrs:{cols:"10"}},[a("ResSelector",{attrs:{placeholder:"选择背景"},model:{value:t.background,callback:function(e){t.background=e},expression:"background"}})],1)],1),a("v-container",[t._l(t.exits,(function(e,n){return a("v-row",{key:n},[a("v-col",{attrs:{cols:"1"}},[t._v(t._s(n+1))]),a("v-col",{attrs:{cols:"8"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"exit.text"}],domProps:{value:e.text},on:{input:function(a){a.target.composing||t.$set(e,"text",a.target.value)}}})]),a("v-col",{attrs:{cols:"2"}},[a("v-select",{attrs:{dense:"","hide-details":"",items:t.chunkList,"item-text":"title","item-value":"uid"},model:{value:e.target,callback:function(a){t.$set(e,"target",a)},expression:"exit.target"}})],1),a("v-col",{attrs:{cols:"1"}},[a("v-btn",{on:{click:function(e){return t.deleteExit(n)}}},[t._v("删除")])],1)],1)})),a("v-row",[a("v-btn",{staticClass:"mx-auto",attrs:{text:""},on:{click:t.addExit}},[t._v("新出口")])],1)],2)],1)]),a("v-divider"),a("div",{staticClass:"content"},t._l(t.sections,(function(e,n){return a("Section",{key:n,ref:"section",refInFor:!0,attrs:{index:n,section:e,"is-only":1===t.sections.length},on:{"add-line":t.addLine,"delete-line":t.deleteLine,focus:t.focusOnSection,mutate:function(e){return t.$emit("mutate")}}})})),1),a("v-row",{staticClass:"flex-grow-0 pa-2"},[a("v-btn",{ref:"btnAdd",staticClass:"mx-auto",attrs:{color:"primary",elevation:"0"},on:{click:t.addLine}},[a("v-icon",[t._v("mdi-plus")]),t._v("新小节 ")],1)],1)],1)},X=[],q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"section d-flex align-start",attrs:{align:"start"},on:{mouseenter:function(e){t.showBtnBar=!0},mouseleave:function(e){t.showBtnBar=!1}}},[a("span",{staticClass:"mt-2 d-flex align-center"},[a("span",{staticClass:"line-number text-subtitle-2 mr-3"},[t._v(t._s(t.index+1))]),a("span",{staticClass:"speaker"},[a("RoleSelector",{model:{value:t.speaker,callback:function(e){t.speaker=e},expression:"speaker"}})],1),a("span",[t._v(":")])]),a("span",{staticClass:"text mx-2 flex-grow-1",on:{click:t.focus}},[t.editText?a("v-textarea",{ref:"textInput",staticClass:"text-input py-1",attrs:{rows:"1","auto-grow":"",dense:"","hide-details":""},on:{keyup:t.handleInputKey,blur:function(e){t.editText=!1}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}):a("p",{staticClass:"pt-2"},[t._v(t._s(t.text))])],1),a("v-expand-x-transition",[t.showBtnBar&&!t.editText?a("v-btn-toggle",{staticClass:"btn-tgl mt-2",attrs:{dense:"",rounded:"",borderless:""}},[a("v-btn",{staticClass:"delete-btn",attrs:{icon:"",height:"2em",color:"green"},on:{click:function(e){return t.$emit("add-line",t.index)}}},[a("v-icon",[t._v("mdi-plus")])],1),t.isOnly?t._e():a("v-btn",{staticClass:"delete-btn",attrs:{icon:"",height:"2em",color:"red"},on:{click:function(e){return t.$emit("delete-line",t.index)}}},[a("v-icon",[t._v("mdi-minus")])],1)],1):t._e()],1)],1)},H=[],Q=(a("a9e3"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.changingRole?a("span",{staticClass:"role",on:{blur:function(e){t.changingRole=!1}}},[a("v-select",{attrs:{dense:"","hide-details":"",items:t.roleList,"item-text":"name","item-value":"id","no-data-text":"无可用角色"},on:{input:t.handleInput},model:{value:t.roleUid,callback:function(e){t.roleUid=e},expression:"roleUid"}})],1):a("span",{staticClass:"role d-flex align-center",on:{click:function(e){t.changingRole=!0}}},[a("RAvatar",{attrs:{size:"2em",contain:"",src:t.rolePicUrl}}),a("span",[t._v(t._s(t.roleName))])],1)}),W=[],Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-avatar",{attrs:{size:t.size}},[t.src?a("v-img",{attrs:{src:t.src,contain:""}}):a("v-icon",{attrs:{size:"normal"}},[t._v(t._s(t.emptyIcon))])],1)},Z=[],tt={name:"RAvatar",props:{src:String,size:{type:[String,Number],default:"1em"},emptyIcon:{type:String,default:"mdi-account-alert-outline"}},data:function(){return{text:this.value}}},et=tt,at=Object(m["a"])(et,Y,Z,!1,null,"651caef7",null),nt=at.exports;_()(at,{VAvatar:z["a"],VIcon:k["a"],VImg:y["a"]});var st={name:"RoleSelector",components:{RAvatar:nt},props:{value:String},data:function(){return{changingRole:!1,roleUid:this.value}},watch:{value:function(t){this.roleUid=t}},computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["roles","data","resources"])),{},{roleList:function(){var t=this;return this.roles.map((function(e){return t.data[e]}))},roleName:function(){if(this.roleUid){var t=this.data[this.roleUid];return t.name}return""},rolePicUrl:function(){if(this.roleUid){var t=this.data[this.roleUid];if(t){var e=this.data[t.avatar||t.pic];if(e)return e.src}}return null}}),methods:{handleInput:function(){this.$emit("input",this.roleUid),this.changingRole=!1}}},it=st,rt=(a("d795"),Object(m["a"])(it,Q,W,!1,null,"6dc2f815",null)),ot=rt.exports;_()(rt,{VSelect:N["a"]});var ct={name:"Section",components:{RoleSelector:ot},props:{index:Number,section:Object,isOnly:Boolean},data:function(){return{speaker:null,text:"",showBtnBar:!1,editText:!1}},watch:Object(r["a"])({},L("section","speaker","text")),computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["data"])),{},{speakerName:function(){if(this.speaker){var t=this.data[this.speaker];if(t&&t.pic)return t.name}return"      "},speakerPicUrl:function(){if(this.speaker){var t=this.data[this.speaker];if(t){var e=this.data[t.avatar||t.pic];if(e)return e.src}}return null}}),methods:{focus:function(){var t=this;this.editText?this.$refs.textInput.focus():(this.editText=!0,this.$nextTick((function(){return t.$refs.textInput.focus()})))},handleInputKey:function(t){var e=!0;if(t.ctrlKey){switch(t.key){case"Enter":this.$emit("add-line",this.index+1);break;case"ArrowUp":this.$emit("focus",this.index-1);break;case"ArrowDown":this.$emit("focus",this.index+1);break;case"Backspace":/^\s*$/.test(this.section.text)&&this.$emit("delete-line",this.index);break;default:e=!1}e&&t.preventDefault()}}}},lt=ct,ut=(a("64f9"),a("a609")),vt=a("0789"),dt=a("a844"),pt=Object(m["a"])(lt,q,H,!1,null,"53acfa43",null),ft=pt.exports;_()(pt,{VBtn:b["a"],VBtnToggle:ut["a"],VExpandXTransition:vt["b"],VIcon:k["a"],VTextarea:dt["a"]});var mt={name:"Chunk",components:{Section:ft,ResSelector:P},props:{content:Object},data:function(){return{title:this.content.title,subtitle:this.content.subtitle,background:this.content.background,sections:this.content.sections,exits:this.content.exits,openMenu:!1}},watch:Object(r["a"])({},L("content","title","subtitle","background")),computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["data","chunks"])),{},{id:function(){return this.content.id},chunkList:function(){var t=this;return this.chunks.map((function(e){return t.data[e]}))},backgroundUrl:function(){if(this.background){var t=this.data[this.background];return t?t.src:null}return null}}),methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["removeChunk","updateData"])),{},{addLine:function(t){var e=this;("number"!==typeof t||t<0||t>this.sections.length)&&(t=this.sections.length);var a=t?this.sections[t-1].speaker:null,n={speaker:a,text:""};this.sections.splice(t,0,n),this.$emit("mutate"),this.$nextTick((function(){return e.focusOnSection(t)}))},deleteLine:function(t){var e=this;this.sections.splice(t,1),this.$emit("mutate"),this.$nextTick((function(){return e.focusOnSection(t-1)}))},addExit:function(){this.exits.push({text:"",target:null}),this.$emit("mutate")},deleteExit:function(t){this.exits.splice(t,1),this.$emit("mutate")},deleteSelf:function(){this.removeChunk(this.id),this.$emit("delete",this.id)},focusOnSection:function(t){t=Math.max(0,Math.min(t,this.sections.length-1));var e=this.$refs.section;e.length&&t<e.length&&e[t].focus()},save:function(){this.updateData({id:this.id,title:this.title,subtitle:this.subtitle,background:this.background,sections:this.sections,exits:this.exits})}})},ht=mt,_t=(a("f42b"),a("5bc1")),bt=a("62ad"),gt=a("ce7e"),xt=a("0fd9"),kt=Object(m["a"])(ht,G,X,!1,null,"4dbdfe20",null),yt=kt.exports;_()(kt,{VAppBarNavIcon:_t["a"],VBtn:b["a"],VCol:bt["a"],VContainer:I["a"],VDivider:gt["a"],VIcon:k["a"],VRow:xt["a"],VSelect:N["a"],VSlideXReverseTransition:vt["d"]});var jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-text-field",{attrs:{label:"剧本名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("v-text-field",{attrs:{label:"版本"},model:{value:t.version,callback:function(e){t.version=e},expression:"version"}}),a("v-combobox",{attrs:{chips:"",multiple:"","deletable-chips":"",label:"作者"},model:{value:t.authors,callback:function(e){t.authors=e},expression:"authors"}})],1)},Ot=[],wt={name:"BaseInfo",data:function(){return{name:this.$store.state.name,version:this.$store.state.version,authors:this.$store.state.authors}},watch:Object(r["a"])({},L(null,"name","version","authors")),methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["updateBaseInfo"])),{},{save:function(){this.updateBaseInfo({name:this.name,version:this.version,authors:this.authors})}})},Ct=wt,St=a("2b5d"),It=Object(m["a"])(Ct,jt,Ot,!1,null,null,null),Vt=It.exports;_()(It,{VCombobox:St["a"],VContainer:I["a"],VTextField:j["a"]});var Rt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},$t=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("article",{staticClass:"pa-5"},[a("div",{attrs:{id:"write"}},[a("h1",[a("a",{staticClass:"md-header-anchor",attrs:{name:"江奶奶的galgame编辑器食用指南"}}),a("span",[t._v("江奶奶的Galgame编辑器食用指南")])]),a("h2",[a("a",{staticClass:"md-header-anchor",attrs:{name:"基本概念"}}),a("span",[t._v("基本概念")])]),a("p",[a("span",[t._v("首先，与该编辑器与播放器（虽然还没完成）的用户有三个身份：开发者、作者、玩家：")])]),a("ul",[a("li",[a("strong",[a("span",[t._v("开发者")])]),a("span",[t._v("：顾名思义，就是开发这个编辑器的人，当前只有江奶奶；")])]),a("li",[a("strong",[a("span",[t._v("作者")])]),a("span",[t._v("：编辑剧本的作者，一般用的是编辑器；")])]),a("li",[a("strong",[a("span",[t._v("玩家")])]),a("span",[t._v("：当一个作者完成一个剧本之后，游玩剧本的人，用的一般是播放器。")])])]),a("p",[a("span",[t._v("在本编辑器，工程由三种主要数据构成：资源、角色、文本段。")])]),a("h3",[a("a",{staticClass:"md-header-anchor",attrs:{name:"资源"}}),a("span",[t._v("资源")])]),a("p",[a("span",[t._v("这里的资源，指的主要是多媒体资源，如：")])]),a("ul",[a("li",[a("span",[t._v("以")]),a("code",[t._v(".png")]),a("span",[t._v("或")]),a("code",[t._v(".jpg")]),a("span",[t._v("等结尾的图片文件，")])]),a("li",[a("span",[t._v("以")]),a("code",[t._v(".ogg")]),a("span",[t._v("或")]),a("code",[t._v(".mp3")]),a("span",[t._v("等结尾的音频文件，")])]),a("li",[a("span",[t._v("以")]),a("code",[t._v(".mp4")]),a("span",[t._v("或")]),a("code",[t._v(".wmv")]),a("span",[t._v("等结尾的视频文件。")])])]),a("p",[a("span",[t._v("该数据包含了三个主要字段：")])]),a("ul",[a("li",[a("strong",[a("span",[t._v("名字")])]),a("span",[t._v("：一个资源的名字，但是这只是用于作者识别的，对于程序来说识别的标识是其ID，这在编译过程中会被舍弃；")])]),a("li",[a("strong",[a("span",[t._v("内容")])]),a("span",[t._v("：这一般是作者从本地上传的上述多媒体文件的内容，要注意，如果文件过大，会导致内存占用过多。")])])]),a("p",[a("span",[t._v("对于已有资源，其名字是可以改变的，其内容也是可以改变的。但是要知道，如果一个资源被删除，而后又新建了一个相同名字的资源的话，哪怕内容是一样的，也会")]),a("strong",[a("span",[t._v("被认为是不同的资源")])]),a("span",[t._v("！所以删除资源前请三思。")])]),a("p",[a("strong",[a("span",[t._v("注意")])]),a("span",[t._v("：")])]),a("ol",{attrs:{start:""}},[a("li",[a("span",[t._v("人物立绘请使用")]),a("strong",[a("span",[t._v("png")])]),a("span",[t._v("格式图片，因为该格式允许角色以外的空白部分呈现透明状态；")])]),a("li",[a("span",[t._v("暂时")]),a("strong",[a("span",[t._v("不支持视频")])]),a("span",[t._v("格式的使用，虽然你可以导入，但是这会导致大量的内存消耗，而且并不能用于剧本的编写；")])]),a("li",[a("span",[t._v("音频也")]),a("strong",[a("span",[t._v("暂不支持")])]),a("span",[t._v("，因为音频功能虽然计划加入，但是目前还没完成这部分的功能。")])])]),a("h3",[a("a",{staticClass:"md-header-anchor",attrs:{name:"角色"}}),a("span",[t._v("角色")])]),a("p",[a("span",[t._v("作为一个Galgame的角色，该数据包含了三个主要字段：")])]),a("ul",[a("li",[a("strong",[a("span",[t._v("名字")])]),a("span",[t._v("：一般来说，一个角色都会有名字，但是并不一定是一个名字对应一个角色（角色的）；")])]),a("li",[a("strong",[a("span",[t._v("头像")])]),a("span",[t._v("：这个头像仅仅作为编辑器中方便作者直观地分辨角色的附属功能，会在编译为脚本的时候被舍弃；")])]),a("li",[a("strong",[a("span",[t._v("立绘")])]),a("span",[t._v("：不用多说，要注意的是制作的时候，要注意统一画布大小，否则可能会出现大小以及像素的失真情况。")])])]),a("h3",[a("a",{staticClass:"md-header-anchor",attrs:{name:"文本段"}}),a("span",[t._v("文本段")])]),a("p",[a("span",[t._v("这是一个江奶奶捏造的概念，如“文本段”这三个字一样，就是指文本段落，是一堆文本的合集。一个文本段相当于一般意义上的章节，包含一段完整或不完整的故事，但是同时又不太一样，因为一个文本段内，只能使用在一张背景。其长短没有指定，可以由几千行，也可以只有寥寥几行。")])]),a("p",[a("span",[t._v("这个数据结构，有以下几个重要字段：")])]),a("ul",[a("li",[a("strong",[a("span",[t._v("标题")])]),a("span",[t._v("：这是作者识别文本段的内容的标识，这在编译过程中会被舍弃；")])]),a("li",[a("strong",[a("span",[t._v("副标题")])]),a("span",[t._v("：目前仅仅是作为标题的注释一般，通常不必在意，这在编译过程中会被舍弃；")])]),a("li",[a("strong",[a("span",[t._v("背景")])]),a("span",[t._v("：目前一个文本段只能由一张背景，一图流走到底，相当于")]),a("strong",[a("span",[t._v("传统")])]),a("span",[t._v("舞台上的一个场景，不到拉幕就不会改变；")])]),a("li",[a("del",[a("strong",[a("span",[t._v("BGM")])]),a("span",[t._v("：背景音乐，没什么好说的，在一整个文本段持续的时间中都会循环播放该音频，该功能尚不完善，请忽略；")])])]),a("li",[a("strong",[a("span",[t._v("小节列表")])]),a("span",[t._v("：这是一个小节的有序列表，在玩家游玩的时候每一个小节会依序被显示在屏幕上，关于小节的详情见下文；")])]),a("li",[a("strong",[a("span",[t._v("出口列表")])]),a("span",[t._v("：这是一个出口的集合，关于出口的详情见下文；")])])]),a("h4",[a("a",{staticClass:"md-header-anchor",attrs:{name:"小节"}}),a("span",[t._v("小节")])]),a("p",[a("span",[t._v("一个小节主要由发言者与台词文本组成。发言者是从已有的角色中选择的一个，而台词文本是一段文字。")])]),a("p",[a("span",[t._v("关于台词文本，一个小节中的台词文本可以有多句组成，每行文本都会被视为一句台词，相当于是这个发言者连续说了多句台词。")])]),a("h4",[a("a",{staticClass:"md-header-anchor",attrs:{name:"出口"}}),a("span",[t._v("出口")])]),a("p",[a("span",[t._v("在游戏中，若一个文本段被播放完毕，这时候一般是场景的切换，或者玩家的选择，而可供玩家可以选择的选项就被称为这个文本段的出口。一个出口会对应一个文本段，该文本段将会在玩家选择了该出口后开始播放。")])]),a("p",[a("span",[t._v("每个出口都会有一段文本，用于提供给玩家进行选择，或者说是一种提示，而其会有一个与其相对应的目标，这个目标是从已经存在的文本段中选取的其中一个。")])]),a("p",[a("span",[t._v("附注：无论是资源、角色、文本段，都是以一个用户看不到的ID号码作为其唯一标识，所以哪怕是名字相同的资源、角色，也是被视为不同的两个或多个对象。")])]),a("h2",[a("a",{staticClass:"md-header-anchor",attrs:{name:"食用步骤"}}),a("span",[t._v("食用步骤")])]),a("h3",[a("a",{staticClass:"md-header-anchor",attrs:{name:"完善基础信息"}}),a("span",[t._v("完善基础信息")])]),a("ol",{attrs:{start:""}},[a("li",[a("span",[t._v("点击左边导航栏的")]),a("code",[t._v("基础信息")]),a("span",[t._v("项目；")])]),a("li",[a("span",[t._v("按照提示填补完善信息，完成后你会发现编辑面板上方（也就是菜单栏下方）的，该项目标签的文字右侧有一个实心原点，这代表该项目还未保存，此时按下")]),a("code",[t._v("ctrl + S")]),a("span",[t._v("保存当前项目，或者按下")]),a("code",[t._v("ctrl + shift + S")]),a("span",[t._v("保存所有项目，或者在菜单栏的")]),a("code",[t._v("文件")]),a("span",[t._v("下找到相应操作;")])])]),a("h3",[a("a",{staticClass:"md-header-anchor",attrs:{name:"准备资源"}}),a("span",[t._v("准备资源")])]),a("ol",{attrs:{start:""}},[a("li",[a("span",[t._v("点击左边导航栏的")]),a("code",[t._v("资源管理器")]),a("span",[t._v("项目；")])]),a("li",[a("span",[t._v("准备好图片资源（毕竟现在也只支持图片资源XD），如头像、立绘、背景等；")])]),a("li",[a("span",[t._v("将它们从电脑的资源管理器中拖入那个写有“拖拽或点击输入文件”且有文件图标的小框中，或者点击文件图标输入文件（推荐后者）；")])]),a("li",[a("span",[t._v("拖进来后，在面板中会出现刚才拖入的资源，它们会自动根据文件名设置好自己的名字，如果不满意，可以自己修改名字，点击一下名字即可开始编辑，按下")]),a("code",[t._v("Enter")]),a("span",[t._v("键或者点击输入框以外的位置完成编辑；")])]),a("li",[a("span",[t._v("如果有一些资源不满意，可以点击下方第二个按钮（总之不是那个长的像垃圾桶的就对了），然后重新输入文件（由于作用域的问题，请尽量点击图标正中）；")])]),a("li",[a("span",[t._v("当你想要删除一些不必要的资源的时候，只要点击下方的垃圾桶图标即可，注意，")]),a("strong",[a("span",[t._v("这是不可逆的")])]),a("span",[t._v("。")])])]),a("h3",[a("a",{staticClass:"md-header-anchor",attrs:{name:"创建角色"}}),a("span",[t._v("创建角色")])]),a("p",[a("span",[t._v("当你设置完一些基础的素材后，便可以开始创建自己游戏中的角色了。")])]),a("ol",{attrs:{start:""}},[a("li",[a("span",[t._v("点击左边导航栏的")]),a("code",[t._v("角色")]),a("span",[t._v("项目，展开角色列表；")])]),a("li",[a("span",[t._v("点击最下边的")]),a("code",[t._v("新建角色")]),a("span",[t._v("按键，而后在右边就会打开这个新建角色的编辑面板（如果没有自动打开的话，就点一下列表中的角色）；")])]),a("li",[a("span",[t._v("编辑名字，选择头像，选择立绘；")])]),a("li",[a("span",[t._v("编辑完成后，保存该项目；")])]),a("li",[a("span",[t._v("若想要删除该角色，只需要按下那个醒目的")]),a("code",[t._v("删除该角色")]),a("span",[t._v("按钮即可，注意，")]),a("strong",[a("span",[t._v("这是不可逆的")])]),a("span",[t._v("！")])]),a("li",[a("span",[t._v("想要关闭该项目，仅需在标签栏中关闭该项目的标签即可。")])])]),a("h3",[a("a",{staticClass:"md-header-anchor",attrs:{name:"编辑文本段"}}),a("span",[t._v("编辑文本段")])]),a("p",[a("span",[t._v("连角色也创建好后，就可以正式开始写作了（其实之前的不做也没关系，大不了留空XD）。这也是这个编辑过程的重头戏。")])]),a("ol",{attrs:{start:""}},[a("li",[a("span",[t._v("点击左边导航栏的")]),a("code",[t._v("文本段")]),a("span",[t._v("项目，展开文本段列表；")])]),a("li",[a("span",[t._v("点击最下边的")]),a("code",[t._v("新建文本段")]),a("span",[t._v("按键，而后在右边就会打开这个新建文本段的编辑面板；")])]),a("li",[a("span",[t._v("在编辑界面可以看到标题、副标题、背景的编辑区域，这些在上文已经介绍过了，按照所想编辑即可；")])]),a("li",[a("span",[t._v("在背景的输入框下面，你还能看到一个“新出口”按键，这个先跳过，这在之后再使用；")])]),a("li",[a("span",[t._v("点击下方的")]),a("code",[t._v("新小节")]),a("span",[t._v("按键，会在该按键上方多出一行小节面板；")])]),a("li",[a("span",[t._v("在小节面板的左边是序号，而后是发言者，如果之前有创建角色并保存的话，这里就可以选择需要的角色，选择好后，其头像和名字将会显示出来（如果没有头像，则会用立绘代替头像显示）；")])]),a("li",[a("span",[t._v("在发言者设置好后，再往右，就是文本框了，这里作者可以输入一行或多行文本，每一行都会被作为单独的台词呈现（游戏中同屏只会出现一句台词）；")])]),a("li",[a("span",[t._v("如果鼠标位于该小节的编辑面板中的话，就会出现两个按钮：")]),a("code",[t._v("+")]),a("span",[t._v("与")]),a("code",[t._v("-")]),a("span",[t._v("，按下")]),a("code",[t._v("+")]),a("span",[t._v("按键，则可以在该小节")]),a("strong",[a("span",[t._v("前")])]),a("span",[t._v("插入新的小节，按下")]),a("code",[t._v("-")]),a("span",[t._v("按键则会删除该小节；")])]),a("li",[a("span",[t._v("而后重复上述操作，知道该文本段编写完毕，然后与编辑角色时候一样保存即可；")])]),a("li",[a("span",[t._v("现在开始编辑出口，点击")]),a("code",[t._v("新出口")]),a("span",[t._v("按键，会出现一行新的出口面板，从左到右是：序号、文本输入框、目标选择框、删除按键，基本一看就懂，要注意文本框只能输入一行文本，目标选择框可以选择该出口对应的下一个文本段；")])]),a("li",[a("span",[t._v("若要删除文本段，则点击右上角的三道杠按钮，然后会出现")]),a("code",[t._v("删除")]),a("span",[t._v("按钮，点击该按钮即可删除文本段，注意，")]),a("strong",[a("span",[t._v("这是不可逆的")])]),a("span",[t._v("！")])]),a("li",[a("span",[t._v("想要关闭该项目，仅需在标签栏中关闭该项目的标签即可。")])])]),a("p",[a("span",[t._v("另外，在编辑小节的文本的时候，")])]),a("ul",[a("li",[a("span",[t._v("按下")]),a("code",[t._v("ctrl + Enter")]),a("span",[t._v("，则是自动在该小节后插入一个新的小节，并聚焦到这个新的小节上；")])]),a("li",[a("span",[t._v("按下")]),a("code",[t._v("ctrl + BackSpace")]),a("span",[t._v("且该小节文本都是空的（或者由空字符组成），则该小节将被删除并聚焦到上一个小节（如果存在的话）；")])]),a("li",[a("span",[t._v("按下")]),a("code",[t._v("ctrl + ArrowUp")]),a("span",[t._v("，则聚焦到上一个小节（如果存在的话）；")])]),a("li",[a("span",[t._v("按下")]),a("code",[t._v("ctrl + ArrowDown")]),a("span",[t._v("，则聚焦到下一个小节（如果存在的话）。")])])]),a("h3",[a("a",{staticClass:"md-header-anchor",attrs:{name:"持久化"}}),a("span",[t._v("持久化")])]),a("p",[a("span",[t._v("编辑过程中有两个概念：工程与脚本：")])]),a("ul",[a("li",[a("strong",[a("span",[t._v("工程")])]),a("span",[t._v("：这是作者写作时候，用编辑器编辑的工程文件，并不能直接游玩；")])]),a("li",[a("strong",[a("span",[t._v("脚本")])]),a("span",[t._v("：当一个作者完成一个剧本之后，会将其编译为脚本，而后可以在播放器或者编辑器自带的测试面板中游玩。")])])]),a("p",[a("span",[t._v("之前的保存操作，其实是将内容缓存到了浏览器自带的一个叫做")]),a("code",[t._v("LocalStorage")]),a("span",[t._v("的地方，如果浏览器清理缓存，或者更换了新的计算机、新的浏览器、新的域名，那么该数据就找不到了。所以为了更好的持久化，还是要将工程下载到能看得到的地方。")])]),a("p",[a("span",[t._v("所以在菜单栏下点击")]),a("code",[t._v("文件")]),a("span",[t._v("下的")]),a("code",[t._v("下载工程")]),a("span",[t._v("或者")]),a("code",[t._v("下载脚本")]),a("span",[t._v("完成相应操作，要注意，")]),a("code",[t._v("下载脚本")]),a("span",[t._v("按键只有在有已经编译完成的脚本时候才可用。当你下一次想要在别的计算机或者浏览器载入工程的时候，只要有改文件即可载入。")])]),a("h3",[a("a",{staticClass:"md-header-anchor",attrs:{name:"编译"}}),a("span",[t._v("编译")])]),a("p",[a("span",[t._v("想要最终得到一个可以游玩的脚本，就需要这个叫做编译的过程。它将一个工程内的数据进行整理、编号、排序、简化、链接，最终得到一份可以游玩的游戏脚本文件。在菜单栏下点击")]),a("code",[t._v("工程")]),a("span",[t._v("下的")]),a("code",[t._v("编译为测试版")]),a("span",[t._v("完成相应操作。编译后的脚本将会缓存在内存中，如果不下载，那么在浏览器关闭，甚至该页面关闭之后，该脚本就会消失，但是这并不可怕，由于工程还在，所以只要重新编译即可。可以在在菜单栏下点击")]),a("code",[t._v("文件")]),a("span",[t._v("下的")]),a("code",[t._v("下载脚本")]),a("span",[t._v("以下载编译好的脚本。")])]),a("h2",[a("a",{staticClass:"md-header-anchor",attrs:{name:"最后"}}),a("span",[t._v("最后")])]),a("blockquote",[a("p",[a("span",[t._v("子未曰：“Hava a gada daya!”")])])])])])}],Tt={},Dt=Object(m["a"])(Tt,Rt,$t,!1,null,null,null),Bt=Dt.exports,Et=(a("4fad"),a("b64b"),a("3835")),At=a("53ca");a("2909");function Nt(t){return Array.isArray(t)?t.map(Nt):"object"===Object(At["a"])(t)&&null!==t?Object.entries(t).reduce((function(t,e){var a=Object(Et["a"])(e,2),n=a[0],s=a[1];return t[n]=Nt(s),t}),{}):t}var Ut={resource:"mdi-folder-outline",role:"mdi-account-outline",chunk:"mdi-text","base-info":"mdi-information-outline",doc:"mdi-document"},Pt=new Set(["base-info","resource","doc"]),Lt={name:"App",components:{ResourceManager:R,Role:K,Chunk:yt,BaseInfo:Vt,Doc:Bt},data:function(){return{tabIndex:null,tabs:[]}},computed:Object(r["a"])({},Object(o["c"])(["resources","roles","chunks","data","script"])),methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["updateData","cacheState","createRole","createChunk","downloadProject","downloadScript","compile","loadProjectFromFile","loadProjectFromCache"])),{},{createNewRole:function(){var t=this;this.createRole({cb:function(e){return t.open("role",e.id)}})},createNewChunk:function(){var t=this;this.createChunk({cb:function(e){return t.open("chunk",e.id)}})},getIcon:function(t){return Ut[t]||"mdi-help"},getComponent:function(t){switch(t){case"resource":return"ResourceManager";case"role":return"Role";case"chunk":return"Chunk";case"doc":return"Doc";default:return"BaseInfo"}},open:function(t,e){Pt.has(t)&&(e=t);var a=this.tabs.findIndex((function(t){return t.id===e}));if(a>=0)this.tabIndex=a;else{var n=null;if(Pt.has(t))switch(n={title:null,type:t,id:e,dirty:!1},t){case"base-info":n.title="基础信息";break;case"resource":n.title="资源管理器";break;case"doc":n.title="帮助文档";break}else{var s=Nt(this.data[e]);switch(n={title:null,type:t,id:e,content:s,dirty:!1},t){case"role":n.title=s.name;break;case"chunk":n.title=s.title;break}}this.tabs.push(n),this.tabIndex=this.tabs.length-1}},close:function(t){var e=this.tabs[t];e&&(e.dirty&&!confirm("".concat(e.title,"还未保存，确定关闭？"))||this.tabs.splice(t,1))},saveTab:function(t,e){if(t){var a=this.$refs.tabs[e];a&&a.save(),t.dirty=!1,this.cacheState()}},saveAllTabs:function(){var t=this;this.tabs.forEach((function(e,a){return t.saveTab(e,a)})),this.cacheState()},markDirty:function(t){t.dirty=!0}}),created:function(){var t=this;window.addEventListener("keydown",(function(e){"S"!==e.key&&"s"!==e.key||!e.ctrlKey||(e.preventDefault(),e.stopPropagation(),e.shiftKey?t.tabs.forEach((function(e,a){return t.saveTab(e,a)})):t.saveTab(t.tabs[t.tabIndex],t.tabIndex),t.$forceUpdate())})),this.open("base-info")}},Ft=Lt,Mt=(a("034f"),a("7496")),zt=a("40dc"),Jt=a("8860"),Kt=a("56b0"),Gt=a("da13"),Xt=a("8270"),qt=a("5d23"),Ht=a("f6c4"),Qt=a("e449"),Wt=a("f774"),Yt=a("71a3"),Zt=a("c671"),te=a("fe57"),ee=a("aac8"),ae=Object(m["a"])(Ft,s,i,!1,null,null,null),ne=ae.exports;_()(ae,{VApp:Mt["a"],VAppBar:zt["a"],VBtn:b["a"],VDivider:gt["a"],VIcon:k["a"],VImg:y["a"],VList:Jt["a"],VListGroup:Kt["a"],VListItem:Gt["a"],VListItemAvatar:Xt["a"],VListItemSubtitle:qt["b"],VListItemTitle:qt["c"],VMain:Ht["a"],VMenu:Qt["a"],VNavigationDrawer:Wt["a"],VTab:Yt["a"],VTabItem:Zt["a"],VTabs:te["a"],VTabsItems:ee["a"]});var se=a("f309");n["a"].use(se["a"]);var ie=new se["a"]({}),re=a("aeb1"),oe=a.n(re),ce="pl-editor-project";function le(t){console.log(t)}function ue(t){localStorage.setItem(ce,JSON.stringify(t))}function ve(t){var e={name:t.name,version:t.version,authors:t.authors,resources:t.resources,roles:t.roles,chunks:t.chunks,data:t.data};oe()(JSON.stringify(e),e.name+".egg.proj.json","application/json")}function de(t){var e=localStorage.getItem(ce);e&&Object.assign(t,JSON.parse(e))}function pe(t,e){var a=new FileReader;a.onload=function(){Object.assign(t,JSON.parse(a.result))},a.readAsText(e)}function fe(t){var e=t.script;e&&oe()(JSON.stringify(e),(e.name||"未命名")+".egg.json","application/json")}var me=a("ec26");function he(t,e,a,n){var s=Object(r["a"])({id:Object(me["a"])()},a);t.data[s.id]=s,t[e].push(s.id),n&&n(s)}function _e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.name,n=void 0===a?"未命名资源":a,s=e.src,i=void 0===s?null:s,r=e.type,o=void 0===r?"image/*":r,c=e.cb;he(t,"resources",{name:n,src:i,type:o},c)}function be(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.name,n=void 0===a?"未命名角色":a,s=e.avatar,i=void 0===s?null:s,r=e.pic,o=void 0===r?null:r,c=e.cb;he(t,"roles",{name:n,avatar:i,pic:o},c)}function ge(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.title,n=void 0===a?"未命名文本段":a,s=e.subtitle,i=void 0===s?"":s,r=e.background,o=void 0===r?null:r,c=e.sections,l=void 0===c?[{speaker:null,text:""}]:c,u=e.exits,v=void 0===u?[]:u,d=e.cb;he(t,"chunks",{title:n,subtitle:i,background:o,sections:l,exits:v},d)}function xe(t,e,a){delete t.data[a];var n=t[e],s=n.findIndex((function(t){return t===a}));s>=0&&n.splice(s,1)}function ke(t,e){xe(t,"resources",e)}function ye(t,e){xe(t,"roles",e)}function je(t,e){xe(t,"chunks",e)}function Oe(t,e){var a=t.data[e.id];a?Object.assign(a,e):t.data[e.id]=e}n["a"].use(o["a"]);var we=new o["a"].Store({state:{name:"未命名",version:"1.0.0",authors:[],data:{"res-1":{id:"res-1",src:null,name:"Unnamed"},"role-1":{id:"role-1",name:"内啥",avatar:null,pic:null},"chunk-1":{id:"chunk-1",title:"未命名章节",subtitle:"",background:null,sections:[],exits:[]}},resources:["res-1"],roles:["role-1"],chunks:["chunk-1"],script:null},mutations:{cacheState:ue,compile:le,downloadProject:ve,downloadScript:fe,loadProjectFromFile:pe,loadProjectFromCache:de,createResource:_e,createRole:be,createChunk:ge,removeResource:ke,removeRole:ye,removeChunk:je,updateData:Oe,updateBaseInfo:function(t,e){var a=e.name,n=e.version,s=e.authors;t.name=a||t.name,t.version=n||t.version,t.authors=s||t.authors}},actions:{}});n["a"].config.productionTip=!1,new n["a"]({vuetify:ie,store:we,render:function(t){return t(ne)}}).$mount("#app")},"616c":function(t,e,a){},"64f9":function(t,e,a){"use strict";var n=a("fe1f"),s=a.n(n);s.a},"6d83":function(t,e,a){},"73f3":function(t,e,a){"use strict";var n=a("6d83"),s=a.n(n);s.a},"85ec":function(t,e,a){},9461:function(t,e,a){},c2fb:function(t,e,a){},d2a1:function(t,e,a){"use strict";var n=a("616c"),s=a.n(n);s.a},d795:function(t,e,a){"use strict";var n=a("4ab4"),s=a.n(n);s.a},eaae:function(t,e,a){},f42b:function(t,e,a){"use strict";var n=a("c2fb"),s=a.n(n);s.a},fe1f:function(t,e,a){}});
//# sourceMappingURL=app.a831a94e.js.map