(function(e){function t(t){for(var i,s,a=t[0],l=t[1],c=t[2],d=0,f=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(f.length)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,a=1;a<n.length;a++){var l=n[a];0!==r[l]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},r={app:0},o=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/mind-node/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"025f":function(e,t,n){},"034f":function(e,t,n){"use strict";var i=n("85ec"),r=n.n(i);r.a},2790:function(e,t,n){},"452c":function(e,t,n){},4805:function(e,t,n){"use strict";var i=n("8ce0"),r=n.n(i);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("MindNodePool")],1)},o=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h1",[e._v(e._s(e.msg))]),e._m(0),n("h3",[e._v("Installed CLI Plugins")]),e._m(1),n("h3",[e._v("Essential Links")]),e._m(2),n("h3",[e._v("Ecosystem")]),e._m(3)])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v(" For a guide and recipes on how to configure / customize this project,"),n("br"),e._v(" check out the "),n("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(". ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[e._v("babel")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[e._v("eslint")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Core Docs")])]),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Forum")])]),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Community Chat")])]),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[e._v("Twitter")])]),n("li",[n("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("News")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-router")])]),n("li",[n("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vuex")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[e._v("vue-devtools")])]),n("li",[n("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-loader")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[e._v("awesome-vue")])])])}],l={name:"HelloWorld",props:{msg:String}},c=l,u=(n("4805"),n("2877")),d=Object(u["a"])(c,s,a,!1,null,"b9167eee",null),f=d.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"pool",staticClass:"mind-node-pool",on:{mousedown:function(t){return e.dragViewStart(t)},mousemove:function(t){return e.dragView(t)},mouseup:function(t){return e.dragViewEnd(t)}}},[n("canvas",{ref:"lineCanvas",staticClass:"line-canvas"}),n("div",{ref:"anchor",staticClass:"anchor"},[n("div",{staticClass:"mind-node-wrap"},e._l(e.nodes,(function(t){return n("MindNode",{key:t.uid,attrs:{node:t},on:{"create-line":e.appendLine,"move-node":e.drawLines,"delete-node":e.deleteNode,"remove-line":e.removeLineOfNode}})})),1)]),e.slOpened?n("SLView",{ref:"sl",attrs:{pool:e.pool},on:{"sl-close":e.closeSL,load:e.load}}):e._e(),e.slOpened?e._e():n("div",{staticClass:"open",on:{click:function(t){e.slOpened=!0}}},[n("p",[e._v("SL")])]),e.lineSelectOfNode>=0?n("LineSelect",{attrs:{tokens:e.lineSelectTokens},on:{"delete-line":e.deleteLine,"cancel-select":function(t){e.lineSelectOfNode=-1}}}):e._e()],1)},h=[],p=(n("a4d3"),n("e01a"),n("d28b"),n("99af"),n("7db0"),n("c740"),n("c975"),n("a434"),n("d3b7"),n("3ca3"),n("18a5"),n("ddb0"),n("2909")),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"node",staticClass:"mind-node",on:{mouseenter:function(t){e.dragging=!1},dragover:function(e){return e.preventDefault()},drop:function(t){return e.lineEnd(t)},mousemove:function(t){return e.dragNode(t)},mouseup:function(t){return e.dragNodeEnd(t)}}},[n("div",{staticClass:"top-bar"},[n("div",{staticClass:"move-handle",on:{mousedown:function(t){return e.dragNodeStart(t)}}},[e._v("移动")]),n("div",{staticClass:"line-handle",attrs:{draggable:"true"},on:{dragstart:function(t){return e.lineStart(t)}}},[e._v("链接")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.node.content,expression:"node.content"}],domProps:{value:e.node.content},on:{input:function(t){t.target.composing||e.$set(e.node,"content",t.target.value)}}}),n("div",{staticClass:"button-bar"},[n("button",{on:{click:e.removeLine}},[e._v("删除链接")]),n("button",{on:{click:e.deleteNode}},[e._v("删除节点")])])])},m=[],b=(n("a9e3"),{name:"MindNode",props:["node"],data:function(){return{dragging:!1,prevX:0,prevY:0}},methods:{dragNodeStart:function(e){0===e.button&&(this.dragging=!0,this.prevX=e.screenX,this.prevY=e.screenY)},dragNode:function(e){if(this.dragging){var t=e.screenX-this.prevX,n=e.screenY-this.prevY;this.prevX=e.screenX,this.prevY=e.screenY;var i=this.$refs.node;this.node.posX+=t,this.node.posY+=n;var r=i.style;r.left=this.node.posX-i.clientWidth/2+"px",r.top=this.node.posY-i.clientHeight/2+"px",e.preventDefault(),this.moveNode()}},dragNodeEnd:function(e){0===e.button&&(this.dragging=!1,this.prevX=0,this.prevY=0)},lineStart:function(e){e.dataTransfer.setData("text",String(this.node.uid)),e.dataTransfer.dropEffect="link"},lineEnd:function(e){var t=Number(e.dataTransfer.getData("text")),n=this.node.uid;e.preventDefault(),t!==n&&this.$emit("create-line",t,n)},moveNode:function(){this.$emit("move-node",this.node.uid)},deleteNode:function(){this.$emit("delete-node",this.node.uid)},removeLine:function(){this.$emit("remove-line",this.node.uid)}},mounted:function(){var e=this.$refs.node,t=e.style;t.left=this.node.posX-e.clientWidth/2+"px",t.top=this.node.posY-e.clientHeight/2+"px"}}),_=b,w=(n("75d3"),Object(u["a"])(_,g,m,!1,null,"58e8f471",null)),y=w.exports,L=100;function k(e){var t=e.content,n=void 0===t?"[waiting input]":t,i=e.posX,r=void 0===i?0:i,o=e.posY,s=void 0===o?0:o;return{uid:L++,content:n,posX:r,posY:s,inLines:[],outLines:[]}}function S(e,t){return{uid:L++,src:e,dst:t}}function O(e){L=e}function x(){return L}var N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sl-view"},[n("div",{staticClass:"sl-wrap"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],staticClass:"data",domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}}),e._v(" "),n("div",{staticClass:"button-bar"},[n("button",{on:{click:e.save}},[e._v("导出")]),n("button",{on:{click:e.close}},[e._v("关闭")]),n("button",{on:{click:e.load}},[e._v("载入")])])])])},X=[],Y={name:"SLView",props:["pool"],data:function(){return{data:""}},methods:{load:function(){var e=this.data,t=JSON.parse(e);null!==t&&t.nodes&&t.lines&&this.$emit("load",t)},save:function(){this.data=JSON.stringify(this.pool)},close:function(){this.$emit("sl-close")}}},j=Y,C=(n("af1b"),Object(u["a"])(j,N,X,!1,null,"2c39bc0e",null)),$=C.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"line-select"},[n("button",{on:{click:e.cancelSelect}},[e._v("取消")]),n("div",{staticClass:"line-select-wrap"},e._l(e.tokens,(function(t){return n("div",{key:t.lineUid,staticClass:"option"},[n("p",{staticClass:"hint"},[e._v(e._s(t.hint))]),n("button",{staticClass:"delete-button",on:{click:function(n){return e.select(t.lineUid)}}},[e._v("删除")])])})),0)])},P=[],T={name:"LineSelect",props:["tokens"],methods:{select:function(e){this.$emit("delete-line",e)},cancelSelect:function(){this.$emit("cancel-select")}}},M=T,V=(n("cf4f"),Object(u["a"])(M,E,P,!1,null,"25a1f077",null)),D=V.exports,H={name:"MindNodePool",components:{LineSelect:D,SLView:$,MindNode:y},data:function(){return{dragging:!1,anchorX:0,anchorY:0,prevX:0,prevY:0,nodes:[],lines:[],slOpened:!1,lineSelectOfNode:-1}},computed:{pool:function(){return{nodes:this.nodes,lines:this.lines,uidGenerator:x()}},lineSelectTokens:function(){var e=this,t=this.nodes.find((function(t){return t.uid===e.lineSelectOfNode})),n=t.outLines.reduce((function(t,n){var i=e.lines.find((function(e){return e.uid===n}));if(i){var r=e.nodes.find((function(e){return e.uid===i.dst}));r&&t.push({lineUid:n,hint:r.content})}return t}),[]);return n}},methods:{dragViewStart:function(e){1===e.button&&(this.dragging=!0,this.prevX=e.screenX,this.prevY=e.screenY)},dragView:function(e){if(this.dragging){var t=e.screenX-this.prevX,n=e.screenY-this.prevY;this.prevX=e.screenX,this.prevY=e.screenY;var i=this.$refs.anchor;this.anchorX+=t,this.anchorY+=n;var r=i.style;r.left=this.anchorX+"px",r.top=this.anchorY+"px",e.preventDefault(),this.drawLines()}},dragViewEnd:function(e){1===e.button?(this.dragging=!1,this.prevX=0,this.prevY=0):2==e.button&&(this.addNode(e),e.preventDefault())},drawLines:function(){var e=this,t=this.$refs.lineCanvas,n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),n.strokeStyle="black";var i=!0,r=!1,o=void 0;try{for(var s,a=function(){var t=s.value,i=e.nodes.find((function(e){return e.uid===t.src})),r=e.nodes.find((function(e){return e.uid===t.dst}));n.beginPath(),n.moveTo(e.anchorX+i.posX+80,e.anchorY+i.posY),n.lineTo(e.anchorX+r.posX-80,e.anchorY+r.posY),n.stroke()},l=this.lines[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)a()}catch(c){r=!0,o=c}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}},appendLine:function(e,t){var n=S(e,t);this.lines.push(n);var i=this.nodes.find((function(e){return e.uid===n.src})),r=this.nodes.find((function(e){return e.uid===n.dst}));i.outLines.push(n.uid),r.inLines.push(n.uid),this.drawLines()},addNode:function(e){var t=k({posX:e.offsetX-this.anchorX,posY:e.offsetY-this.anchorY});this.nodes.push(t)},deleteNode:function(e){var t=this.nodes.findIndex((function(t){return t.uid===e})),n=this.nodes[t],i=!0,r=!1,o=void 0;try{for(var s,a=n.inLines[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;this.deleteLine(l)}}catch(p){r=!0,o=p}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}var c=!0,u=!1,d=void 0;try{for(var f,v=n.outLines[Symbol.iterator]();!(c=(f=v.next()).done);c=!0){var h=f.value;this.deleteLine(h)}}catch(p){u=!0,d=p}finally{try{c||null==v.return||v.return()}finally{if(u)throw d}}this.nodes.splice(t,1),this.drawLines()},deleteLine:function(e){var t=this.lines.findIndex((function(t){return t.uid===e}));if(t>=0){var n=this.lines[t],i=this.nodes.find((function(e){return e.uid===n.src})),r=this.nodes.find((function(e){return e.uid===n.dst}));if(i){var o=i.outLines.indexOf(e);o>=0&&i.outLines.splice(o,1)}if(r){var s=r.inLines.indexOf(e);s>=0&&r.inLines.splice(s,1)}this.lines.splice(t,1)}this.drawLines()},load:function(e){var t,n;(t=this.nodes).splice.apply(t,[0,this.nodes.length].concat(Object(p["a"])(e.nodes))),(n=this.lines).splice.apply(n,[0,this.lines.length].concat(Object(p["a"])(e.lines))),O(e.uidGenerator),this.closeSL(),this.drawLines()},closeSL:function(){this.slOpened=!1},removeLineOfNode:function(e){this.lineSelectOfNode=e}},mounted:function(){var e=this.$refs.anchor;this.anchorX=e.offsetLeft,this.anchorY=e.offsetTop,this.$refs.lineCanvas.width=this.$refs.pool.clientWidth,this.$refs.lineCanvas.height=this.$refs.pool.clientHeight}},W=H,I=(n("c8ee"),Object(u["a"])(W,v,h,!1,null,"3ae0b75f",null)),J=I.exports,U={name:"app",components:{MindNodePool:J,HelloWorld:f}},F=U,G=(n("034f"),n("b0a0"),Object(u["a"])(F,r,o,!1,null,null,null)),z=G.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(z)}}).$mount("#app")},"75d3":function(e,t,n){"use strict";var i=n("2790"),r=n.n(i);r.a},"85ec":function(e,t,n){},8931:function(e,t,n){},"8ce0":function(e,t,n){},af1b:function(e,t,n){"use strict";var i=n("8931"),r=n.n(i);r.a},b0a0:function(e,t,n){"use strict";var i=n("452c"),r=n.n(i);r.a},c8ee:function(e,t,n){"use strict";var i=n("025f"),r=n.n(i);r.a},cf4f:function(e,t,n){"use strict";var i=n("d17c"),r=n.n(i);r.a},d17c:function(e,t,n){}});
//# sourceMappingURL=app.8bb2817a.js.map