{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/ResourceManager.vue?b8f3","webpack:///./src/App.vue?0f16","webpack:///./src/components/Section.vue?b8c3","webpack:///./src/components/Resource.vue?978f","webpack:///./src/views/InjectPage.vue?e483","webpack:///./src/App.vue?b67a","webpack:///./src/utils/storage.js","webpack:///./src/state.js","webpack:///./src/utils/actions.js","webpack:///src/App.vue","webpack:///./src/App.vue?3359","webpack:///./src/App.vue?2667","webpack:///./src/views/Home.vue?1edc","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?f458","webpack:///./src/views/Home.vue?1dce","webpack:///./src/views/ResourceManager.vue?0b4a","webpack:///./src/components/Resource.vue?3ad2","webpack:///src/components/Resource.vue","webpack:///./src/components/Resource.vue?89c7","webpack:///./src/components/Resource.vue?b71d","webpack:///src/views/ResourceManager.vue","webpack:///./src/views/ResourceManager.vue?ddd2","webpack:///./src/views/ResourceManager.vue?624a","webpack:///./src/views/RoleManager.vue?f468","webpack:///./src/components/RAvatar.vue?7eb7","webpack:///src/components/RAvatar.vue","webpack:///./src/components/RAvatar.vue?dbfc","webpack:///./src/components/RAvatar.vue","webpack:///src/views/RoleManager.vue","webpack:///./src/views/RoleManager.vue?4560","webpack:///./src/views/RoleManager.vue","webpack:///./src/views/ChunkManager.vue?5444","webpack:///./src/components/Chunk.vue?5ee2","webpack:///./src/components/Section.vue?d182","webpack:///src/components/Section.vue","webpack:///./src/components/Section.vue?0855","webpack:///./src/components/Section.vue","webpack:///src/components/Chunk.vue","webpack:///./src/components/Chunk.vue?0f20","webpack:///./src/components/Chunk.vue","webpack:///src/views/ChunkManager.vue","webpack:///./src/views/ChunkManager.vue?8eba","webpack:///./src/views/ChunkManager.vue?f9f6","webpack:///./src/views/InjectPage.vue?9320","webpack:///./src/components/RoleSelector.vue?584c","webpack:///src/components/RoleSelector.vue","webpack:///./src/components/RoleSelector.vue?1ef8","webpack:///./src/components/RoleSelector.vue","webpack:///src/views/InjectPage.vue","webpack:///./src/views/InjectPage.vue?f4b2","webpack:///./src/views/InjectPage.vue?99ee","webpack:///./src/views/Demonstration.vue?dcf2","webpack:///src/views/Demonstration.vue","webpack:///./src/views/Demonstration.vue?bb6f","webpack:///./src/views/Demonstration.vue?cbd2","webpack:///./src/router/index.js","webpack:///./src/plugins/vuetify.js","webpack:///./src/main.js","webpack:///./src/views/Demonstration.vue?b0db","webpack:///./src/views/ChunkManager.vue?d0ab","webpack:///./src/views/RoleManager.vue?86cb","webpack:///./src/views/Home.vue?9749","webpack:///./src/components/Chunk.vue?bb14","webpack:///./src/components/RoleSelector.vue?15be"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","on","handleKeyUp","staticClass","staticStyle","model","callback","$$v","currentPageIndex","expression","_l","link","to","_v","_s","text","messages","staticRenderFns","LS_KEY","cacheProject","project","JSON","stringify","localStorage","setItem","loadCachedProject","parse","getItem","prepareProject","info","version","authors","chunks","roles","resources","addData","newData","uid","uuidv4","state","script","chunkEditorBar","selectState","Set","primaryRoleUid","secondaryRoleUid","fillMode","clickMode","selectRange","fromIndex","toIndex","add","saveProject","doDoanload","fileName","download","compile","mapping","map","src","forEach","index","role","avatar","pic","instructions","chunk","background","bgm","sections","speaker","exits","e","target","ins","downloadScript","loadProject","event","reader","FileReader","onload","fillProject","readAsText","files","proj","assign","methods","preventDefault","stopPropagation","shiftKey","component","VApp","VAppBar","VCard","VIcon","VMain","VTab","VTabs","$set","_m","VAppBarNavIcon","VBtn","VCombobox","VTextField","$event","overlay","handleDrop","inputFiles","res","errors","directives","rawName","ref","domProps","composing","handleNameChange","deleteSelf","replaceRes","props","String","URL","createObjectURL","$forceUpdate","VCardActions","VCardTitle","VImg","VInput","components","Resouece","readAsDataURL","file","console","log","VCardSubtitle","VContainer","VOverlay","roleIndex","roleUid","getAvatarUrl","addRole","resList","avatarUrl","picUrl","deleteRole","_e","size","emptyIcon","VAvatar","RAvatar","watch","computed","VAutocomplete","VList","VListItem","VListItemGroup","VNavigationDrawer","VSpacer","chunkIndex","chunkTitle","title","addChunk","toPrevPage","toNextPage","backgroundUrl","showInfo","exit","chunkList","deleteExit","addExit","scopedSlots","_u","fn","item","addLine","deleteLine","focusOnSection","class","selected","showBtnBar","ctrlKey","altKey","metaKey","handleClick","roleList","changingSpeaker","section","speakerPicUrl","speakerName","handleInputKey","$emit","isOnly","VBtnToggle","VExpandXTransition","VSelect","VCol","VDivider","VRow","VSlideYTransition","VToolbar","VToolbarTitle","VVirtualScroll","Chunk","chunkTitleList","hasPrevPage","hasNextPage","subtitle","newChunk","chunkUid","inject","hasMessage","message","changingRole","handleInput","rolePicUrl","roleName","RoleSelector","VChip","VSnackbar","VSwitch","VTextarea","speakerPic","option","handleClickOption","options","handleClickDefaultOption","modifiers","pointer","_n","forceRun","Vue","use","VueRouter","routes","path","Home","ResourceManager","RoleManager","ChunkManager","InjectPage","Demonstration","router","Vuetify","config","productionTip","vuetify","render","h","App","$mount"],"mappings":"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","file":"js/app.2e8b165c.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/pl-editor/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceManager.vue?vue&type=style&index=0&id=e9297880&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceManager.vue?vue&type=style&index=0&id=e9297880&scoped=true&lang=css&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Section.vue?vue&type=style&index=0&id=9dd3d4b6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Section.vue?vue&type=style&index=0&id=9dd3d4b6&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Resource.vue?vue&type=style&index=0&id=5b18b583&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Resource.vue?vue&type=style&index=0&id=5b18b583&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InjectPage.vue?vue&type=style&index=0&id=65e8a157&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InjectPage.vue?vue&type=style&index=0&id=65e8a157&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"app\"},on:{\"keyup\":_vm.handleKeyUp}},[_c('v-app-bar',{attrs:{\"app\":\"\",\"color\":\"primary\"}},[_c('v-tabs',{staticClass:\"flex-grow-0 flex-shrink-1 width-fit\",staticStyle:{\"width\":\"fit-content\"},attrs:{\"color\":\"white\"},model:{value:(_vm.currentPageIndex),callback:function ($$v) {_vm.currentPageIndex=$$v},expression:\"currentPageIndex\"}},_vm._l((_vm.links),function(link){return _c('v-tab',{key:link.to,staticClass:\"white--text\",attrs:{\"to\":link.to}},[_vm._v(_vm._s(link.text))])}),1),_c('v-card',{staticClass:\"flex-grow-1 pa-2 ma-2\",attrs:{\"flat\":\"\"}},[_c('v-icon',{staticClass:\"mr-2\"},[_vm._v(\"mdi-information-outline\")]),_c('span',{staticClass:\"grey--text\"},[_vm._v(_vm._s(_vm.messages[_vm.messages.length - 1]))])],1)],1),_c('v-main',{staticClass:\"fill-y\"},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\nconst LS_KEY = \"river-galgame-project\";\r\n\r\nfunction cacheProject(project) {\r\n    if (project) {\r\n        const data = JSON.stringify(project);\r\n        localStorage.setItem(LS_KEY, data);\r\n        return data;\r\n    }\r\n}\r\n\r\nfunction loadCachedProject() {\r\n    return JSON.parse(localStorage.getItem(LS_KEY));\r\n}\r\n\r\n\r\nexport {\r\n    LS_KEY,\r\n    cacheProject,\r\n    loadCachedProject,\r\n}","import { v4 as uuidv4 } from 'uuid'\r\nimport { loadCachedProject } from '@/utils/storage.js'\r\n\r\nfunction prepareProject(project) {\r\n    if (!project) {\r\n        project = {\r\n            info: {\r\n                name: '未命名剧本',\r\n                version: '1.0.0',\r\n                authors: ['RiverElder'],\r\n            },\r\n        \r\n            data: {},\r\n            \r\n            chunks: [],\r\n            roles: [],\r\n            resources: [],\r\n        \r\n            addData(newData) {\r\n                const uid = uuidv4();\r\n                this.data[uid] = newData;\r\n                return uid;\r\n            }\r\n        };\r\n    }\r\n    project.addData = function addData(newData) {\r\n        const uid = uuidv4();\r\n        this.data[uid] = newData;\r\n        return uid;\r\n    };\r\n    return project;\r\n}\r\n\r\nconst state = {\r\n\r\n    project: prepareProject(loadCachedProject()),\r\n\r\n    script: null,\r\n\r\n    chunkEditorBar: {\r\n        selectState: new Set(),\r\n        primaryRoleUid: null,\r\n        secondaryRoleUid: null,\r\n        fillMode: 'all', // or 'alternate'\r\n        clickMode: 'fill', // or select\r\n\r\n        selectRange(fromIndex, toIndex) {\r\n            for(let i = fromIndex; i <= toIndex; i++) {\r\n                this.selectState.add(i);\r\n            }\r\n        },\r\n    },\r\n\r\n    messages: [\"打开新世界的大门\"],\r\n};\r\n\r\nexport default state;","\r\n\r\nimport state from '@/state.js'\r\nimport download from \"downloadjs\";\r\nimport { cacheProject } from \"@/utils/storage.js\";\r\n\r\nconst project = state.project;\r\n\r\nfunction saveProject(doDoanload = false) {\r\n    const data = cacheProject(project);\r\n    state.messages.push(\"已缓存工程\");\r\n    if (doDoanload) {\r\n        if (data) {\r\n            const fileName = state.project.info.name + '.proj.json';\r\n            state.messages.push(\"开始下载工程文件：\" + fileName);\r\n            download(data, fileName, 'application/json');\r\n        } else {\r\n            state.messages.push(\"未下载工程文件\");\r\n        }\r\n    }\r\n}\r\n\r\nfunction compile() {\r\n    const mapping = {};\r\n\r\n    const resources = project.resources.map(uid => project.data[uid].src);\r\n    project.resources.forEach((uid, index) => mapping[uid] = index);\r\n\r\n    const roles = project.roles.map(uid => {\r\n        const role = project.data[uid]\r\n        return {\r\n            name: role.name,\r\n            avatar: mapping[role.avatar],\r\n            pic: mapping[role.pic],\r\n        };\r\n    });\r\n    project.roles.forEach((uid, index) => mapping[uid] = index);\r\n\r\n\r\n    const instructions = [];\r\n    project.chunks.map(uid => {\r\n        const chunk = project.data[uid];\r\n        mapping[uid] = instructions.length;\r\n        instructions.push(\r\n            ['bg', mapping[chunk.background]],\r\n            ['bgm', mapping[chunk.bgm]],\r\n            ...chunk.sections.map(s => ['line', s.text, mapping[s.speaker]]),\r\n            ...chunk.exits.map(e => ['exit', e.text, mapping[e.target]]),\r\n        );\r\n    });\r\n\r\n    instructions.forEach(ins => {\r\n        if (ins[0] === 'exit') {\r\n            ins[2] = mapping[ins[2]];\r\n        }\r\n    });\r\n\r\n    const data = {\r\n        info: project.info,\r\n        instructions,\r\n        resources,\r\n        roles,\r\n    };\r\n\r\n    state.script = data;\r\n    state.messages.push(\"编译完成，可以演示或者下载脚本\");\r\n}\r\n\r\nfunction downloadScript() {\r\n    if (state.script) {\r\n        const fileName = state.script.info.name + '.json'\r\n        state.messages.push(\"开始下载：\" + fileName);\r\n        download(JSON.stringify(state.script), fileName, 'application/json');\r\n    } else {\r\n        state.messages.push(\"无可用的编译后脚本\");\r\n    }\r\n}\r\n\r\nfunction loadProject(event) {\r\n    const reader = new FileReader();\r\n    reader.onload = () => fillProject(JSON.parse(reader.result));\r\n    reader.readAsText(event.target.files[0]);\r\n}\r\n\r\nfunction fillProject(proj) {\r\n    if (proj) {\r\n        Object.assign(project, proj);\r\n    }\r\n}\r\n\r\nexport {\r\n    saveProject,\r\n    compile,\r\n    downloadScript,\r\n    loadProject,\r\n    fillProject,\r\n}","<template>\n  <v-app id=\"app\" @keyup=\"handleKeyUp\">\n    <v-app-bar \n      app \n      color=\"primary\"\n    >\n      <v-tabs \n        class=\"flex-grow-0 flex-shrink-1 width-fit\"\n        style=\"width: fit-content\"\n        v-model=\"currentPageIndex\" \n        color=\"white\"\n      >\n        <v-tab \n          v-for=\"link of links\"\n          :key=\"link.to\"\n          :to=\"link.to\"\n          class=\"white--text\"\n        >{{ link.text }}</v-tab>\n      </v-tabs>\n\n      <v-card \n        class=\"flex-grow-1 pa-2 ma-2\"\n        flat\n      >\n        <v-icon class=\"mr-2\">mdi-information-outline</v-icon>\n        <span class=\"grey--text\">{{ messages[messages.length - 1] }}</span>\n      </v-card>\n    </v-app-bar>\n\n    <v-main class=\"fill-y\">\n      <router-view/>\n    </v-main>\n  </v-app>\n</template>\n\n<script>\nimport state from '@/state.js';\nimport { saveProject } from '@/utils/actions.js';\n\nexport default {\n  name: 'App',\n\n  data: () => ({\n    links: [\n      {to: '/', text: '主页'},\n      {to: '/resource-manager', text: '资源'},\n      {to: '/role-manager', text: '角色'},\n      {to: '/chunk-manager', text: '台词'},\n      {to: '/inject-page', text: '注入'},\n      {to: '/demonstration', text: '演示'},\n    ],\n\n    currentPageIndex: 0,\n\n    messages: state.messages,\n  }),\n\n  methods: {\n    handleKeyUp(event) {\n      if(event.key === 's' && event.ctrlKey) {\n        event.preventDefault();\n        event.stopPropagation();\n        saveProject(event.shiftKey);\n      }\n    },\n  },\n\n};\n</script>\n\n<style>\n  html, body, #app {\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n  }\n\n  .width-fit {\n    width: fit-content;\n  }\n\n  .fill-y {\n    height: 100%;\n  }\n\n  input[type=text] {\n    padding: 5px;\n  }\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=35a4d2ef&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VMain } from 'vuetify/lib/components/VMain';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\ninstallComponents(component, {VApp,VAppBar,VCard,VIcon,VMain,VTab,VTabs})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home d-flex flex-column justify-space-around align-center\"},[_c('v-card',{staticClass:\"script-info pa-5\"},[_c('v-text-field',{attrs:{\"label\":\"剧本名：\"},model:{value:(_vm.info.name),callback:function ($$v) {_vm.$set(_vm.info, \"name\", $$v)},expression:\"info.name\"}}),_c('v-text-field',{attrs:{\"label\":\"版本：\"},model:{value:(_vm.info.version),callback:function ($$v) {_vm.$set(_vm.info, \"version\", $$v)},expression:\"info.version\"}}),_c('v-combobox',{attrs:{\"label\":\"创作者：\",\"chips\":\"\",\"multiple\":\"\",\"clearable\":\"\",\"deletable-chips\":\"\",\"disable-lookup\":\"\"},model:{value:(_vm.info.authors),callback:function ($$v) {_vm.$set(_vm.info, \"authors\", $$v)},expression:\"info.authors\"}})],1),_c('div',[_c('v-btn',{on:{\"click\":_vm.saveProject}},[_c('v-icon',[_vm._v(\"mdi-download\")]),_vm._v(\"保存项目 \")],1),_c('v-btn',{on:{\"click\":_vm.compile}},[_c('v-icon',[_vm._v(\"mdi-arrow-right\")]),_vm._v(\"编译 \")],1),_c('v-btn',{on:{\"click\":_vm.compile}},[_c('v-icon',[_vm._v(\"mdi-download\")]),_vm._v(\"下载脚本 \")],1),_c('v-btn',[_c('v-icon',[_vm._v(\"mdi-upload\")]),_c('span',[_vm._v(\"导入项目\")]),_c('input',{staticClass:\"fill\",attrs:{\"type\":\"file\"},on:{\"input\":_vm.loadProject}})],1)],1),_c('article',[_c('h1',[_vm._v(\"江奶奶的Galgame编辑器\")]),_c('h2',[_vm._v(\"食用方法\")]),_c('h3',[_vm._v(\"开始项目\")]),_c('ol',[_c('li',[_vm._v(\"首先在顶部导航栏点击“资源”，上传所需的各种资源（主要是图片），其它资源暂时不支持预览。\")]),_c('li',[_vm._v(\"然后再顶部导航栏点击“角色”，在左侧列表中点击“+新角色”按键，然后填充名字、头像、立绘。其中头像只是方便后续文本编辑，并不会对编译后的脚本呢产生影响。\")]),_c('li',[_vm._v(\"然后在顶部导航栏点击“台词”，在左侧列表中点击“+新文本段”按键，点击右边面板左上角的三条横杠（\"),_c('v-app-bar-nav-icon'),_vm._v(\"）按钮，填充该文本段所需的信息，而后即可收起信息面板，编辑台词\")],1),_vm._m(0),_c('li',[_vm._v(\"点击“编译”生成脚本，而后可以选择“下载脚本”或者到“演示面板”开始测试。\")])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',[_vm._v(\"回到“主页”，点击“保存项目”\"),_c('del',[_vm._v(\"（或者在任何页面按下 \"),_c('em',[_vm._v(\"ctrl\")]),_vm._v(\" + \"),_c('em',[_vm._v(\"S\")]),_vm._v(\"缓存，或者\"),_c('em',[_vm._v(\"ctrl\")]),_vm._v(\" + \"),_c('em',[_vm._v(\"shift\")]),_vm._v(\" + \"),_c('em',[_vm._v(\"S\")]),_vm._v(\"下载）\")]),_vm._v(\"。\")])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"home d-flex flex-column justify-space-around align-center\">\n    <v-card class=\"script-info pa-5\">\n      <v-text-field \n        label=\"剧本名：\"\n        v-model=\"info.name\"\n      />\n\n      <v-text-field \n        label=\"版本：\"\n        v-model=\"info.version\" \n      />\n\n      <v-combobox\n        label=\"创作者：\"\n        chips\n        multiple\n        clearable\n        deletable-chips\n        disable-lookup\n        v-model=\"info.authors\"\n      />\n    </v-card>\n\n    <div>\n      <v-btn @click=\"saveProject\">\n        <v-icon>mdi-download</v-icon>保存项目\n      </v-btn>\n\n      <v-btn @click=\"compile\">\n        <v-icon>mdi-arrow-right</v-icon>编译\n      </v-btn>\n\n      <v-btn @click=\"compile\">\n        <v-icon>mdi-download</v-icon>下载脚本\n      </v-btn>\n\n      <v-btn>\n        <v-icon>mdi-upload</v-icon>\n\n        <span>导入项目</span>\n\n        <input class=\"fill\" type=\"file\" @input=\"loadProject\" />\n      </v-btn>\n    </div>\n\n    <article>\n      <h1>江奶奶的Galgame编辑器</h1>\n\n      <h2>食用方法</h2>\n      \n      <h3>开始项目</h3>\n\n      <ol>\n        <li>首先在顶部导航栏点击“资源”，上传所需的各种资源（主要是图片），其它资源暂时不支持预览。</li>\n\n        <li>然后再顶部导航栏点击“角色”，在左侧列表中点击“+新角色”按键，然后填充名字、头像、立绘。其中头像只是方便后续文本编辑，并不会对编译后的脚本呢产生影响。</li>\n\n        <li>然后在顶部导航栏点击“台词”，在左侧列表中点击“+新文本段”按键，点击右边面板左上角的三条横杠（<v-app-bar-nav-icon/>）按钮，填充该文本段所需的信息，而后即可收起信息面板，编辑台词</li>\n\n        <li>回到“主页”，点击“保存项目”<del>（或者在任何页面按下 <em>ctrl</em> + <em>S</em>缓存，或者<em>ctrl</em> + <em>shift</em> + <em>S</em>下载）</del>。</li>\n\n        <li>点击“编译”生成脚本，而后可以选择“下载脚本”或者到“演示面板”开始测试。</li>\n      </ol>\n    </article>\n  </div>\n</template>\n\n<script>\nimport state from '@/state.js'\n\nimport {\n  saveProject,\n  compile,\n  downloadScript,\n  loadProject,\n  fillProject,\n} from \"@/utils/actions.js\";\n\nexport default {\n  name: \"Home\",\n\n  data: () => state.project,\n\n  methods: {\n    saveProject,\n    compile,\n    downloadScript,\n    loadProject,\n    fillProject,\n  },\n}\n</script>\n\n<style scoped>\n.home {\n  height: 100%;\n  overflow: auto;\n}\n\n.script-info {\n  width: 80%;\n}\n\n.fill {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  opacity: 0;\n  cursor: pointer;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=645b45e4&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=645b45e4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"645b45e4\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAppBarNavIcon } from 'vuetify/lib/components/VAppBar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCombobox } from 'vuetify/lib/components/VCombobox';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VAppBarNavIcon,VBtn,VCard,VCombobox,VIcon,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"resource-manager d-flex flex-wrap\",on:{\"dragover\":function($event){_vm.overlay = true},\"dragend\":function($event){_vm.overlay = false},\"drop\":_vm.handleDrop}},[_vm._l((_vm.resources),function(uid){return _c('Resouece',{key:uid,staticClass:\"resource ma-3\",attrs:{\"uid\":uid,\"res\":_vm.data[uid]}})}),_c('v-card',{staticClass:\"resource ma-3 d-flex flex-column\"},[_c('div',{staticClass:\"input-wrapper flex-grow-1 flex-shrink-1 d-flex justify-center align-center\"},[_c('v-icon',{attrs:{\"x-large\":\"\"}},[_vm._v(\"mdi-file-multiple\")]),_c('input',{attrs:{\"type\":\"file\",\"multiple\":\"\"},on:{\"change\":_vm.inputFiles}})],1),_c('v-card-subtitle',[_vm._v(\"拖拽或点击输入文件\")])],1),_c('v-overlay',{staticClass:\"fill ma-auto\",attrs:{\"value\":false,\"absolute\":\"\"}},[_c('div',{staticClass:\"overlay input-wrapper d-flex flex-column justify-center align-center\"},[_c('v-icon',{attrs:{\"size\":\"100\"}},[_vm._v(\"mdi-file-multiple\")]),_c('p',{staticClass:\"mt-10\"},[_vm._v(\"松开鼠标以输入文件\")]),_c('input',{attrs:{\"type\":\"file\",\"multiple\":\"\"},on:{\"change\":_vm.inputFiles}})],1)])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"d-flex flex-column\"},[_c('v-img',{staticClass:\"flex-shrink-1\",attrs:{\"src\":_vm.res.src,\"contain\":\"\"}}),_c('v-card-title',{staticClass:\"name\"},[_c('v-input',{attrs:{\"hide-details\":\"auto\",\"error-messages\":_vm.errors}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.res.name),expression:\"res.name\"}],ref:\"nameInput\",domProps:{\"value\":(_vm.res.name)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.res, \"name\", $event.target.value)},_vm.handleNameChange]}})])],1),_c('v-card-actions',[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.deleteSelf}},[_c('v-icon',[_vm._v(\"mdi-delete\")])],1),_c('v-btn',{attrs:{\"icon\":\"\"}},[_c('v-icon',[_vm._v(\"mdi-share\")]),_c('input',{ref:\"btnReplace\",staticClass:\"fill\",attrs:{\"type\":\"file\"},on:{\"input\":_vm.replaceRes}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-card class=\"d-flex flex-column\">\r\n      <v-img\r\n        class=\"flex-shrink-1\"\r\n        :src=\"res.src\"\r\n        contain\r\n      />\r\n\r\n      <v-card-title class=\"name\">\r\n        <v-input\r\n          hide-details=\"auto\"\r\n          :error-messages=\"errors\"\r\n        >\r\n          <input \r\n            ref=\"nameInput\"\r\n            v-model=\"res.name\"\r\n            @input=\"handleNameChange\"\r\n          />\r\n        </v-input>\r\n      </v-card-title>\r\n\r\n      <v-card-actions>\r\n        <v-btn \r\n          icon\r\n          @click=\"deleteSelf\"\r\n        ><v-icon>mdi-delete</v-icon></v-btn>\r\n\r\n        <v-btn \r\n          icon\r\n        >\r\n          <v-icon>mdi-share</v-icon>\r\n          <input \r\n            ref=\"btnReplace\"\r\n            class=\"fill\"\r\n            type=\"file\"\r\n            @input=\"replaceRes\"\r\n          />\r\n        </v-btn>\r\n      </v-card-actions>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport state from '@/state.js'\r\n\r\nconst project = state.project;\r\n\r\nexport default {\r\n  name: 'Resource',\r\n\r\n  props: {\r\n    uid: String,\r\n    res: Object,\r\n  },\r\n\r\n  data: () => ({\r\n    data: project.data,\r\n    resources: project.resources,\r\n    errors: null,\r\n  }),\r\n\r\n  methods: {\r\n    handleNameChange(event) {\r\n      if (event.target.value.length === 0) {\r\n        this.errors = '名字不可为空';\r\n      } else {\r\n        this.errors = null;\r\n      }\r\n    },\r\n\r\n    deleteSelf() {\r\n      const index = project.resources.indexOf(this.uid);\r\n      project.resources.splice(index, 1);\r\n      delete project.data[this.uid];\r\n    },\r\n\r\n    replaceRes(event) {\r\n      this.res.src = URL.createObjectURL(event.target.files[0]) || this.res.src;\r\n      this.$forceUpdate();\r\n    },\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.name > * {\r\n  width: 100%;\r\n}\r\n\r\n.fill {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Resource.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Resource.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Resource.vue?vue&type=template&id=5b18b583&scoped=true&\"\nimport script from \"./Resource.vue?vue&type=script&lang=js&\"\nexport * from \"./Resource.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Resource.vue?vue&type=style&index=0&id=5b18b583&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b18b583\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VInput } from 'vuetify/lib/components/VInput';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardTitle,VIcon,VImg,VInput})\n","<template>\r\n  <v-container \r\n    class=\"resource-manager d-flex flex-wrap\"\r\n    @dragover=\"overlay = true\"\r\n    @dragend=\"overlay = false\"\r\n    @drop=\"handleDrop\"\r\n  >\r\n      <Resouece \r\n        class=\"resource ma-3\"\r\n        v-for=\"uid of resources\"\r\n        :key=\"uid\"\r\n        :uid=\"uid\"\r\n        :res=\"data[uid]\"\r\n      />\r\n      <v-card class=\"resource ma-3 d-flex flex-column\">\r\n        <div class=\"input-wrapper flex-grow-1 flex-shrink-1 d-flex justify-center align-center\">\r\n          <v-icon x-large>mdi-file-multiple</v-icon>\r\n          <input \r\n            type=\"file\"\r\n            multiple \r\n            @change=\"inputFiles\"\r\n          />\r\n        </div>\r\n        <v-card-subtitle>拖拽或点击输入文件</v-card-subtitle>\r\n      </v-card>\r\n\r\n      <v-overlay\r\n        :value=\"false\"\r\n        class=\"fill ma-auto\"\r\n        absolute\r\n      >\r\n        <div class=\"overlay input-wrapper d-flex flex-column justify-center align-center\">\r\n          <v-icon size=\"100\">mdi-file-multiple</v-icon>\r\n\r\n          <p class=\"mt-10\">松开鼠标以输入文件</p>\r\n\r\n          <input \r\n            type=\"file\"\r\n            multiple \r\n            @change=\"inputFiles\"\r\n          />\r\n        </div>\r\n      </v-overlay>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport Resouece from '@/components/Resource.vue'\r\n\r\nimport state from '@/state.js'\r\n\r\nconst project = state.project;\r\n\r\nexport default {\r\n  name: 'ResourceManager',\r\n\r\n  components: {\r\n    Resouece\r\n  },\r\n\r\n  data: () => ({\r\n    resources: project.resources,\r\n    data: project.data,\r\n    overlay: false,\r\n  }),\r\n\r\n  methods: {\r\n    inputFiles(event) {\r\n      event.target.files.forEach(file => {\r\n        const dotIndex = file.name.lastIndexOf('.');\r\n        const name = dotIndex >= 0 ? file.name.slice(0, dotIndex) : file.name;\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n          project.resources.push(project.addData({\r\n            name,\r\n            src: reader.result\r\n          }));\r\n        }\r\n        reader.readAsDataURL(file);\r\n      });\r\n    },\r\n\r\n    handleDrop(event) {\r\n      console.log('ecent', event);\r\n      this.overlay = false;\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.resource-manager > * {\r\n  width: 10rem;\r\n  height: 16em;\r\n}\r\n\r\n.input-wrapper {\r\n  position: relative;\r\n}\r\n\r\n.input-wrapper > input[type=file] {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  opacity: 0;\r\n  user-select: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.fill {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.overlay {\r\n  width: 90vw;\r\n  height: 80vh;\r\n  border: #FFFFFF dashed .1em;\r\n  border-radius: 1em;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceManager.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResourceManager.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ResourceManager.vue?vue&type=template&id=e9297880&scoped=true&\"\nimport script from \"./ResourceManager.vue?vue&type=script&lang=js&\"\nexport * from \"./ResourceManager.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ResourceManager.vue?vue&type=style&index=0&id=e9297880&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e9297880\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardSubtitle } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\ninstallComponents(component, {VCard,VCardSubtitle,VContainer,VIcon,VOverlay})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fill d-flex\"},[_c('v-navigation-drawer',{staticClass:\"role-list\",attrs:{\"permanent\":\"\"}},[_c('v-list',[_c('v-list-item-group',{model:{value:(_vm.roleIndex),callback:function ($$v) {_vm.roleIndex=$$v},expression:\"roleIndex\"}},_vm._l((_vm.roles),function(roleUid){return _c('v-list-item',{key:roleUid},[_c('RAvatar',{staticClass:\"mr-5\",attrs:{\"src\":_vm.getAvatarUrl(roleUid),\"size\":\"2em\"}}),_vm._v(\" \"+_vm._s(_vm.data[roleUid].name)+\" \")],1)}),1)],1),_c('div',{staticClass:\"mx-5\"},[_c('v-btn',{attrs:{\"block\":\"\"},on:{\"click\":_vm.addRole}},[_c('v-icon',[_vm._v(\"mdi-plus\")]),_vm._v(\" 新角色 \")],1)],1)],1),(_vm.role)?_c('div',{staticClass:\"role ma-5 d-flex flex-column align-center\"},[_c('div',{staticClass:\"input d-flex align-start\"},[_c('label',{staticClass:\"mr-2\"},[_vm._v(\"名字:\")]),_c('v-input',{staticClass:\"input flex-grow-0\",attrs:{\"messages\":\"必填，最好不要超过三个中文\",\"placeholder\":\"角色的名字\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.role.name),expression:\"role.name\"}],ref:\"nameInput\",attrs:{\"autofocus\":\"\"},domProps:{\"value\":(_vm.role.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.role, \"name\", $event.target.value)}}})]),_c('v-spacer'),_c('label',{staticClass:\"mr-2\"},[_vm._v(\"头像:\")]),_c('div',{staticClass:\"input flex-grow-0\"},[_c('v-autocomplete',{staticClass:\"ma-0\",attrs:{\"dense\":\"\",\"messages\":\"无实际用途，仅方便编辑\",\"placeholder\":\"角色的头像\",\"no-data-text\":\"无可用资源\",\"items\":_vm.resList,\"item-text\":\"name\",\"item-value\":\"uid\"},model:{value:(_vm.role.avatar),callback:function ($$v) {_vm.$set(_vm.role, \"avatar\", $$v)},expression:\"role.avatar\"}})],1),_c('RAvatar',{staticClass:\"ml-3\",attrs:{\"src\":_vm.avatarUrl,\"size\":\"3em\"}})],1),_c('v-input',{staticClass:\"input flex-grow-0\"},[_c('label',{staticClass:\"mr-2\"},[_vm._v(\"立绘:\")]),_c('v-autocomplete',{attrs:{\"placeholder\":\"角色的立绘\",\"no-data-text\":\"无可用资源\",\"items\":_vm.resources.map(function (uid) { return (Object.assign({}, _vm.data[uid], {uid: uid})); }),\"item-text\":\"name\",\"item-value\":\"uid\"},model:{value:(_vm.role.pic),callback:function ($$v) {_vm.$set(_vm.role, \"pic\", $$v)},expression:\"role.pic\"}})],1),_c('div',{staticClass:\"img-wrapper\"},[_c('img',{attrs:{\"src\":_vm.picUrl}})]),_c('v-btn',{staticClass:\"white--text\",attrs:{\"color\":\"red\"},on:{\"click\":_vm.deleteRole}},[_c('v-icon',[_vm._v(\"mdi-minus\")]),_vm._v(\" 删除该角色 \")],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-avatar',{attrs:{\"size\":_vm.size}},[(_vm.src)?_c('v-img',{attrs:{\"src\":_vm.src,\"contain\":\"\"}}):_c('v-icon',{attrs:{\"size\":\"normal\"}},[_vm._v(_vm._s(_vm.emptyIcon))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-avatar :size=\"size\">\r\n        <v-img\r\n            v-if=\"src\"\r\n            :src=\"src\"\r\n            contain\r\n        />\r\n        <v-icon \r\n            v-else\r\n            size=\"normal\"\r\n        >{{ emptyIcon }}</v-icon>\r\n    </v-avatar>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'RAvatar',\r\n\r\n    props: {\r\n        src: String,\r\n        size: {\r\n            type: [String, Number],\r\n            default: '1em'\r\n        },\r\n        emptyIcon: {\r\n            type: String,\r\n            default: 'mdi-account-alert-outline'\r\n        }\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            text: this.value,\r\n        };\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RAvatar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RAvatar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RAvatar.vue?vue&type=template&id=651caef7&scoped=true&\"\nimport script from \"./RAvatar.vue?vue&type=script&lang=js&\"\nexport * from \"./RAvatar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"651caef7\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\ninstallComponents(component, {VAvatar,VIcon,VImg})\n","<template>\r\n  <div\r\n    class=\"fill d-flex\"\r\n  >\r\n      <!-- 侧边角色列表 -->\r\n      <v-navigation-drawer \r\n        class=\"role-list\"\r\n        permanent\r\n      >\r\n        <v-list>\r\n          <v-list-item-group v-model=\"roleIndex\">\r\n            <v-list-item\r\n              v-for=\"roleUid of roles\"\r\n              :key=\"roleUid\"\r\n            >\r\n              <RAvatar\r\n                class=\"mr-5\"\r\n                :src=\"getAvatarUrl(roleUid)\"\r\n                size=\"2em\"\r\n              />\r\n              {{ data[roleUid].name }}\r\n            </v-list-item>\r\n          </v-list-item-group>\r\n        </v-list>\r\n\r\n        <!-- 添加新角色的按键 -->\r\n        <div class=\"mx-5\">\r\n          <v-btn\r\n            block\r\n            @click=\"addRole\"\r\n          >\r\n            <v-icon>mdi-plus</v-icon>\r\n            新角色\r\n          </v-btn>\r\n        </div>\r\n      </v-navigation-drawer>\r\n\r\n      <!-- 角色展示 -->\r\n      <div\r\n        v-if=\"role\"\r\n        class=\"role ma-5 d-flex flex-column align-center\"\r\n      >\r\n        <div class=\"input d-flex align-start\">\r\n          <!-- 角色名字 -->\r\n          <label class=\"mr-2\">名字:</label>\r\n          <v-input \r\n            class=\"input flex-grow-0\"\r\n            messages=\"必填，最好不要超过三个中文\"\r\n            placeholder=\"角色的名字\"\r\n          >\r\n            <input \r\n              ref=\"nameInput\"\r\n              v-model=\"role.name\"\r\n              autofocus\r\n            />\r\n          </v-input>\r\n\r\n          <v-spacer/>\r\n\r\n          <!-- 角色头像 -->\r\n          <label class=\"mr-2\">头像:</label>\r\n          <div class=\"input flex-grow-0\">\r\n            <v-autocomplete \r\n              class=\"ma-0\"\r\n              dense\r\n              messages=\"无实际用途，仅方便编辑\"\r\n              placeholder=\"角色的头像\"\r\n              no-data-text=\"无可用资源\"\r\n              v-model=\"role.avatar\"\r\n              :items=\"resList\"\r\n              item-text=\"name\"\r\n              item-value=\"uid\"\r\n            />\r\n          </div>\r\n\r\n          <RAvatar \r\n            class=\"ml-3\"\r\n            :src=\"avatarUrl\"\r\n            size=\"3em\"\r\n          />\r\n        </div>\r\n\r\n        <!-- 角色的立绘 -->\r\n        <v-input class=\"input flex-grow-0\">\r\n          <label class=\"mr-2\">立绘:</label>\r\n          <v-autocomplete \r\n            placeholder=\"角色的立绘\"\r\n            no-data-text=\"无可用资源\"\r\n            v-model=\"role.pic\"\r\n            :items=\"resources.map(uid => ({...data[uid], uid}))\"\r\n            item-text=\"name\"\r\n            item-value=\"uid\"\r\n          />\r\n        </v-input>\r\n        \r\n        <!-- 立绘预览 -->\r\n        <div class=\"img-wrapper\">\r\n          <img :src=\"picUrl\"/>\r\n        </div>\r\n\r\n        <v-btn \r\n          color=\"red\"\r\n          class=\"white--text\"\r\n          @click=\"deleteRole\"\r\n        >\r\n          <v-icon>mdi-minus</v-icon>\r\n          删除该角色\r\n        </v-btn>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport RAvatar from '@/components/RAvatar.vue'\r\n\r\nimport state from '@/state.js'\r\n\r\nconst project = state.project;\r\n\r\nexport default {\r\n  name: 'RoleManager',\r\n\r\n  components: {\r\n    RAvatar\r\n  },\r\n\r\n  data: () => ({\r\n    roleIndex: null,\r\n    data: project.data,\r\n    resources: project.resources,\r\n    roles: project.roles,\r\n    role: null,\r\n  }),\r\n\r\n  watch: {\r\n    roleIndex(index) {\r\n      const uid = project.roles[index];\r\n      this.role = uid ? project.data[uid] : null;\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    resList() {\r\n      return project.resources.map(uid => ({uid, ...this.data[uid]}));\r\n    },\r\n\r\n    picUrl() {\r\n      const role = this.role;\r\n      if (role && role.pic) {\r\n        const res = project.data[role.pic];\r\n        return res ? res.src : null;\r\n      }\r\n      return null;\r\n    },\r\n\r\n    avatarUrl() {\r\n      const role = this.role;\r\n      if (role && role.avatar) {\r\n        const res = project.data[role.avatar];\r\n        return res ? res.src : null;\r\n      }\r\n      return null;\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    addRole() {\r\n      project.roles.push(project.addData({\r\n        name: '未命名角色',\r\n        avatar: null,\r\n        pic: null,\r\n      }));\r\n      this.roleIndex = project.roles.length - 1;\r\n    },\r\n\r\n    deleteRole() {\r\n      if (('number' === typeof this.roleIndex) && this.roleIndex >= 0) {\r\n        const uid = project.roles[this.roleIndex];\r\n        project.roles.splice(this.roleIndex, 1);\r\n        delete project.data[uid];\r\n        this.roleIndex = null;\r\n      }\r\n    },\r\n\r\n    getAvatarUrl(uid) {\r\n      const role = project.data[uid];\r\n      if (role) {\r\n        const res = project.data[role.avatar || role.pic];\r\n        return res ? res.src : null;\r\n      }\r\n      return null;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n\r\n.fill {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.role {\r\n  flex: 1;\r\n  overflow-y: hidden;\r\n}\r\n\r\n.input {\r\n  width: 50%;\r\n\r\n  input {\r\n    width: 100%;\r\n    padding-top: 0;;\r\n  }\r\n\r\n  label {\r\n    word-break: keep-all;\r\n  }\r\n}\r\n\r\n.img-wrapper {\r\n  width: 100%;\r\n  height: 10rem;\r\n  flex: 1;\r\n  text-align: center;\r\n  \r\n  img {\r\n    max-width: 100%;\r\n    height: 100%;\r\n    object-fit: contain;\r\n    object-position: center;\r\n  }\r\n}\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleManager.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleManager.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoleManager.vue?vue&type=template&id=2b1cc075&scoped=true&\"\nimport script from \"./RoleManager.vue?vue&type=script&lang=js&\"\nexport * from \"./RoleManager.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoleManager.vue?vue&type=style&index=0&id=2b1cc075&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b1cc075\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAutocomplete } from 'vuetify/lib/components/VAutocomplete';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VInput } from 'vuetify/lib/components/VInput';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VAutocomplete,VBtn,VIcon,VInput,VList,VListItem,VListItemGroup,VNavigationDrawer,VSpacer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fill d-flex\"},[_c('v-navigation-drawer',{attrs:{\"permanent\":\"\"}},[_c('v-list',[_c('v-list-item-group',{model:{value:(_vm.chunkIndex),callback:function ($$v) {_vm.chunkIndex=$$v},expression:\"chunkIndex\"}},_vm._l((_vm.chunkTitleList),function(chunkTitle){return _c('v-list-item',{key:chunkTitle.uid},[_vm._v(_vm._s(chunkTitle.title))])}),1)],1),_c('div',{staticClass:\"mx-5\"},[_c('v-btn',{attrs:{\"block\":\"\"},on:{\"click\":_vm.addChunk}},[_c('v-icon',[_vm._v(\"mdi-plus\")]),_vm._v(\" 新文本段 \")],1)],1)],1),_c('div',{staticClass:\"content flex-grow-1 d-flex flex-column\"},[_c('div',{staticClass:\"chunk-wrapper flex-grow-1\"},[(_vm.chunk)?_c('Chunk',{staticClass:\"chunk\",attrs:{\"chunk\":_vm.chunk,\"index\":_vm.chunkIndex}}):_vm._e()],1),(_vm.hasPrevPage)?_c('div',{staticClass:\"page-changer prev-page px-2 d-flex align-center\",on:{\"click\":_vm.toPrevPage}},[_c('v-icon',[_vm._v(\"mdi-arrow-left\")])],1):_vm._e(),(_vm.hasNextPage)?_c('div',{staticClass:\"page-changer next-page px-2 d-flex align-center\",on:{\"click\":_vm.toNextPage}},[_c('v-icon',[_vm._v(\"mdi-arrow-right\")])],1):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chunk fill\"},[_c('v-img',{staticClass:\"background\",attrs:{\"cover\":\"\",\"width\":\"100%\",\"gradient\":\"#ffffffaf 0%, #ffffffaf 50%, #fff 100%\",\"src\":_vm.backgroundUrl}}),_c('v-container',{staticClass:\"fill pa-0 d-flex flex-column\"},[_c('v-toolbar',{staticClass:\"topbar flex-grow-0\",attrs:{\"dense\":\"\"}},[_c('v-app-bar-nav-icon',{on:{\"click\":function($event){_vm.showInfo = !_vm.showInfo}}}),_c('v-toolbar-title',[_vm._v(_vm._s(_vm.chunk.title))]),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.deleteSelf}},[_c('v-icon',[_vm._v(\"mdi-delete\")])],1),_c('v-slide-y-transition',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showInfo),expression:\"showInfo\"}],staticClass:\"chunkInfo px-15\"},[_c('v-row',{attrs:{\"align\":\"baseline\"}},[_c('v-col',{attrs:{\"cols\":\"2\"}},[_vm._v(\"标题\")]),_c('v-col',{attrs:{\"cols\":\"10\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.chunk.title),expression:\"chunk.title\"}],staticClass:\"text-h4\",attrs:{\"type\":\"text\",\"placeholder\":\"此处输入标题\"},domProps:{\"value\":(_vm.chunk.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.chunk, \"title\", $event.target.value)}}})])],1),_c('v-row',{attrs:{\"align\":\"baseline\"}},[_c('v-col',{attrs:{\"cols\":\"2\"}},[_vm._v(\"副标题\")]),_c('v-col',{attrs:{\"cols\":\"10\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.chunk.subtitle),expression:\"chunk.subtitle\"}],staticClass:\"text-subtitle-1\",attrs:{\"type\":\"text\",\"placeholder\":\"此处输入副标题\"},domProps:{\"value\":(_vm.chunk.subtitle)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.chunk, \"subtitle\", $event.target.value)}}})])],1),_c('v-row',{attrs:{\"align\":\"baseline\"}},[_c('v-col',{attrs:{\"cols\":\"2\"}},[_vm._v(\"背景\")]),_c('v-col',{attrs:{\"cols\":\"10\"}},[_c('v-autocomplete',{staticClass:\"text-subtitle-1\",attrs:{\"dense\":\"\",\"hide-details\":\"auto\",\"no-data-text\":\"无可用资源\",\"items\":_vm.resList,\"item-text\":\"name\",\"item-value\":\"uid\",\"placeholder\":\"选择背景\"},model:{value:(_vm.chunk.background),callback:function ($$v) {_vm.$set(_vm.chunk, \"background\", $$v)},expression:\"chunk.background\"}})],1)],1),_c('v-row',{attrs:{\"align\":\"baseline\"}},[_c('v-col',{attrs:{\"cols\":\"2\"}},[_vm._v(\"BGM\")]),_c('v-col',{attrs:{\"cols\":\"10\"}},[_c('v-autocomplete',{staticClass:\"text-subtitle-1\",attrs:{\"dense\":\"\",\"hide-details\":\"auto\",\"no-data-text\":\"无可用资源\",\"items\":_vm.resList,\"item-text\":\"name\",\"item-value\":\"uid\",\"placeholder\":\"选择BGM\"},model:{value:(_vm.chunk.bgm),callback:function ($$v) {_vm.$set(_vm.chunk, \"bgm\", $$v)},expression:\"chunk.bgm\"}})],1)],1),_c('v-container',[_vm._l((_vm.chunk.exits),function(exit,index){return _c('v-row',{key:index},[_c('v-col',{attrs:{\"cols\":\"1\"}},[_vm._v(_vm._s(index + 1))]),_c('v-col',{attrs:{\"cols\":\"8\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(exit.text),expression:\"exit.text\"}],domProps:{\"value\":(exit.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(exit, \"text\", $event.target.value)}}})]),_c('v-col',{attrs:{\"cols\":\"2\"}},[_c('v-select',{attrs:{\"dense\":\"\",\"hide-details\":\"\",\"items\":_vm.chunkList,\"item-text\":\"title\",\"item-value\":\"uid\"},model:{value:(exit.target),callback:function ($$v) {_vm.$set(exit, \"target\", $$v)},expression:\"exit.target\"}})],1),_c('v-col',{attrs:{\"cols\":\"1\"}},[_c('v-btn',{on:{\"click\":function($event){return _vm.deleteExit(index)}}},[_vm._v(\"删除\")])],1)],1)}),_c('v-row',[_c('v-btn',{attrs:{\"block\":\"\"},on:{\"click\":_vm.addExit}},[_vm._v(\"新分支\")])],1)],2)],1)])],1),_c('v-divider'),_c('v-virtual-scroll',{staticClass:\"content overflow-auto ma-0 px-15 py-2 flex-grow-1\",attrs:{\"item-height\":\"35\",\"items\":_vm.chunk.sections},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nvar index = ref.index;\nreturn [_c('Section',{ref:\"section\",attrs:{\"index\":index,\"section\":item,\"is-only\":_vm.chunk.sections.length === 1},on:{\"add-line\":_vm.addLine,\"delete-line\":_vm.deleteLine,\"focus\":_vm.focusOnSection}})]}}])}),_c('v-row',{staticClass:\"flex-grow-0 pa-2\"},[_c('v-btn',{ref:\"btnAdd\",attrs:{\"block\":\"\",\"elevation\":\"0\"},on:{\"click\":_vm.addLine}},[_c('v-icon',[_vm._v(\"mdi-plus\")]),_vm._v(\" 新台词 \")],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:'section mt-2 d-flex align-center' + (_vm.selected ? ' selected' : ''),attrs:{\"align\":\"start\"},on:{\"mouseenter\":function($event){_vm.showBtnBar = true},\"mouseleave\":function($event){_vm.showBtnBar = false},\"click\":function($event){if(!$event.shiftKey){ return null; }if($event.ctrlKey||$event.altKey||$event.metaKey){ return null; }$event.stopPropagation();return _vm.handleClick($event)}}},[_c('span',{staticClass:\"line-number text-subtitle-2 mr-3\"},[_vm._v(_vm._s(_vm.index + 1))]),(_vm.changingSpeaker)?_c('span',{staticClass:\"speaker\"},[_c('v-select',{staticClass:\"ma-0\",attrs:{\"dense\":\"\",\"hide-details\":\"auto\",\"height\":\"1em\",\"items\":_vm.roleList,\"item-text\":\"name\",\"item-value\":\"uid\",\"no-data-text\":\"无可用角色\"},on:{\"blur\":function($event){_vm.changingSpeaker = false},\"input\":function($event){_vm.changingSpeaker = false}},model:{value:(_vm.section.speaker),callback:function ($$v) {_vm.$set(_vm.section, \"speaker\", $$v)},expression:\"section.speaker\"}})],1):_c('span',{staticClass:\"speaker d-flex align-center\",on:{\"click\":function($event){$event.stopPropagation();_vm.changingSpeaker = true}}},[_c('RAvatar',{attrs:{\"size\":\"2em\",\"contain\":\"\",\"src\":_vm.speakerPicUrl}}),_c('span',[_vm._v(_vm._s(_vm.speakerName))])],1),_c('span',[_vm._v(\":\")]),_c('span',{staticClass:\"mx-2 flex-grow-1\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.section.text),expression:\"section.text\"}],ref:\"textInput\",staticClass:\"text-input py-1\",domProps:{\"value\":(_vm.section.text)},on:{\"keyup\":_vm.handleInputKey,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.section, \"text\", $event.target.value)}}})]),_c('v-expand-x-transition',[(_vm.showBtnBar)?_c('v-btn-toggle',{staticClass:\"btn-tgl\",attrs:{\"dense\":\"\",\"rounded\":\"\",\"borderless\":\"\"}},[_c('v-btn',{staticClass:\"delete-btn\",attrs:{\"icon\":\"\",\"height\":\"2em\",\"color\":\"green\"},on:{\"click\":function($event){return _vm.$emit('add-line', _vm.index)}}},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1),(!_vm.isOnly)?_c('v-btn',{staticClass:\"delete-btn\",attrs:{\"icon\":\"\",\"height\":\"2em\",\"color\":\"red\"},on:{\"click\":function($event){return _vm.$emit('delete-line', _vm.index)}}},[_c('v-icon',[_vm._v(\"mdi-minus\")])],1):_vm._e()],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div\r\n        :class=\"'section mt-2 d-flex align-center' + (selected ? ' selected' : '')\"\r\n        align=\"start\"\r\n        @mouseenter=\"showBtnBar = true\"\r\n        @mouseleave=\"showBtnBar = false\"\r\n        @click.shift.exact.stop=\"handleClick\"\r\n    >\r\n        <!-- 行号 -->\r\n        <span class=\"line-number text-subtitle-2 mr-3\">{{ index + 1 }}</span>\r\n        \r\n        <span \r\n            v-if=\"changingSpeaker\"\r\n            class=\"speaker\"\r\n        >\r\n            <v-select\r\n                class=\"ma-0\"\r\n                dense\r\n                hide-details=\"auto\"\r\n                height=\"1em\"\r\n                :items=\"roleList\"\r\n                item-text=\"name\"\r\n                item-value=\"uid\"\r\n                no-data-text=\"无可用角色\"\r\n                v-model=\"section.speaker\"\r\n                @blur=\"changingSpeaker = false\"\r\n                @input=\"changingSpeaker = false\"\r\n            />\r\n        </span>\r\n\r\n        <span \r\n            v-else\r\n            class=\"speaker d-flex align-center\"\r\n            @click.stop=\"changingSpeaker = true\"\r\n        >\r\n            <RAvatar\r\n                size=\"2em\"\r\n                contain\r\n                :src=\"speakerPicUrl\"\r\n            />\r\n            <span>{{ speakerName }}</span>\r\n        </span>\r\n        \r\n        <span>:</span>\r\n\r\n        <!-- 文本输入 -->\r\n        <span class=\"mx-2 flex-grow-1\">\r\n            <input\r\n                ref=\"textInput\"\r\n                class=\"text-input py-1\"\r\n                v-model=\"section.text\"\r\n                @keyup=\"handleInputKey\"\r\n            />\r\n        </span>\r\n\r\n        <!-- 增减工具 -->\r\n        <v-expand-x-transition>\r\n            <v-btn-toggle \r\n                v-if=\"showBtnBar\"\r\n                class=\"btn-tgl\"\r\n                dense\r\n                rounded\r\n                borderless\r\n            >\r\n                <!-- 在当前行之前插入一行 -->\r\n                <v-btn \r\n                    icon \r\n                    height=\"2em\"\r\n                    class=\"delete-btn\" \r\n                    color=\"green\"\r\n                    @click=\"$emit('add-line', index)\"\r\n                ><v-icon>mdi-plus</v-icon></v-btn>\r\n                \r\n                <!-- 删去该行 -->\r\n                <v-btn \r\n                    v-if=\"!isOnly\"\r\n                    icon \r\n                    height=\"2em\"\r\n                    class=\"delete-btn\" \r\n                    color=\"red\"\r\n                    @click=\"$emit('delete-line', index)\"\r\n                ><v-icon>mdi-minus</v-icon></v-btn>\r\n            </v-btn-toggle>\r\n        </v-expand-x-transition>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport state from '@/state.js'\r\n\r\nimport RAvatar from '@/components/RAvatar.vue'\r\n\r\nconst project = state.project;\r\n\r\nexport default {\r\n    name: 'Section',\r\n\r\n    components: {\r\n        RAvatar\r\n    },\r\n\r\n    props: {\r\n        index: Number,\r\n        section: Object,\r\n        isOnly: Boolean,\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            changingSpeaker: false,\r\n            showBtnBar: false,\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        data: () => project.data,\r\n        \r\n        roleList() {\r\n            return project.roles.map(uid => ({uid, ...project.data[uid]}));\r\n        },\r\n\r\n        speakerName() {\r\n            if (this.section.speaker) {\r\n                const role = project.data[this.section.speaker];\r\n                if (role && role.pic) {\r\n                    return role.name;\r\n                }\r\n            }\r\n            return '      ';\r\n        },\r\n\r\n        speakerPicUrl() {\r\n            if (this.section.speaker) {\r\n                const role = project.data[this.section.speaker];\r\n                if (role) {\r\n                    const res = project.data[role.avatar || role.pic];\r\n                    if (res) {\r\n                        return res.src;\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        },\r\n\r\n        selected() {\r\n            return state.chunkEditorBar.selectState.has(this.index);\r\n        },\r\n    },\r\n\r\n    methods: {\r\n        focus() {\r\n            this.$refs.textInput.focus();\r\n        },\r\n\r\n        handleClick() {\r\n            if (state.chunkEditorBar.clickMode === 'select') {\r\n                if (state.chunkEditorBar.selectState.has(this.index)) {\r\n                    state.chunkEditorBar.selectState.delete(this.index);\r\n                } else {\r\n                    state.chunkEditorBar.selectState.add(this.index);\r\n                }\r\n            } else if (state.chunkEditorBar.clickMode === 'fill') {\r\n                this.section.speaker = state.chunkEditorBar.primaryRoleUid || this.section.speaker;\r\n            }\r\n        },\r\n\r\n        handleInputKey(event) {\r\n            let doPreventDefault = true;\r\n            switch(event.key) {\r\n                case 'Enter': this.$emit('add-line', this.index + 1); break;\r\n                case 'ArrowUp': this.$emit('focus', this.index - 1); break;\r\n                case 'ArrowDown': this.$emit('focus', this.index + 1); break;\r\n                case 'Backspace': {\r\n                    if (/^\\s*$/.test(this.section.text)) {\r\n                        this.$emit('delete-line', this.index);\r\n                    }\r\n                } break;\r\n                default: doPreventDefault = false;\r\n            }\r\n\r\n            if (doPreventDefault) {\r\n                event.preventDefault();\r\n            }\r\n        }\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.section {\r\n    width: 100%;\r\n\r\n    * {\r\n        z-index: inherit;\r\n    }\r\n}\r\n\r\n.line-number {\r\n    width: 2.5em;\r\n    text-align: right;\r\n}\r\n\r\n.speaker-input, \r\n.speaker {\r\n    width: 6em;\r\n}\r\n\r\n.speaker {\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n.inline {\r\n    display: inline;\r\n}\r\n\r\n.text-input {\r\n    width: 100%;\r\n    resize: none;\r\n    outline: none;\r\n}\r\n\r\n.selected {\r\n    background-color: #0000000F;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Section.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Section.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Section.vue?vue&type=template&id=9dd3d4b6&scoped=true&\"\nimport script from \"./Section.vue?vue&type=script&lang=js&\"\nexport * from \"./Section.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Section.vue?vue&type=style&index=0&id=9dd3d4b6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9dd3d4b6\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VBtnToggle } from 'vuetify/lib/components/VBtnToggle';\nimport { VExpandXTransition } from 'vuetify/lib/components/transitions';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\ninstallComponents(component, {VBtn,VBtnToggle,VExpandXTransition,VIcon,VSelect})\n","<template>\r\n  <div class=\"chunk fill\">\r\n    <!-- 背景预览 -->\r\n    <v-img\r\n        class=\"background\"\r\n        cover\r\n        width=\"100%\"\r\n        gradient=\"#ffffffaf 0%, #ffffffaf 50%, #fff 100%\"\r\n        :src=\"backgroundUrl\"\r\n    />\r\n\r\n    <v-container class=\"fill pa-0 d-flex flex-column\">\r\n\r\n        <v-toolbar dense class=\"topbar flex-grow-0\">\r\n            <v-app-bar-nav-icon @click=\"showInfo = !showInfo\"/>\r\n            \r\n            <v-toolbar-title>{{ chunk.title }}</v-toolbar-title>\r\n\r\n            <v-spacer/>\r\n\r\n            <v-btn icon @click=\"deleteSelf\"><v-icon>mdi-delete</v-icon></v-btn>\r\n\r\n            <v-slide-y-transition>\r\n                <div \r\n                    v-show=\"showInfo\"\r\n                    class=\"chunkInfo px-15\"\r\n                >\r\n                    <!-- 输入标题 -->\r\n                    <v-row align=\"baseline\">\r\n                        <v-col cols=\"2\">标题</v-col>\r\n                        <v-col cols=\"10\">\r\n                            <input \r\n                                class=\"text-h4\"\r\n                                type=\"text\"\r\n                                v-model=\"chunk.title\"\r\n                                placeholder=\"此处输入标题\"\r\n                            />\r\n                        </v-col>\r\n                    </v-row>\r\n\r\n                    <!-- 输入副标题 -->\r\n                    <v-row align=\"baseline\">\r\n                        <v-col cols=\"2\">副标题</v-col>\r\n                        <v-col cols=\"10\">\r\n                            <input \r\n                                class=\"text-subtitle-1\"\r\n                                type=\"text\"\r\n                                v-model=\"chunk.subtitle\"\r\n                                placeholder=\"此处输入副标题\"\r\n                            />\r\n                        </v-col>\r\n                    </v-row>\r\n\r\n                    <!-- 选择背景 -->\r\n                    <v-row align=\"baseline\">\r\n                        <v-col cols=\"2\">背景</v-col>\r\n                        <v-col cols=\"10\">\r\n                            <v-autocomplete \r\n                                dense\r\n                                hide-details=\"auto\"\r\n                                no-data-text=\"无可用资源\"\r\n                                class=\"text-subtitle-1\"\r\n                                :items=\"resList\"\r\n                                item-text=\"name\"\r\n                                item-value=\"uid\"\r\n                                v-model=\"chunk.background\"\r\n                                placeholder=\"选择背景\"\r\n                            />\r\n                        </v-col>\r\n                    </v-row>\r\n\r\n                    <!-- 选择BGM -->\r\n                    <v-row align=\"baseline\">\r\n                        <v-col cols=\"2\">BGM</v-col>\r\n                        <v-col cols=\"10\">\r\n                            <v-autocomplete \r\n                                dense\r\n                                hide-details=\"auto\"\r\n                                no-data-text=\"无可用资源\"\r\n                                class=\"text-subtitle-1\"\r\n                                :items=\"resList\"\r\n                                item-text=\"name\"\r\n                                item-value=\"uid\"\r\n                                v-model=\"chunk.bgm\"\r\n                                placeholder=\"选择BGM\"\r\n                            />\r\n                        </v-col>\r\n                    </v-row>\r\n\r\n                    <v-container>\r\n                        <v-row\r\n                            v-for=\"(exit, index) of chunk.exits\"\r\n                            :key=\"index\"\r\n                        >\r\n                            <v-col cols=\"1\">{{ index + 1 }}</v-col>\r\n                            <v-col cols=\"8\"><input v-model=\"exit.text\"/></v-col>\r\n                            <v-col cols=\"2\">\r\n                                <v-select \r\n                                    dense\r\n                                    hide-details\r\n                                    v-model=\"exit.target\"\r\n                                    :items=\"chunkList\"\r\n                                    item-text=\"title\"\r\n                                    item-value=\"uid\"\r\n                                />\r\n                            </v-col>\r\n                            <v-col cols=\"1\"><v-btn @click=\"deleteExit(index)\">删除</v-btn></v-col>\r\n                        </v-row>\r\n                        <v-row>\r\n                            <v-btn block @click=\"addExit\">新分支</v-btn>\r\n                        </v-row>\r\n                    </v-container>\r\n                </div>\r\n            </v-slide-y-transition>\r\n        </v-toolbar>\r\n\r\n        <v-divider/>\r\n\r\n        <!-- 具体段落 -->\r\n        <v-virtual-scroll \r\n            class=\"content overflow-auto ma-0 px-15 py-2 flex-grow-1\"\r\n            item-height=\"35\"\r\n            :items=\"chunk.sections\"\r\n        >\r\n            <template v-slot=\"{ item, index }\">\r\n                <Section\r\n                    ref=\"section\"\r\n                    :index=\"index\"\r\n                    :section=\"item\"\r\n                    :is-only=\"chunk.sections.length === 1\"\r\n                    @add-line=\"addLine\"\r\n                    @delete-line=\"deleteLine\"\r\n                    @focus=\"focusOnSection\"\r\n                />\r\n            </template>\r\n        </v-virtual-scroll>\r\n\r\n        <v-row class=\"flex-grow-0 pa-2\">\r\n            <v-btn\r\n                ref=\"btnAdd\"\r\n                block\r\n                @click=\"addLine\"\r\n                elevation=\"0\"\r\n            >\r\n                <v-icon>mdi-plus</v-icon>\r\n                新台词\r\n            </v-btn>\r\n        </v-row>\r\n    </v-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport state from '@/state.js'\r\n\r\nconst project = state.project;\r\n\r\nimport Section from '@/components/Section.vue'\r\n\r\n  export default {\r\n    name: 'Chunk',\r\n\r\n    components: {\r\n        Section\r\n    },\r\n\r\n    props: {\r\n        chunk: Object,\r\n        index: Number,\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            showInfo: false,\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        resList() {\r\n            return project.resources.map(uid => ({uid, ...project.data[uid]}));\r\n        },\r\n\r\n        chunkList() {\r\n            return project.chunks.map(uid => ({uid, title: project.data[uid].title}));\r\n        },\r\n\r\n        backgroundUrl() {\r\n            if (this.chunk.background) {\r\n                const res = project.data[this.chunk.background];\r\n                return res ? res.src : null;\r\n            }\r\n            return null;\r\n        },\r\n\r\n        data: () => project.data,\r\n        roles: () => project.roles,\r\n    },\r\n\r\n    methods: {\r\n        addLine(index) {\r\n            if ('number' !== typeof index || index < 0 || index > this.chunk.sections.length) {\r\n                index = this.chunk.sections.length;\r\n            }\r\n            const speaker = index ? this.chunk.sections[index - 1].speaker : null;\r\n            const section = {speaker, text: ''};\r\n            this.chunk.sections.splice(index, 0, section);\r\n            this.$nextTick(() => this.focusOnSection(index));\r\n        },\r\n\r\n        deleteLine(index) {\r\n            this.chunk.sections.splice(index, 1);\r\n        },\r\n\r\n        addExit() {\r\n            this.chunk.exits.push({\r\n                text: '',\r\n                target: null,\r\n            });\r\n        },\r\n\r\n        deleteExit(index) {\r\n            this.chunk.exits.splice(index, 1);\r\n        },\r\n\r\n        deleteSelf() {\r\n            const uid = project.chunks[this.index];\r\n            project.chunks.splice(this.index, 1);\r\n            delete project.data[uid];\r\n        },\r\n\r\n        focusOnSection(index) {\r\n            index = Math.max(0, Math.min(index, this.sections.length - 1));\r\n            this.$refs.section[index].focus();\r\n        },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.chunk {\r\n    z-index: 1;\r\n    position: relative;\r\n    overflow: hidden;\r\n\r\n    .topbar {\r\n        z-index: 6;\r\n        position: relative;\r\n\r\n        * {\r\n            z-index: 6;\r\n        }\r\n\r\n        .chunkInfo {\r\n            margin-left: 1em;\r\n            position: absolute;\r\n            top: 100%;\r\n            width: 100%;\r\n            background-color: #FFFFFFD0;\r\n            backdrop-filter: blur(5px);\r\n        }\r\n    }\r\n\r\n    .background {\r\n        position: absolute;\r\n    }\r\n\r\n    .content {\r\n        z-index: 2;\r\n\r\n        * {\r\n            z-index: 2;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\ninput {\r\n    width: 100%;\r\n}\r\n\r\np {\r\n    padding: 0;\r\n    margin: 0;\r\n}\r\n\r\n.fill {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.overflow-auto {\r\n    overflow: auto;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chunk.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chunk.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chunk.vue?vue&type=template&id=0a9e3b8b&scoped=true&\"\nimport script from \"./Chunk.vue?vue&type=script&lang=js&\"\nexport * from \"./Chunk.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chunk.vue?vue&type=style&index=0&id=0a9e3b8b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a9e3b8b\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAppBarNavIcon } from 'vuetify/lib/components/VAppBar';\nimport { VAutocomplete } from 'vuetify/lib/components/VAutocomplete';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSlideYTransition } from 'vuetify/lib/components/transitions';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\nimport { VVirtualScroll } from 'vuetify/lib/components/VVirtualScroll';\ninstallComponents(component, {VAppBarNavIcon,VAutocomplete,VBtn,VCol,VContainer,VDivider,VIcon,VImg,VRow,VSelect,VSlideYTransition,VSpacer,VToolbar,VToolbarTitle,VVirtualScroll})\n","<template>\r\n  <div class=\"fill d-flex\">\r\n\r\n    <!-- 左侧文本段列表 -->\r\n    <v-navigation-drawer permanent>\r\n      <v-list>\r\n        <v-list-item-group v-model=\"chunkIndex\">\r\n          <v-list-item\r\n            v-for=\"chunkTitle of chunkTitleList\"\r\n            :key=\"chunkTitle.uid\"\r\n          >{{ chunkTitle.title }}</v-list-item>\r\n        </v-list-item-group>\r\n      </v-list>\r\n\r\n      <!-- 添加新文本段的按键 -->\r\n      <div class=\"mx-5\">\r\n          <v-btn\r\n            block\r\n            @click=\"addChunk\"\r\n          >\r\n            <v-icon>mdi-plus</v-icon>\r\n            新文本段\r\n          </v-btn>\r\n        </div>\r\n    </v-navigation-drawer>\r\n    \r\n\r\n    <div class=\"content flex-grow-1 d-flex flex-column\">\r\n      <!-- 文本段主体 -->\r\n      <div class=\"chunk-wrapper flex-grow-1\">\r\n        <Chunk \r\n          v-if=\"chunk\"\r\n          class=\"chunk\"\r\n          :chunk=\"chunk\"\r\n          :index=\"chunkIndex\"\r\n        />\r\n      </div>\r\n      \r\n      <!-- 上一页 -->\r\n      <div \r\n        v-if=\"hasPrevPage\"\r\n        class=\"page-changer prev-page px-2 d-flex align-center\"\r\n        @click=\"toPrevPage\"\r\n      >\r\n        <v-icon>mdi-arrow-left</v-icon>\r\n      </div>\r\n\r\n      <!-- 下一页 -->\r\n      <div \r\n        v-if=\"hasNextPage\"\r\n        class=\"page-changer next-page px-2 d-flex align-center\"\r\n        @click=\"toNextPage\"\r\n      >\r\n        <v-icon>mdi-arrow-right</v-icon>\r\n      </div>\r\n\r\n      <!-- 编辑器工具栏 -->\r\n      <!-- <ChunkEditorBar\r\n        v-if=\"chunkIndex !== null\"\r\n        class=\"chunk-editor-bar pa-2\"\r\n      /> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Chunk from '@/components/Chunk.vue'\r\n// import ChunkEditorBar from '@/components/ChunkEditorBar.vue'\r\n\r\nimport state from '@/state.js'\r\n\r\nconst project = state.project;\r\n\r\nexport default {\r\n  name: 'ChunkManager',\r\n\r\n  components: {\r\n    Chunk,\r\n    // ChunkEditorBar\r\n  },\r\n\r\n  data:() => ({\r\n    chunkIndex: null,\r\n    chunk: null,\r\n    chunks: project.chunks,\r\n    data: project.data,\r\n  }),\r\n\r\n  watch: {\r\n    chunkIndex(index) {\r\n      if ('number' === typeof index) {\r\n        const uid = project.chunks[index];\r\n        if (uid) {\r\n          this.chunk = project.data[uid];\r\n          return;\r\n        }\r\n      }\r\n      this.chunk = null;\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    chunkTitleList() {\r\n      return this.chunks.map(uid => ({uid, title: this.data[uid].title}));\r\n    },\r\n\r\n    hasPrevPage() {\r\n      return 'number' === typeof this.chunkIndex && this.chunkIndex > 0;\r\n    },\r\n\r\n    hasNextPage() {\r\n      return 'number' === typeof this.chunkIndex && this.chunkIndex < project.chunks.length - 1;\r\n    },\r\n  },\r\n\r\n  methods: {\r\n\r\n    addChunk() {\r\n      this.chunks.push(project.addData({\r\n        title: '文本段标题',\r\n        subtitle: '',\r\n        background: null,\r\n        bgm: null,\r\n        sections: [{speaker: null, text: ''}],\r\n        exits: [],\r\n      }));\r\n      this.$forceUpdate();\r\n    },\r\n\r\n    toPrevPage() {\r\n      this.chunkIndex--;\r\n    },\r\n\r\n    toNextPage() {\r\n      this.chunkIndex++;\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.fill {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.content {\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.content > .chunk-wrapper {\r\n  width: 100%;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n}\r\n\r\n.content > .chunk-wrapper > * {\r\n  width: 100%;\r\n}\r\n\r\n.page-changer {\r\n  height: 75%;\r\n  position: absolute;\r\n  top: 5em;\r\n  z-index: 2;\r\n  cursor: pointer;\r\n  transition: background-color 500ms;\r\n}\r\n\r\n.page-changer:hover {\r\n  background-color: #0000000F;\r\n}\r\n\r\n.prev-page {\r\n  left: 0;\r\n}\r\n\r\n.next-page {\r\n  right: 0;\r\n}\r\n\r\n.chunk-editor-bar {\r\n  z-index: 4;\r\n  background-color: #FFFFFF;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChunkManager.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChunkManager.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChunkManager.vue?vue&type=template&id=62f02815&scoped=true&\"\nimport script from \"./ChunkManager.vue?vue&type=script&lang=js&\"\nexport * from \"./ChunkManager.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChunkManager.vue?vue&type=style&index=0&id=62f02815&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62f02815\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\ninstallComponents(component, {VBtn,VIcon,VList,VListItem,VListItemGroup,VNavigationDrawer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"overflow-hidden fill d-flex flex-column\"},[_c('div',{staticClass:\"d-flex align-center pa-5\"},[_c('v-chip',{staticClass:\"mx-2\"},[_c('span',{staticClass:\"text-subtitle-1 mx-2\"},[_vm._v(\"初选角色\")]),_c('RoleSelector',{model:{value:(_vm.primaryRoleUid),callback:function ($$v) {_vm.primaryRoleUid=$$v},expression:\"primaryRoleUid\"}})],1),_c('v-chip',{staticClass:\"mx-2\"},[_c('span',{staticClass:\"text-subtitle-1 mx-2\"},[_vm._v(\"次选角色\")]),_c('RoleSelector',{model:{value:(_vm.secondaryRoleUid),callback:function ($$v) {_vm.secondaryRoleUid=$$v},expression:\"secondaryRoleUid\"}})],1),_c('v-chip',{staticClass:\"mx-2\"},[_c('span',[_vm._v(\"新文本段\")]),_c('v-switch',{model:{value:(_vm.newChunk),callback:function ($$v) {_vm.newChunk=$$v},expression:\"newChunk\"}})],1),_c('v-chip',{staticClass:\"mx-2\"},[_c('span',{staticClass:\"text-subtitle-1 mx-2\"},[_vm._v(\"插入章节\")]),_c('v-select',{attrs:{\"items\":_vm.chunkList,\"item-text\":\"title\",\"item-value\":\"uid\",\"no-data-text\":\"无可用章节\",\"disabled\":_vm.newChunk},model:{value:(_vm.chunkUid),callback:function ($$v) {_vm.chunkUid=$$v},expression:\"chunkUid\"}})],1),_c('v-btn-toggle',{attrs:{\"dense\":\"\",\"rounded\":\"\"}},[_c('v-btn',{on:{\"click\":_vm.inject}},[_vm._v(\"注入\")]),_c('v-btn',{on:{\"click\":function($event){_vm.text = ''}}},[_vm._v(\"清空\")])],1)],1),_c('div',{staticClass:\"overflow-auto flex-grow-1 px-5\"},[_c('v-textarea',{staticClass:\"fill ma-0\",attrs:{\"height\":\"100%\",\"auto-grow\":\"\",\"hide-details\":\"\",\"dense\":\"\",\"no-resize\":\"\"},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}})],1),_c('v-snackbar',{attrs:{\"timeout\":2000},model:{value:(_vm.hasMessage),callback:function ($$v) {_vm.hasMessage=$$v},expression:\"hasMessage\"}},[_vm._v(_vm._s(_vm.message))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.changingRole)?_c('span',{staticClass:\"role\",on:{\"blur\":function($event){_vm.changingRole = false}}},[_c('v-select',{staticClass:\"ma-0\",attrs:{\"dense\":\"\",\"hide-details\":\"auto\",\"height\":\"1em\",\"items\":_vm.roleList,\"item-text\":\"name\",\"item-value\":\"uid\",\"no-data-text\":\"无可用角色\"},on:{\"input\":_vm.handleInput},model:{value:(_vm.roleUid),callback:function ($$v) {_vm.roleUid=$$v},expression:\"roleUid\"}})],1):_c('span',{staticClass:\"role d-flex align-center\",on:{\"click\":function($event){_vm.changingRole = true}}},[_c('RAvatar',{attrs:{\"size\":\"2em\",\"contain\":\"\",\"src\":_vm.rolePicUrl}}),_c('span',[_vm._v(_vm._s(_vm.roleName))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <span \r\n        v-if=\"changingRole\"\r\n        class=\"role\"\r\n        @blur=\"changingRole = false\"\r\n    >\r\n        <v-select\r\n            class=\"ma-0\"\r\n            dense\r\n            hide-details=\"auto\"\r\n            height=\"1em\"\r\n            :items=\"roleList\"\r\n            v-model=\"roleUid\"\r\n            item-text=\"name\"\r\n            item-value=\"uid\"\r\n            no-data-text=\"无可用角色\"\r\n            @input=\"handleInput\"\r\n        />\r\n    </span>\r\n\r\n    <span \r\n        v-else\r\n        class=\"role d-flex align-center\"\r\n        @click=\"changingRole = true\"\r\n    >\r\n        <RAvatar\r\n            size=\"2em\"\r\n            contain\r\n            :src=\"rolePicUrl\"\r\n        />\r\n        <span>{{ roleName }}</span>\r\n    </span>\r\n</template>\r\n\r\n<script>\r\nimport state from '@/state.js'\r\n\r\nimport RAvatar from '@/components/RAvatar.vue'\r\n\r\nconst project = state.project;\r\n\r\nexport default {\r\n    name: 'RoleSelector',\r\n\r\n    components: {\r\n        RAvatar\r\n    },\r\n\r\n    props: {\r\n        value: String,\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            roles: project.roles,\r\n            changingRole: false,\r\n            roleUid: this.value,\r\n        };\r\n    },\r\n\r\n    watch: {\r\n        value(val) {\r\n            this.roleUid = val;\r\n        },\r\n    },\r\n\r\n    computed: {\r\n        roleList() {\r\n            return project.roles.map(uid => ({uid, ...project.data[uid]}));\r\n        },\r\n\r\n        roleName() {\r\n            if (this.roleUid) {\r\n                const role = project.data[this.roleUid];\r\n                return role.name;\r\n            }\r\n            return '未指定';\r\n        },\r\n\r\n        rolePicUrl() {\r\n            if (this.roleUid) {\r\n                const role = project.data[this.roleUid];\r\n                if (role) {\r\n                    const res = project.data[role.avatar || role.pic];\r\n                    if (res) {\r\n                        return res.src;\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        },\r\n    },\r\n\r\n    methods: {\r\n        handleInput() {\r\n            this.$emit('input', this.roleUid);\r\n            this.changingRole = false;\r\n        },\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.role-input, \r\n.role {\r\n    width: 6em;\r\n}\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleSelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoleSelector.vue?vue&type=template&id=36b545ec&scoped=true&\"\nimport script from \"./RoleSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./RoleSelector.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RoleSelector.vue?vue&type=style&index=0&id=36b545ec&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"36b545ec\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VSelect } from 'vuetify/lib/components/VSelect';\ninstallComponents(component, {VSelect})\n","<template>\r\n  <div class=\"overflow-hidden fill d-flex flex-column\">\r\n\r\n    <div class=\"d-flex align-center pa-5\">\r\n      <v-chip class=\"mx-2\">\r\n          <span class=\"text-subtitle-1 mx-2\">初选角色</span>\r\n          <RoleSelector v-model=\"primaryRoleUid\"/>\r\n      </v-chip>\r\n\r\n      <v-chip class=\"mx-2\">\r\n          <span class=\"text-subtitle-1 mx-2\">次选角色</span>\r\n          <RoleSelector v-model=\"secondaryRoleUid\"/>\r\n      </v-chip>\r\n\r\n      <v-chip class=\"mx-2\">\r\n        <span>新文本段</span>\r\n        <v-switch\r\n          v-model=\"newChunk\"\r\n        />\r\n      </v-chip>\r\n\r\n      <v-chip class=\"mx-2\">\r\n          <span class=\"text-subtitle-1 mx-2\">插入章节</span>\r\n          <v-select \r\n            v-model=\"chunkUid\"\r\n            :items=\"chunkList\"\r\n            item-text=\"title\"\r\n            item-value=\"uid\"\r\n            no-data-text=\"无可用章节\"\r\n            :disabled=\"newChunk\"\r\n          />\r\n      </v-chip>\r\n      \r\n      <v-btn-toggle dense rounded>\r\n          <v-btn @click=\"inject\">注入</v-btn>\r\n          <v-btn @click=\"text = ''\">清空</v-btn>\r\n      </v-btn-toggle>\r\n    </div>\r\n\r\n    <div class=\"overflow-auto flex-grow-1 px-5\">\r\n      <v-textarea\r\n        class=\"fill ma-0\"\r\n          height=\"100%\"\r\n          auto-grow\r\n          hide-details\r\n          dense\r\n          v-model=\"text\"\r\n          no-resize\r\n      />\r\n    </div>\r\n\r\n    <v-snackbar \r\n      v-model=\"hasMessage\"\r\n      :timeout=\"2000\"\r\n    >{{ message }}</v-snackbar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport RoleSelector from '@/components/RoleSelector.vue'\r\n\r\nimport state from '@/state.js'\r\n\r\nexport default {\r\n  name: 'InjectPage',\r\n\r\n  components: {\r\n    RoleSelector\r\n  },\r\n\r\n  data: () => ({\r\n      text: '',\r\n      hasMessage: false,\r\n      message: null,\r\n      newChunk: false,\r\n      chunkUid: null,\r\n      primaryRoleUid: null,\r\n      secondaryRoleUid: null,\r\n  }),\r\n\r\n  computed: {\r\n    chunkList() {\r\n      const data = state.project.data;\r\n      return state.project.chunks.map(uid => ({uid, title: data[uid].title}));\r\n    },\r\n  },\r\n\r\n  methods: {\r\n      inject() {\r\n          if (/^\\s*$/g.test(this.text)) {\r\n            this.showMessage('输入文本不可为空!');\r\n            return;\r\n          }\r\n\r\n          const sections = this.text\r\n          .split(/[\\n\\r](\\s*[\\n\\r])?/)\r\n          .filter(s => s && s.length)\r\n          .map((s, i) => ({speaker: (i % 2) ? this.secondaryRoleUid : this.primaryRoleUid, text: s}))\r\n          ;\r\n\r\n          if (this.newChunk) {\r\n            state.project.chunks.push(state.project.addData({\r\n              title: '注入文本',\r\n              subtitle: '',\r\n              background: null,\r\n              bgm: null,\r\n              sections,\r\n              exits: [],\r\n            }));\r\n          } else {\r\n            const chunk = state.project.data[this.chunkUid];\r\n            if (chunk) {\r\n              chunk.sections.push(...sections);\r\n            } else {\r\n              this.showMessage('不存在指定文本段');\r\n              return;\r\n            }\r\n          }\r\n\r\n          this.showMessage(`向【${this.newChunk ? '新文本段' : state.project.data[this.chunkUid].title}】注入文本${sections.length}条`);\r\n      },\r\n\r\n      showMessage(msg) {\r\n        this.message = msg;\r\n        this.hasMessage = true;\r\n      },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.fill {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.overflow-hidden {\r\n  overflow: hidden;\r\n}\r\n\r\n.overflow-auto {\r\n  overflow: auto;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InjectPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InjectPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InjectPage.vue?vue&type=template&id=65e8a157&scoped=true&\"\nimport script from \"./InjectPage.vue?vue&type=script&lang=js&\"\nexport * from \"./InjectPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./InjectPage.vue?vue&type=style&index=0&id=65e8a157&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"65e8a157\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VBtnToggle } from 'vuetify/lib/components/VBtnToggle';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSnackbar } from 'vuetify/lib/components/VSnackbar';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VBtn,VBtnToggle,VChip,VSelect,VSnackbar,VSwitch,VTextarea})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"relative fill\"},[_c('img',{staticClass:\"background fill absolute\",attrs:{\"src\":_vm.background}}),_c('audio',{ref:\"bgm\",attrs:{\"src\":_vm.bgm,\"loop\":\"\"}}),_c('img',{staticClass:\"speaker fill absolute\",attrs:{\"src\":_vm.speakerPic}}),_c('div',{staticClass:\"content fill pa-3 d-flex flex-column justify-end\"},[_c('div',{staticClass:\"text oculus mb-3 pa-2\"},[_vm._v(\" \"+_vm._s(_vm.speakerName)+\"：\"+_vm._s(_vm.text)+\" \")]),_c('ul',{staticClass:\"options oculus pa-2\"},[_vm._l((_vm.options),function(option,index){return _c('li',{key:index,staticClass:\"option pa-2\",on:{\"click\":_vm.handleClickOption}},[_vm._v(\" \"+_vm._s(option.text)+\" \")])}),(!_vm.options.length)?_c('li',{staticClass:\"option\",on:{\"click\":_vm.handleClickDefaultOption}},[_vm._v(\"...\")]):_vm._e()],2)]),_c('div',{staticClass:\"debug-panel absolute pa-3\"},[_c('div',{staticClass:\"d-flex justify-center\"},[_c('v-input',{attrs:{\"label\":\"指针：\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.pointer),expression:\"pointer\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"min\":0,\"max\":_vm.script.instructions.length - 1},domProps:{\"value\":(_vm.pointer)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.pointer=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('v-btn',{on:{\"click\":_vm.forceRun}},[_vm._v(\"执行\")])],1),_c('ul',_vm._l((_vm.logger),function(log,index){return _c('li',{key:index},[_vm._v(_vm._s(log))])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"relative fill\">\r\n        <img \r\n            class=\"background fill absolute\"\r\n            :src=\"background\"\r\n        />\r\n\r\n        <audio \r\n            ref=\"bgm\"\r\n            :src=\"bgm\"\r\n            loop\r\n        />\r\n\r\n        <img \r\n            class=\"speaker fill absolute\"\r\n            :src=\"speakerPic\"\r\n        />\r\n\r\n        <div class=\"content fill pa-3 d-flex flex-column justify-end\">\r\n            <div class=\"text oculus mb-3 pa-2\">\r\n                {{ speakerName }}：{{ text }}\r\n            </div>\r\n\r\n            <ul class=\"options oculus pa-2\">\r\n                <li \r\n                    class=\"option pa-2\"\r\n                    v-for=\"(option, index) of options\"\r\n                    :key=\"index\"\r\n                    @click=\"handleClickOption\"\r\n                >\r\n                   {{ option.text }}\r\n                </li> \r\n\r\n                <li \r\n                    v-if=\"!options.length\" \r\n                    class=\"option\"\r\n                    @click=\"handleClickDefaultOption\"\r\n                >...</li>\r\n            </ul>\r\n\r\n        </div>\r\n\r\n        <div class=\"debug-panel absolute pa-3\">\r\n            <div class=\"d-flex justify-center\">\r\n                <v-input\r\n                    label=\"指针：\"\r\n                >\r\n                    <input\r\n                        type=\"number\"\r\n                        :min=\"0\"\r\n                        :max=\"script.instructions.length - 1\"\r\n                        v-model.number=\"pointer\"\r\n                    />\r\n                </v-input>\r\n\r\n                <v-btn @click=\"forceRun\">执行</v-btn>\r\n            </div>\r\n\r\n            <ul>\r\n                <li\r\n                    v-for=\"(log, index) of logger\"\r\n                    :key=\"index\"\r\n                >{{ log }}</li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport state from '@/state.js'\r\n\r\nexport default {\r\n    name: 'Demonstration',\r\n\r\n    data() {\r\n        return {\r\n            pointer: 0,\r\n            background: null,\r\n            bgm: null,\r\n            speakerPic: null,\r\n            speakerName: '',\r\n            line: '',\r\n            options: [],\r\n            hasSetText: false,\r\n            logger: [],\r\n        };\r\n    },\r\n\r\n    watch: {\r\n        bgm(nv, ov) {\r\n            if (nv !== ov && 'string' === typeof nv && nv.length > 0) {\r\n                this.$refs.bgm.play();\r\n            }\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        script: () => state.script,\r\n    },\r\n\r\n    methods: {\r\n        run() {\r\n            while (this.pointer < this.script.instructions.length && this.canStepIn(this.script.instructions[this.pointer])) {\r\n                this.apply(this.script.instructions[this.pointer]);\r\n                this.pointer++;\r\n            }\r\n        },\r\n\r\n        forceRun() {\r\n            this.hasSetText = false;\r\n            this.run();\r\n        },\r\n\r\n        apply(instruction) {\r\n            this.log(instruction.join(' '));\r\n            switch (instruction[0]) {\r\n                case 'bg': \r\n                    this.background = this.script.resources[instruction[1]];\r\n                    break;\r\n                case 'bgm': \r\n                    this.bgm = this.script.resources[instruction[1]];\r\n                    break;\r\n                case 'line': {\r\n                    this.text = instruction[1];\r\n                    const role = this.script.roles[instruction[2]];\r\n                    this.speakerPic = this.script.resources[role.pic];\r\n                    this.speakerName = role.name;\r\n                    this.options = [];\r\n                    this.hasSetText = true;\r\n                } break;\r\n                case 'option': \r\n                    this.options.push({\r\n                        text: instruction[1],\r\n                        target: instruction[2],\r\n                    });\r\n                    break;\r\n            }\r\n        },\r\n\r\n        canStepIn(instruction) {\r\n            switch (instruction[0]) {\r\n                case 'bg': return true;\r\n                case 'bgm': return true;\r\n                case 'line': return !this.hasSetText;\r\n                case 'option': return this.hasSetText;\r\n            }\r\n        },\r\n\r\n        jumpTo(target) {\r\n            this.pointer = target;\r\n        },\r\n\r\n        handleClickOption(optIndex) {\r\n            this.hasSetText = false;\r\n            const option = this.options[optIndex];\r\n            this.jumpTo(option.target);\r\n            this.run();\r\n        },\r\n\r\n        handleClickDefaultOption() {\r\n            this.hasSetText = false;\r\n            this.run();\r\n        },\r\n\r\n        log(msg) {\r\n            if (this.logger.length >= 10) {\r\n                this.logger.shift();\r\n            }\r\n            this.logger.push(msg);\r\n        },\r\n    },\r\n\r\n    created() {\r\n        this.run();\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.relative {\r\n    position: relative;\r\n}\r\n\r\n.fill {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.absolute {\r\n    position: absolute;\r\n}\r\n\r\n.background {\r\n    z-index: 1;\r\n    object-fit: cover;\r\n}\r\n\r\n.absolute * {\r\n    z-index: inherit;\r\n}\r\n\r\n.speaker {\r\n    z-index: 2;\r\n    object-fit: contain;\r\n}\r\n\r\n.content {\r\n    z-index: 5;\r\n}\r\n\r\n.content * {\r\n    z-index: 5;\r\n}\r\n\r\n.oculus {\r\n    background-color: #FFFFFFE0;\r\n}\r\n\r\n.text {\r\n    max-height: 5em;\r\n    min-height: 1em;\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n}\r\n\r\n.options {\r\n    height: 35%;\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n}\r\n\r\n.option {\r\n    user-select: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.option:hover {\r\n    background-color: #FFFFFF;\r\n}\r\n\r\n.debug-panel {\r\n    top: 0;\r\n    z-index: 10;\r\n    width: 100%;\r\n    max-height: 50%;\r\n    background-color: #FFFFFF80;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demonstration.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demonstration.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Demonstration.vue?vue&type=template&id=7d3e8764&scoped=true&\"\nimport script from \"./Demonstration.vue?vue&type=script&lang=js&\"\nexport * from \"./Demonstration.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Demonstration.vue?vue&type=style&index=0&id=7d3e8764&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d3e8764\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VInput } from 'vuetify/lib/components/VInput';\ninstallComponents(component, {VBtn,VInput})\n","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Home from '@/views/Home.vue'\nimport ResourceManager from '@/views/ResourceManager.vue'\nimport RoleManager from '@/views/RoleManager.vue'\nimport ChunkManager from '@/views/ChunkManager.vue'\nimport InjectPage from '@/views/InjectPage.vue'\nimport Demonstration from '@/views/Demonstration.vue'\n\nVue.use(VueRouter)\n\n  const routes = [\n  {\n    path: '/',\n    name: 'Home',\n    component: Home\n  },\n  {\n    path: '/resource-manager',\n    name: 'ResourceManager',\n    component: ResourceManager\n  },\n  {\n    path: '/role-manager',\n    name: 'RoleManager',\n    component: RoleManager\n  },\n  {\n    path: '/chunk-manager',\n    name: 'ChunkManager',\n    component: ChunkManager\n  },\n  {\n    path: '/inject-page',\n    name: 'InjectPage',\n    component: InjectPage\n  },\n  {\n    path: '/demonstration',\n    name: 'Demonstration',\n    component: Demonstration\n  }\n]\n\nconst router = new VueRouter({\n  routes\n})\n\nexport default router\n","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib';\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n});\n","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport vuetify from './plugins/vuetify';\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  router,\r\n  vuetify,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demonstration.vue?vue&type=style&index=0&id=7d3e8764&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demonstration.vue?vue&type=style&index=0&id=7d3e8764&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChunkManager.vue?vue&type=style&index=0&id=62f02815&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChunkManager.vue?vue&type=style&index=0&id=62f02815&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleManager.vue?vue&type=style&index=0&id=2b1cc075&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleManager.vue?vue&type=style&index=0&id=2b1cc075&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=645b45e4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=645b45e4&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chunk.vue?vue&type=style&index=0&id=0a9e3b8b&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chunk.vue?vue&type=style&index=0&id=0a9e3b8b&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleSelector.vue?vue&type=style&index=0&id=36b545ec&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleSelector.vue?vue&type=style&index=0&id=36b545ec&lang=scss&scoped=true&\""],"sourceRoot":""}